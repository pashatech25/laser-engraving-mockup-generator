var ym=Object.defineProperty;var vm=(t,e,r)=>e in t?ym(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ro=(t,e,r)=>(vm(t,typeof e!="symbol"?e+"":e,r),r);function xm(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var zd={exports:{}},so={},Bd={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=Symbol.for("react.element"),bm=Symbol.for("react.portal"),km=Symbol.for("react.fragment"),Sm=Symbol.for("react.strict_mode"),_m=Symbol.for("react.profiler"),jm=Symbol.for("react.provider"),Nm=Symbol.for("react.context"),Em=Symbol.for("react.forward_ref"),Cm=Symbol.for("react.suspense"),Pm=Symbol.for("react.memo"),Tm=Symbol.for("react.lazy"),Bc=Symbol.iterator;function Om(t){return t===null||typeof t!="object"?null:(t=Bc&&t[Bc]||t["@@iterator"],typeof t=="function"?t:null)}var Fd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wd=Object.assign,Hd={};function Cn(t,e,r){this.props=t,this.context=e,this.refs=Hd,this.updater=r||Fd}Cn.prototype.isReactComponent={};Cn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vd(){}Vd.prototype=Cn.prototype;function El(t,e,r){this.props=t,this.context=e,this.refs=Hd,this.updater=r||Fd}var Cl=El.prototype=new Vd;Cl.constructor=El;Wd(Cl,Cn.prototype);Cl.isPureReactComponent=!0;var Fc=Array.isArray,Kd=Object.prototype.hasOwnProperty,Pl={current:null},qd={key:!0,ref:!0,__self:!0,__source:!0};function Gd(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Kd.call(e,n)&&!qd.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:$s,type:t,key:i,ref:o,props:s,_owner:Pl.current}}function Rm(t,e){return{$$typeof:$s,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tl(t){return typeof t=="object"&&t!==null&&t.$$typeof===$s}function Im(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Wc=/\/+/g;function Io(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Im(""+t.key):e.toString(36)}function mi(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $s:case bm:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Io(o,0):n,Fc(s)?(r="",t!=null&&(r=t.replace(Wc,"$&/")+"/"),mi(s,e,r,"",function(d){return d})):s!=null&&(Tl(s)&&(s=Rm(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wc,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Fc(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Io(i,l);o+=mi(i,e,r,c,s)}else if(c=Om(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Io(i,l++),o+=mi(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vs(t,e,r){if(t==null)return t;var n=[],s=0;return mi(t,n,"","",function(i){return e.call(r,i,s++)}),n}function Am(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ue={current:null},gi={transition:null},$m={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:gi,ReactCurrentOwner:Pl};function Jd(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Vs,forEach:function(t,e,r){Vs(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Vs(t,function(){e++}),e},toArray:function(t){return Vs(t,function(e){return e})||[]},only:function(t){if(!Tl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=Cn;G.Fragment=km;G.Profiler=_m;G.PureComponent=El;G.StrictMode=Sm;G.Suspense=Cm;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$m;G.act=Jd;G.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Wd({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Pl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Kd.call(e,c)&&!qd.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:$s,type:t.type,key:s,ref:i,props:n,_owner:o}};G.createContext=function(t){return t={$$typeof:Nm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jm,_context:t},t.Consumer=t};G.createElement=Gd;G.createFactory=function(t){var e=Gd.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:Em,render:t}};G.isValidElement=Tl;G.lazy=function(t){return{$$typeof:Tm,_payload:{_status:-1,_result:t},_init:Am}};G.memo=function(t,e){return{$$typeof:Pm,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=gi.transition;gi.transition={};try{t()}finally{gi.transition=e}};G.unstable_act=Jd;G.useCallback=function(t,e){return Ue.current.useCallback(t,e)};G.useContext=function(t){return Ue.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return Ue.current.useDeferredValue(t)};G.useEffect=function(t,e){return Ue.current.useEffect(t,e)};G.useId=function(){return Ue.current.useId()};G.useImperativeHandle=function(t,e,r){return Ue.current.useImperativeHandle(t,e,r)};G.useInsertionEffect=function(t,e){return Ue.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return Ue.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return Ue.current.useMemo(t,e)};G.useReducer=function(t,e,r){return Ue.current.useReducer(t,e,r)};G.useRef=function(t){return Ue.current.useRef(t)};G.useState=function(t){return Ue.current.useState(t)};G.useSyncExternalStore=function(t,e,r){return Ue.current.useSyncExternalStore(t,e,r)};G.useTransition=function(){return Ue.current.useTransition()};G.version="18.3.1";Bd.exports=G;var _=Bd.exports;const V=Dd(_),Lm=xm({__proto__:null,default:V},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=_,Um=Symbol.for("react.element"),Dm=Symbol.for("react.fragment"),zm=Object.prototype.hasOwnProperty,Bm=Mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fm={key:!0,ref:!0,__self:!0,__source:!0};function Yd(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)zm.call(e,n)&&!Fm.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Um,type:t,key:i,ref:o,props:s,_owner:Bm.current}}so.Fragment=Dm;so.jsx=Yd;so.jsxs=Yd;zd.exports=so;var a=zd.exports,pa={},Qd={exports:{}},Qe={},Xd={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,S){var O=k.length;k.push(S);e:for(;0<O;){var R=O-1>>>1,$=k[R];if(0<s($,S))k[R]=S,k[O]=$,O=R;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var S=k[0],O=k.pop();if(O!==S){k[0]=O;e:for(var R=0,$=k.length,U=$>>>1;R<U;){var ne=2*(R+1)-1,re=k[ne],ee=ne+1,K=k[ee];if(0>s(re,O))ee<$&&0>s(K,re)?(k[R]=K,k[ee]=O,R=ee):(k[R]=re,k[ne]=O,R=ne);else if(ee<$&&0>s(K,O))k[R]=K,k[ee]=O,R=ee;else break e}}return S}function s(k,S){var O=k.sortIndex-S.sortIndex;return O!==0?O:k.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,v=!1,y=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(k){for(var S=r(d);S!==null;){if(S.callback===null)n(d);else if(S.startTime<=k)n(d),S.sortIndex=S.expirationTime,e(c,S);else break;S=r(d)}}function x(k){if(b=!1,m(k),!y)if(r(c)!==null)y=!0,J(E);else{var S=r(d);S!==null&&F(x,S.startTime-k)}}function E(k,S){y=!1,b&&(b=!1,p(P),P=-1),v=!0;var O=f;try{for(m(S),h=r(c);h!==null&&(!(h.expirationTime>S)||k&&!W());){var R=h.callback;if(typeof R=="function"){h.callback=null,f=h.priorityLevel;var $=R(h.expirationTime<=S);S=t.unstable_now(),typeof $=="function"?h.callback=$:h===r(c)&&n(c),m(S)}else n(c);h=r(c)}if(h!==null)var U=!0;else{var ne=r(d);ne!==null&&F(x,ne.startTime-S),U=!1}return U}finally{h=null,f=O,v=!1}}var j=!1,C=null,P=-1,L=5,A=-1;function W(){return!(t.unstable_now()-A<L)}function N(){if(C!==null){var k=t.unstable_now();A=k;var S=!0;try{S=C(!0,k)}finally{S?M():(j=!1,C=null)}}else j=!1}var M;if(typeof g=="function")M=function(){g(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,B=D.port2;D.port1.onmessage=N,M=function(){B.postMessage(null)}}else M=function(){w(N,0)};function J(k){C=k,j||(j=!0,M())}function F(k,S){P=w(function(){k(t.unstable_now())},S)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,J(E))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(k){switch(f){case 1:case 2:case 3:var S=3;break;default:S=f}var O=f;f=S;try{return k()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,S){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var O=f;f=k;try{return S()}finally{f=O}},t.unstable_scheduleCallback=function(k,S,O){var R=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?R+O:R):O=R,k){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=O+$,k={id:u++,callback:S,priorityLevel:k,startTime:O,expirationTime:$,sortIndex:-1},O>R?(k.sortIndex=O,e(d,k),r(c)===null&&k===r(d)&&(b?(p(P),P=-1):b=!0,F(x,O-R))):(k.sortIndex=$,e(c,k),y||v||(y=!0,J(E))),k},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(k){var S=f;return function(){var O=f;f=S;try{return k.apply(this,arguments)}finally{f=O}}}})(Zd);Xd.exports=Zd;var Wm=Xd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm=_,Ye=Wm;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eh=new Set,ms={};function Mr(t,e){vn(t,e),vn(t+"Capture",e)}function vn(t,e){for(ms[t]=e,t=0;t<e.length;t++)eh.add(e[t])}var Lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ma=Object.prototype.hasOwnProperty,Vm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hc={},Vc={};function Km(t){return ma.call(Vc,t)?!0:ma.call(Hc,t)?!1:Vm.test(t)?Vc[t]=!0:(Hc[t]=!0,!1)}function qm(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gm(t,e,r,n){if(e===null||typeof e>"u"||qm(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function De(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pe[t]=new De(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pe[e]=new De(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pe[t]=new De(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pe[t]=new De(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pe[t]=new De(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pe[t]=new De(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pe[t]=new De(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pe[t]=new De(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pe[t]=new De(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ol=/[\-:]([a-z])/g;function Rl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ol,Rl);Pe[e]=new De(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ol,Rl);Pe[e]=new De(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ol,Rl);Pe[e]=new De(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pe[t]=new De(t,1,!1,t.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pe[t]=new De(t,1,!1,t.toLowerCase(),null,!0,!0)});function Il(t,e,r,n){var s=Pe.hasOwnProperty(e)?Pe[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gm(e,r,s,n)&&(r=null),n||s===null?Km(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var zt=Hm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ks=Symbol.for("react.element"),Zr=Symbol.for("react.portal"),en=Symbol.for("react.fragment"),Al=Symbol.for("react.strict_mode"),ga=Symbol.for("react.profiler"),th=Symbol.for("react.provider"),rh=Symbol.for("react.context"),$l=Symbol.for("react.forward_ref"),ya=Symbol.for("react.suspense"),va=Symbol.for("react.suspense_list"),Ll=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),nh=Symbol.for("react.offscreen"),Kc=Symbol.iterator;function $n(t){return t===null||typeof t!="object"?null:(t=Kc&&t[Kc]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Object.assign,Ao;function Gn(t){if(Ao===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ao=e&&e[1]||""}return`
`+Ao+t}var $o=!1;function Lo(t,e){if(!t||$o)return"";$o=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{$o=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Gn(t):""}function Jm(t){switch(t.tag){case 5:return Gn(t.type);case 16:return Gn("Lazy");case 13:return Gn("Suspense");case 19:return Gn("SuspenseList");case 0:case 2:case 15:return t=Lo(t.type,!1),t;case 11:return t=Lo(t.type.render,!1),t;case 1:return t=Lo(t.type,!0),t;default:return""}}function xa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case en:return"Fragment";case Zr:return"Portal";case ga:return"Profiler";case Al:return"StrictMode";case ya:return"Suspense";case va:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rh:return(t.displayName||"Context")+".Consumer";case th:return(t._context.displayName||"Context")+".Provider";case $l:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ll:return e=t.displayName||null,e!==null?e:xa(t.type)||"Memo";case Jt:e=t._payload,t=t._init;try{return xa(t(e))}catch{}}return null}function Ym(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xa(e);case 8:return e===Al?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qm(t){var e=sh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qs(t){t._valueTracker||(t._valueTracker=Qm(t))}function ih(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=sh(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ti(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wa(t,e){var r=e.checked;return pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function qc(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=fr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oh(t,e){e=e.checked,e!=null&&Il(t,"checked",e,!1)}function ba(t,e){oh(t,e);var r=fr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ka(t,e.type,r):e.hasOwnProperty("defaultValue")&&ka(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gc(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ka(t,e,r){(e!=="number"||Ti(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Jn=Array.isArray;function hn(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+fr(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Sa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jc(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(T(92));if(Jn(r)){if(1<r.length)throw Error(T(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fr(r)}}function ah(t,e){var r=fr(e.value),n=fr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Yc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _a(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gs,ch=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xm=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(t){Xm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rs[e]=rs[t]})});function uh(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||rs.hasOwnProperty(t)&&rs[t]?(""+e).trim():e+"px"}function dh(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=uh(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Zm=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ja(t,e){if(e){if(Zm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Na(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ea=null;function Ml(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ca=null,fn=null,pn=null;function Qc(t){if(t=Us(t)){if(typeof Ca!="function")throw Error(T(280));var e=t.stateNode;e&&(e=co(e),Ca(t.stateNode,t.type,e))}}function hh(t){fn?pn?pn.push(t):pn=[t]:fn=t}function fh(){if(fn){var t=fn,e=pn;if(pn=fn=null,Qc(t),e)for(t=0;t<e.length;t++)Qc(e[t])}}function ph(t,e){return t(e)}function mh(){}var Mo=!1;function gh(t,e,r){if(Mo)return t(e,r);Mo=!0;try{return ph(t,e,r)}finally{Mo=!1,(fn!==null||pn!==null)&&(mh(),fh())}}function ys(t,e){var r=t.stateNode;if(r===null)return null;var n=co(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(T(231,e,typeof r));return r}var Pa=!1;if(Lt)try{var Ln={};Object.defineProperty(Ln,"passive",{get:function(){Pa=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch{Pa=!1}function eg(t,e,r,n,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var ns=!1,Oi=null,Ri=!1,Ta=null,tg={onError:function(t){ns=!0,Oi=t}};function rg(t,e,r,n,s,i,o,l,c){ns=!1,Oi=null,eg.apply(tg,arguments)}function ng(t,e,r,n,s,i,o,l,c){if(rg.apply(this,arguments),ns){if(ns){var d=Oi;ns=!1,Oi=null}else throw Error(T(198));Ri||(Ri=!0,Ta=d)}}function Ur(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function yh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xc(t){if(Ur(t)!==t)throw Error(T(188))}function sg(t){var e=t.alternate;if(!e){if(e=Ur(t),e===null)throw Error(T(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Xc(s),t;if(i===n)return Xc(s),e;i=i.sibling}throw Error(T(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?t:e}function vh(t){return t=sg(t),t!==null?xh(t):null}function xh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xh(t);if(e!==null)return e;t=t.sibling}return null}var wh=Ye.unstable_scheduleCallback,Zc=Ye.unstable_cancelCallback,ig=Ye.unstable_shouldYield,og=Ye.unstable_requestPaint,ge=Ye.unstable_now,ag=Ye.unstable_getCurrentPriorityLevel,Ul=Ye.unstable_ImmediatePriority,bh=Ye.unstable_UserBlockingPriority,Ii=Ye.unstable_NormalPriority,lg=Ye.unstable_LowPriority,kh=Ye.unstable_IdlePriority,io=null,jt=null;function cg(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(io,t,void 0,(t.current.flags&128)===128)}catch{}}var mt=Math.clz32?Math.clz32:hg,ug=Math.log,dg=Math.LN2;function hg(t){return t>>>=0,t===0?32:31-(ug(t)/dg|0)|0}var Js=64,Ys=4194304;function Yn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ai(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Yn(l):(i&=o,i!==0&&(n=Yn(i)))}else o=r&~s,o!==0?n=Yn(o):i!==0&&(n=Yn(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-mt(e),s=1<<r,n|=t[r],e&=~s;return n}function fg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pg(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mt(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=fg(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Oa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sh(){var t=Js;return Js<<=1,!(Js&4194240)&&(Js=64),t}function Uo(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ls(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mt(e),t[e]=r}function mg(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-mt(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Dl(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-mt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var te=0;function _h(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jh,zl,Nh,Eh,Ch,Ra=!1,Qs=[],sr=null,ir=null,or=null,vs=new Map,xs=new Map,Qt=[],gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eu(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":vs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(e.pointerId)}}function Mn(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Us(e),e!==null&&zl(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function yg(t,e,r,n,s){switch(e){case"focusin":return sr=Mn(sr,t,e,r,n,s),!0;case"dragenter":return ir=Mn(ir,t,e,r,n,s),!0;case"mouseover":return or=Mn(or,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return vs.set(i,Mn(vs.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,xs.set(i,Mn(xs.get(i)||null,t,e,r,n,s)),!0}return!1}function Ph(t){var e=Nr(t.target);if(e!==null){var r=Ur(e);if(r!==null){if(e=r.tag,e===13){if(e=yh(r),e!==null){t.blockedOn=e,Ch(t.priority,function(){Nh(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ia(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ea=n,r.target.dispatchEvent(n),Ea=null}else return e=Us(r),e!==null&&zl(e),t.blockedOn=r,!1;e.shift()}return!0}function tu(t,e,r){yi(t)&&r.delete(e)}function vg(){Ra=!1,sr!==null&&yi(sr)&&(sr=null),ir!==null&&yi(ir)&&(ir=null),or!==null&&yi(or)&&(or=null),vs.forEach(tu),xs.forEach(tu)}function Un(t,e){t.blockedOn===e&&(t.blockedOn=null,Ra||(Ra=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,vg)))}function ws(t){function e(s){return Un(s,t)}if(0<Qs.length){Un(Qs[0],t);for(var r=1;r<Qs.length;r++){var n=Qs[r];n.blockedOn===t&&(n.blockedOn=null)}}for(sr!==null&&Un(sr,t),ir!==null&&Un(ir,t),or!==null&&Un(or,t),vs.forEach(e),xs.forEach(e),r=0;r<Qt.length;r++)n=Qt[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Qt.length&&(r=Qt[0],r.blockedOn===null);)Ph(r),r.blockedOn===null&&Qt.shift()}var mn=zt.ReactCurrentBatchConfig,$i=!0;function xg(t,e,r,n){var s=te,i=mn.transition;mn.transition=null;try{te=1,Bl(t,e,r,n)}finally{te=s,mn.transition=i}}function wg(t,e,r,n){var s=te,i=mn.transition;mn.transition=null;try{te=4,Bl(t,e,r,n)}finally{te=s,mn.transition=i}}function Bl(t,e,r,n){if($i){var s=Ia(t,e,r,n);if(s===null)Go(t,e,n,Li,r),eu(t,n);else if(yg(s,t,e,r,n))n.stopPropagation();else if(eu(t,n),e&4&&-1<gg.indexOf(t)){for(;s!==null;){var i=Us(s);if(i!==null&&jh(i),i=Ia(t,e,r,n),i===null&&Go(t,e,n,Li,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Go(t,e,n,null,r)}}var Li=null;function Ia(t,e,r,n){if(Li=null,t=Ml(n),t=Nr(t),t!==null)if(e=Ur(t),e===null)t=null;else if(r=e.tag,r===13){if(t=yh(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Li=t,null}function Th(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ag()){case Ul:return 1;case bh:return 4;case Ii:case lg:return 16;case kh:return 536870912;default:return 16}default:return 16}}var tr=null,Fl=null,vi=null;function Oh(){if(vi)return vi;var t,e=Fl,r=e.length,n,s="value"in tr?tr.value:tr.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return vi=s.slice(t,1<n?1-n:void 0)}function xi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xs(){return!0}function ru(){return!1}function Xe(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xs:ru,this.isPropagationStopped=ru,this}return pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),e}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wl=Xe(Pn),Ms=pe({},Pn,{view:0,detail:0}),bg=Xe(Ms),Do,zo,Dn,oo=pe({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dn&&(Dn&&t.type==="mousemove"?(Do=t.screenX-Dn.screenX,zo=t.screenY-Dn.screenY):zo=Do=0,Dn=t),Do)},movementY:function(t){return"movementY"in t?t.movementY:zo}}),nu=Xe(oo),kg=pe({},oo,{dataTransfer:0}),Sg=Xe(kg),_g=pe({},Ms,{relatedTarget:0}),Bo=Xe(_g),jg=pe({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ng=Xe(jg),Eg=pe({},Pn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cg=Xe(Eg),Pg=pe({},Pn,{data:0}),su=Xe(Pg),Tg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ig(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Rg[t])?!!e[t]:!1}function Hl(){return Ig}var Ag=pe({},Ms,{key:function(t){if(t.key){var e=Tg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Og[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(t){return t.type==="keypress"?xi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$g=Xe(Ag),Lg=pe({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iu=Xe(Lg),Mg=pe({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),Ug=Xe(Mg),Dg=pe({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),zg=Xe(Dg),Bg=pe({},oo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fg=Xe(Bg),Wg=[9,13,27,32],Vl=Lt&&"CompositionEvent"in window,ss=null;Lt&&"documentMode"in document&&(ss=document.documentMode);var Hg=Lt&&"TextEvent"in window&&!ss,Rh=Lt&&(!Vl||ss&&8<ss&&11>=ss),ou=String.fromCharCode(32),au=!1;function Ih(t,e){switch(t){case"keyup":return Wg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ah(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tn=!1;function Vg(t,e){switch(t){case"compositionend":return Ah(e);case"keypress":return e.which!==32?null:(au=!0,ou);case"textInput":return t=e.data,t===ou&&au?null:t;default:return null}}function Kg(t,e){if(tn)return t==="compositionend"||!Vl&&Ih(t,e)?(t=Oh(),vi=Fl=tr=null,tn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Rh&&e.locale!=="ko"?null:e.data;default:return null}}var qg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qg[t.type]:e==="textarea"}function $h(t,e,r,n){hh(n),e=Mi(e,"onChange"),0<e.length&&(r=new Wl("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var is=null,bs=null;function Gg(t){Kh(t,0)}function ao(t){var e=sn(t);if(ih(e))return t}function Jg(t,e){if(t==="change")return e}var Lh=!1;if(Lt){var Fo;if(Lt){var Wo="oninput"in document;if(!Wo){var cu=document.createElement("div");cu.setAttribute("oninput","return;"),Wo=typeof cu.oninput=="function"}Fo=Wo}else Fo=!1;Lh=Fo&&(!document.documentMode||9<document.documentMode)}function uu(){is&&(is.detachEvent("onpropertychange",Mh),bs=is=null)}function Mh(t){if(t.propertyName==="value"&&ao(bs)){var e=[];$h(e,bs,t,Ml(t)),gh(Gg,e)}}function Yg(t,e,r){t==="focusin"?(uu(),is=e,bs=r,is.attachEvent("onpropertychange",Mh)):t==="focusout"&&uu()}function Qg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ao(bs)}function Xg(t,e){if(t==="click")return ao(e)}function Zg(t,e){if(t==="input"||t==="change")return ao(e)}function e0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yt=typeof Object.is=="function"?Object.is:e0;function ks(t,e){if(yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!ma.call(e,s)||!yt(t[s],e[s]))return!1}return!0}function du(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hu(t,e){var r=du(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=du(r)}}function Uh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Dh(){for(var t=window,e=Ti();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ti(t.document)}return e}function Kl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function t0(t){var e=Dh(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Uh(r.ownerDocument.documentElement,r)){if(n!==null&&Kl(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=hu(r,i);var o=hu(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var r0=Lt&&"documentMode"in document&&11>=document.documentMode,rn=null,Aa=null,os=null,$a=!1;function fu(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$a||rn==null||rn!==Ti(n)||(n=rn,"selectionStart"in n&&Kl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),os&&ks(os,n)||(os=n,n=Mi(Aa,"onSelect"),0<n.length&&(e=new Wl("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=rn)))}function Zs(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var nn={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionend:Zs("Transition","TransitionEnd")},Ho={},zh={};Lt&&(zh=document.createElement("div").style,"AnimationEvent"in window||(delete nn.animationend.animation,delete nn.animationiteration.animation,delete nn.animationstart.animation),"TransitionEvent"in window||delete nn.transitionend.transition);function lo(t){if(Ho[t])return Ho[t];if(!nn[t])return t;var e=nn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in zh)return Ho[t]=e[r];return t}var Bh=lo("animationend"),Fh=lo("animationiteration"),Wh=lo("animationstart"),Hh=lo("transitionend"),Vh=new Map,pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){Vh.set(t,e),Mr(e,[t])}for(var Vo=0;Vo<pu.length;Vo++){var Ko=pu[Vo],n0=Ko.toLowerCase(),s0=Ko[0].toUpperCase()+Ko.slice(1);mr(n0,"on"+s0)}mr(Bh,"onAnimationEnd");mr(Fh,"onAnimationIteration");mr(Wh,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(Hh,"onTransitionEnd");vn("onMouseEnter",["mouseout","mouseover"]);vn("onMouseLeave",["mouseout","mouseover"]);vn("onPointerEnter",["pointerout","pointerover"]);vn("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qn));function mu(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,ng(n,e,void 0,t),t.currentTarget=null}function Kh(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;mu(s,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;mu(s,l,d),i=c}}}if(Ri)throw t=Ta,Ri=!1,Ta=null,t}function ae(t,e){var r=e[za];r===void 0&&(r=e[za]=new Set);var n=t+"__bubble";r.has(n)||(qh(e,t,2,!1),r.add(n))}function qo(t,e,r){var n=0;e&&(n|=4),qh(r,t,n,e)}var ei="_reactListening"+Math.random().toString(36).slice(2);function Ss(t){if(!t[ei]){t[ei]=!0,eh.forEach(function(r){r!=="selectionchange"&&(i0.has(r)||qo(r,!1,t),qo(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ei]||(e[ei]=!0,qo("selectionchange",!1,e))}}function qh(t,e,r,n){switch(Th(e)){case 1:var s=xg;break;case 4:s=wg;break;default:s=Bl}r=s.bind(null,e,r,t),s=void 0,!Pa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Go(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Nr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}gh(function(){var d=i,u=Ml(r),h=[];e:{var f=Vh.get(t);if(f!==void 0){var v=Wl,y=t;switch(t){case"keypress":if(xi(r)===0)break e;case"keydown":case"keyup":v=$g;break;case"focusin":y="focus",v=Bo;break;case"focusout":y="blur",v=Bo;break;case"beforeblur":case"afterblur":v=Bo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Sg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Ug;break;case Bh:case Fh:case Wh:v=Ng;break;case Hh:v=zg;break;case"scroll":v=bg;break;case"wheel":v=Fg;break;case"copy":case"cut":case"paste":v=Cg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=iu}var b=(e&4)!==0,w=!b&&t==="scroll",p=b?f!==null?f+"Capture":null:f;b=[];for(var g=d,m;g!==null;){m=g;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,p!==null&&(x=ys(g,p),x!=null&&b.push(_s(g,x,m)))),w)break;g=g.return}0<b.length&&(f=new v(f,y,null,r,u),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&r!==Ea&&(y=r.relatedTarget||r.fromElement)&&(Nr(y)||y[Mt]))break e;if((v||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,v?(y=r.relatedTarget||r.toElement,v=d,y=y?Nr(y):null,y!==null&&(w=Ur(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=d),v!==y)){if(b=nu,x="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(b=iu,x="onPointerLeave",p="onPointerEnter",g="pointer"),w=v==null?f:sn(v),m=y==null?f:sn(y),f=new b(x,g+"leave",v,r,u),f.target=w,f.relatedTarget=m,x=null,Nr(u)===d&&(b=new b(p,g+"enter",y,r,u),b.target=m,b.relatedTarget=w,x=b),w=x,v&&y)t:{for(b=v,p=y,g=0,m=b;m;m=Hr(m))g++;for(m=0,x=p;x;x=Hr(x))m++;for(;0<g-m;)b=Hr(b),g--;for(;0<m-g;)p=Hr(p),m--;for(;g--;){if(b===p||p!==null&&b===p.alternate)break t;b=Hr(b),p=Hr(p)}b=null}else b=null;v!==null&&gu(h,f,v,b,!1),y!==null&&w!==null&&gu(h,w,y,b,!0)}}e:{if(f=d?sn(d):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var E=Jg;else if(lu(f))if(Lh)E=Zg;else{E=Qg;var j=Yg}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Xg);if(E&&(E=E(t,d))){$h(h,E,r,u);break e}j&&j(t,f,d),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&ka(f,"number",f.value)}switch(j=d?sn(d):window,t){case"focusin":(lu(j)||j.contentEditable==="true")&&(rn=j,Aa=d,os=null);break;case"focusout":os=Aa=rn=null;break;case"mousedown":$a=!0;break;case"contextmenu":case"mouseup":case"dragend":$a=!1,fu(h,r,u);break;case"selectionchange":if(r0)break;case"keydown":case"keyup":fu(h,r,u)}var C;if(Vl)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else tn?Ih(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Rh&&r.locale!=="ko"&&(tn||P!=="onCompositionStart"?P==="onCompositionEnd"&&tn&&(C=Oh()):(tr=u,Fl="value"in tr?tr.value:tr.textContent,tn=!0)),j=Mi(d,P),0<j.length&&(P=new su(P,t,null,r,u),h.push({event:P,listeners:j}),C?P.data=C:(C=Ah(r),C!==null&&(P.data=C)))),(C=Hg?Vg(t,r):Kg(t,r))&&(d=Mi(d,"onBeforeInput"),0<d.length&&(u=new su("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=C))}Kh(h,e)})}function _s(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Mi(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ys(t,r),i!=null&&n.unshift(_s(t,i,s)),i=ys(t,e),i!=null&&n.push(_s(t,i,s))),t=t.return}return n}function Hr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gu(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=ys(r,i),c!=null&&o.unshift(_s(r,c,l))):s||(c=ys(r,i),c!=null&&o.push(_s(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var o0=/\r\n?/g,a0=/\u0000|\uFFFD/g;function yu(t){return(typeof t=="string"?t:""+t).replace(o0,`
`).replace(a0,"")}function ti(t,e,r){if(e=yu(e),yu(t)!==e&&r)throw Error(T(425))}function Ui(){}var La=null,Ma=null;function Ua(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Da=typeof setTimeout=="function"?setTimeout:void 0,l0=typeof clearTimeout=="function"?clearTimeout:void 0,vu=typeof Promise=="function"?Promise:void 0,c0=typeof queueMicrotask=="function"?queueMicrotask:typeof vu<"u"?function(t){return vu.resolve(null).then(t).catch(u0)}:Da;function u0(t){setTimeout(function(){throw t})}function Jo(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),ws(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ws(e)}function ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Tn=Math.random().toString(36).slice(2),St="__reactFiber$"+Tn,js="__reactProps$"+Tn,Mt="__reactContainer$"+Tn,za="__reactEvents$"+Tn,d0="__reactListeners$"+Tn,h0="__reactHandles$"+Tn;function Nr(t){var e=t[St];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Mt]||r[St]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=xu(t);t!==null;){if(r=t[St])return r;t=xu(t)}return e}t=r,r=t.parentNode}return null}function Us(t){return t=t[St]||t[Mt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function co(t){return t[js]||null}var Ba=[],on=-1;function gr(t){return{current:t}}function le(t){0>on||(t.current=Ba[on],Ba[on]=null,on--)}function ie(t,e){on++,Ba[on]=t.current,t.current=e}var pr={},Ae=gr(pr),We=gr(!1),Rr=pr;function xn(t,e){var r=t.type.contextTypes;if(!r)return pr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function He(t){return t=t.childContextTypes,t!=null}function Di(){le(We),le(Ae)}function wu(t,e,r){if(Ae.current!==pr)throw Error(T(168));ie(Ae,e),ie(We,r)}function Gh(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(T(108,Ym(t)||"Unknown",s));return pe({},r,n)}function zi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pr,Rr=Ae.current,ie(Ae,t),ie(We,We.current),!0}function bu(t,e,r){var n=t.stateNode;if(!n)throw Error(T(169));r?(t=Gh(t,e,Rr),n.__reactInternalMemoizedMergedChildContext=t,le(We),le(Ae),ie(Ae,t)):le(We),ie(We,r)}var Rt=null,uo=!1,Yo=!1;function Jh(t){Rt===null?Rt=[t]:Rt.push(t)}function f0(t){uo=!0,Jh(t)}function yr(){if(!Yo&&Rt!==null){Yo=!0;var t=0,e=te;try{var r=Rt;for(te=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Rt=null,uo=!1}catch(s){throw Rt!==null&&(Rt=Rt.slice(t+1)),wh(Ul,yr),s}finally{te=e,Yo=!1}}return null}var an=[],ln=0,Bi=null,Fi=0,tt=[],rt=0,Ir=null,It=1,At="";function kr(t,e){an[ln++]=Fi,an[ln++]=Bi,Bi=t,Fi=e}function Yh(t,e,r){tt[rt++]=It,tt[rt++]=At,tt[rt++]=Ir,Ir=t;var n=It;t=At;var s=32-mt(n)-1;n&=~(1<<s),r+=1;var i=32-mt(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,It=1<<32-mt(e)+s|r<<s|n,At=i+t}else It=1<<i|r<<s|n,At=t}function ql(t){t.return!==null&&(kr(t,1),Yh(t,1,0))}function Gl(t){for(;t===Bi;)Bi=an[--ln],an[ln]=null,Fi=an[--ln],an[ln]=null;for(;t===Ir;)Ir=tt[--rt],tt[rt]=null,At=tt[--rt],tt[rt]=null,It=tt[--rt],tt[rt]=null}var Je=null,Ge=null,ce=!1,pt=null;function Qh(t,e){var r=nt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ku(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Je=t,Ge=ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Je=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ir!==null?{id:It,overflow:At}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=nt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Je=t,Ge=null,!0):!1;default:return!1}}function Fa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wa(t){if(ce){var e=Ge;if(e){var r=e;if(!ku(t,e)){if(Fa(t))throw Error(T(418));e=ar(r.nextSibling);var n=Je;e&&ku(t,e)?Qh(n,r):(t.flags=t.flags&-4097|2,ce=!1,Je=t)}}else{if(Fa(t))throw Error(T(418));t.flags=t.flags&-4097|2,ce=!1,Je=t}}}function Su(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Je=t}function ri(t){if(t!==Je)return!1;if(!ce)return Su(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ua(t.type,t.memoizedProps)),e&&(e=Ge)){if(Fa(t))throw Xh(),Error(T(418));for(;e;)Qh(t,e),e=ar(e.nextSibling)}if(Su(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ge=ar(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Je?ar(t.stateNode.nextSibling):null;return!0}function Xh(){for(var t=Ge;t;)t=ar(t.nextSibling)}function wn(){Ge=Je=null,ce=!1}function Jl(t){pt===null?pt=[t]:pt.push(t)}var p0=zt.ReactCurrentBatchConfig;function zn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,t))}return t}function ni(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _u(t){var e=t._init;return e(t._payload)}function Zh(t){function e(p,g){if(t){var m=p.deletions;m===null?(p.deletions=[g],p.flags|=16):m.push(g)}}function r(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function n(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function s(p,g){return p=dr(p,g),p.index=0,p.sibling=null,p}function i(p,g,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<g?(p.flags|=2,g):m):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,g,m,x){return g===null||g.tag!==6?(g=na(m,p.mode,x),g.return=p,g):(g=s(g,m),g.return=p,g)}function c(p,g,m,x){var E=m.type;return E===en?u(p,g,m.props.children,x,m.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Jt&&_u(E)===g.type)?(x=s(g,m.props),x.ref=zn(p,g,m),x.return=p,x):(x=Ni(m.type,m.key,m.props,null,p.mode,x),x.ref=zn(p,g,m),x.return=p,x)}function d(p,g,m,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=sa(m,p.mode,x),g.return=p,g):(g=s(g,m.children||[]),g.return=p,g)}function u(p,g,m,x,E){return g===null||g.tag!==7?(g=Or(m,p.mode,x,E),g.return=p,g):(g=s(g,m),g.return=p,g)}function h(p,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=na(""+g,p.mode,m),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ks:return m=Ni(g.type,g.key,g.props,null,p.mode,m),m.ref=zn(p,null,g),m.return=p,m;case Zr:return g=sa(g,p.mode,m),g.return=p,g;case Jt:var x=g._init;return h(p,x(g._payload),m)}if(Jn(g)||$n(g))return g=Or(g,p.mode,m,null),g.return=p,g;ni(p,g)}return null}function f(p,g,m,x){var E=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return E!==null?null:l(p,g,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ks:return m.key===E?c(p,g,m,x):null;case Zr:return m.key===E?d(p,g,m,x):null;case Jt:return E=m._init,f(p,g,E(m._payload),x)}if(Jn(m)||$n(m))return E!==null?null:u(p,g,m,x,null);ni(p,m)}return null}function v(p,g,m,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(m)||null,l(g,p,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ks:return p=p.get(x.key===null?m:x.key)||null,c(g,p,x,E);case Zr:return p=p.get(x.key===null?m:x.key)||null,d(g,p,x,E);case Jt:var j=x._init;return v(p,g,m,j(x._payload),E)}if(Jn(x)||$n(x))return p=p.get(m)||null,u(g,p,x,E,null);ni(g,x)}return null}function y(p,g,m,x){for(var E=null,j=null,C=g,P=g=0,L=null;C!==null&&P<m.length;P++){C.index>P?(L=C,C=null):L=C.sibling;var A=f(p,C,m[P],x);if(A===null){C===null&&(C=L);break}t&&C&&A.alternate===null&&e(p,C),g=i(A,g,P),j===null?E=A:j.sibling=A,j=A,C=L}if(P===m.length)return r(p,C),ce&&kr(p,P),E;if(C===null){for(;P<m.length;P++)C=h(p,m[P],x),C!==null&&(g=i(C,g,P),j===null?E=C:j.sibling=C,j=C);return ce&&kr(p,P),E}for(C=n(p,C);P<m.length;P++)L=v(C,p,P,m[P],x),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?P:L.key),g=i(L,g,P),j===null?E=L:j.sibling=L,j=L);return t&&C.forEach(function(W){return e(p,W)}),ce&&kr(p,P),E}function b(p,g,m,x){var E=$n(m);if(typeof E!="function")throw Error(T(150));if(m=E.call(m),m==null)throw Error(T(151));for(var j=E=null,C=g,P=g=0,L=null,A=m.next();C!==null&&!A.done;P++,A=m.next()){C.index>P?(L=C,C=null):L=C.sibling;var W=f(p,C,A.value,x);if(W===null){C===null&&(C=L);break}t&&C&&W.alternate===null&&e(p,C),g=i(W,g,P),j===null?E=W:j.sibling=W,j=W,C=L}if(A.done)return r(p,C),ce&&kr(p,P),E;if(C===null){for(;!A.done;P++,A=m.next())A=h(p,A.value,x),A!==null&&(g=i(A,g,P),j===null?E=A:j.sibling=A,j=A);return ce&&kr(p,P),E}for(C=n(p,C);!A.done;P++,A=m.next())A=v(C,p,P,A.value,x),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?P:A.key),g=i(A,g,P),j===null?E=A:j.sibling=A,j=A);return t&&C.forEach(function(N){return e(p,N)}),ce&&kr(p,P),E}function w(p,g,m,x){if(typeof m=="object"&&m!==null&&m.type===en&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ks:e:{for(var E=m.key,j=g;j!==null;){if(j.key===E){if(E=m.type,E===en){if(j.tag===7){r(p,j.sibling),g=s(j,m.props.children),g.return=p,p=g;break e}}else if(j.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Jt&&_u(E)===j.type){r(p,j.sibling),g=s(j,m.props),g.ref=zn(p,j,m),g.return=p,p=g;break e}r(p,j);break}else e(p,j);j=j.sibling}m.type===en?(g=Or(m.props.children,p.mode,x,m.key),g.return=p,p=g):(x=Ni(m.type,m.key,m.props,null,p.mode,x),x.ref=zn(p,g,m),x.return=p,p=x)}return o(p);case Zr:e:{for(j=m.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){r(p,g.sibling),g=s(g,m.children||[]),g.return=p,p=g;break e}else{r(p,g);break}else e(p,g);g=g.sibling}g=sa(m,p.mode,x),g.return=p,p=g}return o(p);case Jt:return j=m._init,w(p,g,j(m._payload),x)}if(Jn(m))return y(p,g,m,x);if($n(m))return b(p,g,m,x);ni(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(r(p,g.sibling),g=s(g,m),g.return=p,p=g):(r(p,g),g=na(m,p.mode,x),g.return=p,p=g),o(p)):r(p,g)}return w}var bn=Zh(!0),ef=Zh(!1),Wi=gr(null),Hi=null,cn=null,Yl=null;function Ql(){Yl=cn=Hi=null}function Xl(t){var e=Wi.current;le(Wi),t._currentValue=e}function Ha(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function gn(t,e){Hi=t,Yl=cn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fe=!0),t.firstContext=null)}function ot(t){var e=t._currentValue;if(Yl!==t)if(t={context:t,memoizedValue:e,next:null},cn===null){if(Hi===null)throw Error(T(308));cn=t,Hi.dependencies={lanes:0,firstContext:t}}else cn=cn.next=t;return e}var Er=null;function Zl(t){Er===null?Er=[t]:Er.push(t)}function tf(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Zl(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ut(t,n)}function Ut(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Yt=!1;function ec(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $t(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Z&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ut(t,r)}return s=n.interleaved,s===null?(e.next=e,Zl(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ut(t,r)}function wi(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dl(t,r)}}function ju(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Vi(t,e,r,n){var s=t.updateQueue;Yt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,v=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,b=l;switch(f=e,v=r,b.tag){case 1:if(y=b.payload,typeof y=="function"){h=y.call(v,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,f=typeof y=="function"?y.call(v,h,f):y,f==null)break e;h=pe({},h,f);break e;case 2:Yt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else v={eventTime:v,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=v,c=h):u=u.next=v,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(u===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);$r|=o,t.lanes=o,t.memoizedState=h}}function Nu(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(T(191,s));s.call(n)}}}var Ds={},Nt=gr(Ds),Ns=gr(Ds),Es=gr(Ds);function Cr(t){if(t===Ds)throw Error(T(174));return t}function tc(t,e){switch(ie(Es,e),ie(Ns,t),ie(Nt,Ds),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_a(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_a(e,t)}le(Nt),ie(Nt,e)}function kn(){le(Nt),le(Ns),le(Es)}function nf(t){Cr(Es.current);var e=Cr(Nt.current),r=_a(e,t.type);e!==r&&(ie(Ns,t),ie(Nt,r))}function rc(t){Ns.current===t&&(le(Nt),le(Ns))}var de=gr(0);function Ki(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qo=[];function nc(){for(var t=0;t<Qo.length;t++)Qo[t]._workInProgressVersionPrimary=null;Qo.length=0}var bi=zt.ReactCurrentDispatcher,Xo=zt.ReactCurrentBatchConfig,Ar=0,fe=null,Se=null,je=null,qi=!1,as=!1,Cs=0,m0=0;function Te(){throw Error(T(321))}function sc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!yt(t[r],e[r]))return!1;return!0}function ic(t,e,r,n,s,i){if(Ar=i,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bi.current=t===null||t.memoizedState===null?x0:w0,t=r(n,s),as){i=0;do{if(as=!1,Cs=0,25<=i)throw Error(T(301));i+=1,je=Se=null,e.updateQueue=null,bi.current=b0,t=r(n,s)}while(as)}if(bi.current=Gi,e=Se!==null&&Se.next!==null,Ar=0,je=Se=fe=null,qi=!1,e)throw Error(T(300));return t}function oc(){var t=Cs!==0;return Cs=0,t}function bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?fe.memoizedState=je=t:je=je.next=t,je}function at(){if(Se===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=je===null?fe.memoizedState:je.next;if(e!==null)je=e,Se=t;else{if(t===null)throw Error(T(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},je===null?fe.memoizedState=je=t:je=je.next=t}return je}function Ps(t,e){return typeof e=="function"?e(t):e}function Zo(t){var e=at(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=Se,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Ar&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,fe.lanes|=u,$r|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,yt(n,e.memoizedState)||(Fe=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,fe.lanes|=i,$r|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ea(t){var e=at(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);yt(i,e.memoizedState)||(Fe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function sf(){}function of(t,e){var r=fe,n=at(),s=e(),i=!yt(n.memoizedState,s);if(i&&(n.memoizedState=s,Fe=!0),n=n.queue,ac(cf.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||je!==null&&je.memoizedState.tag&1){if(r.flags|=2048,Ts(9,lf.bind(null,r,n,s,e),void 0,null),Ne===null)throw Error(T(349));Ar&30||af(r,e,s)}return s}function af(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function lf(t,e,r,n){e.value=r,e.getSnapshot=n,uf(e)&&df(t)}function cf(t,e,r){return r(function(){uf(e)&&df(t)})}function uf(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!yt(t,r)}catch{return!0}}function df(t){var e=Ut(t,1);e!==null&&gt(e,t,1,-1)}function Eu(t){var e=bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:t},e.queue=t,t=t.dispatch=v0.bind(null,fe,t),[e.memoizedState,t]}function Ts(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function hf(){return at().memoizedState}function ki(t,e,r,n){var s=bt();fe.flags|=t,s.memoizedState=Ts(1|e,r,void 0,n===void 0?null:n)}function ho(t,e,r,n){var s=at();n=n===void 0?null:n;var i=void 0;if(Se!==null){var o=Se.memoizedState;if(i=o.destroy,n!==null&&sc(n,o.deps)){s.memoizedState=Ts(e,r,i,n);return}}fe.flags|=t,s.memoizedState=Ts(1|e,r,i,n)}function Cu(t,e){return ki(8390656,8,t,e)}function ac(t,e){return ho(2048,8,t,e)}function ff(t,e){return ho(4,2,t,e)}function pf(t,e){return ho(4,4,t,e)}function mf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gf(t,e,r){return r=r!=null?r.concat([t]):null,ho(4,4,mf.bind(null,e,t),r)}function lc(){}function yf(t,e){var r=at();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&sc(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function vf(t,e){var r=at();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&sc(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function xf(t,e,r){return Ar&21?(yt(r,e)||(r=Sh(),fe.lanes|=r,$r|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fe=!0),t.memoizedState=r)}function g0(t,e){var r=te;te=r!==0&&4>r?r:4,t(!0);var n=Xo.transition;Xo.transition={};try{t(!1),e()}finally{te=r,Xo.transition=n}}function wf(){return at().memoizedState}function y0(t,e,r){var n=ur(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},bf(t))kf(e,r);else if(r=tf(t,e,r,n),r!==null){var s=Me();gt(r,t,n,s),Sf(r,e,n)}}function v0(t,e,r){var n=ur(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(bf(t))kf(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,yt(l,o)){var c=e.interleaved;c===null?(s.next=s,Zl(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=tf(t,e,s,n),r!==null&&(s=Me(),gt(r,t,n,s),Sf(r,e,n))}}function bf(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function kf(t,e){as=qi=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Sf(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dl(t,r)}}var Gi={readContext:ot,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},x0={readContext:ot,useCallback:function(t,e){return bt().memoizedState=[t,e===void 0?null:e],t},useContext:ot,useEffect:Cu,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ki(4194308,4,mf.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ki(4194308,4,t,e)},useInsertionEffect:function(t,e){return ki(4,2,t,e)},useMemo:function(t,e){var r=bt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=bt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=y0.bind(null,fe,t),[n.memoizedState,t]},useRef:function(t){var e=bt();return t={current:t},e.memoizedState=t},useState:Eu,useDebugValue:lc,useDeferredValue:function(t){return bt().memoizedState=t},useTransition:function(){var t=Eu(!1),e=t[0];return t=g0.bind(null,t[1]),bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=fe,s=bt();if(ce){if(r===void 0)throw Error(T(407));r=r()}else{if(r=e(),Ne===null)throw Error(T(349));Ar&30||af(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,Cu(cf.bind(null,n,i,t),[t]),n.flags|=2048,Ts(9,lf.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=bt(),e=Ne.identifierPrefix;if(ce){var r=At,n=It;r=(n&~(1<<32-mt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Cs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=m0++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},w0={readContext:ot,useCallback:yf,useContext:ot,useEffect:ac,useImperativeHandle:gf,useInsertionEffect:ff,useLayoutEffect:pf,useMemo:vf,useReducer:Zo,useRef:hf,useState:function(){return Zo(Ps)},useDebugValue:lc,useDeferredValue:function(t){var e=at();return xf(e,Se.memoizedState,t)},useTransition:function(){var t=Zo(Ps)[0],e=at().memoizedState;return[t,e]},useMutableSource:sf,useSyncExternalStore:of,useId:wf,unstable_isNewReconciler:!1},b0={readContext:ot,useCallback:yf,useContext:ot,useEffect:ac,useImperativeHandle:gf,useInsertionEffect:ff,useLayoutEffect:pf,useMemo:vf,useReducer:ea,useRef:hf,useState:function(){return ea(Ps)},useDebugValue:lc,useDeferredValue:function(t){var e=at();return Se===null?e.memoizedState=t:xf(e,Se.memoizedState,t)},useTransition:function(){var t=ea(Ps)[0],e=at().memoizedState;return[t,e]},useMutableSource:sf,useSyncExternalStore:of,useId:wf,unstable_isNewReconciler:!1};function dt(t,e){if(t&&t.defaultProps){e=pe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Va(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:pe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var fo={isMounted:function(t){return(t=t._reactInternals)?Ur(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Me(),s=ur(t),i=$t(n,s);i.payload=e,r!=null&&(i.callback=r),e=lr(t,i,s),e!==null&&(gt(e,t,s,n),wi(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Me(),s=ur(t),i=$t(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=lr(t,i,s),e!==null&&(gt(e,t,s,n),wi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Me(),n=ur(t),s=$t(r,n);s.tag=2,e!=null&&(s.callback=e),e=lr(t,s,n),e!==null&&(gt(e,t,n,r),wi(e,t,n))}};function Pu(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!ks(r,n)||!ks(s,i):!0}function _f(t,e,r){var n=!1,s=pr,i=e.contextType;return typeof i=="object"&&i!==null?i=ot(i):(s=He(e)?Rr:Ae.current,n=e.contextTypes,i=(n=n!=null)?xn(t,s):pr),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Tu(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&fo.enqueueReplaceState(e,e.state,null)}function Ka(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},ec(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ot(i):(i=He(e)?Rr:Ae.current,s.context=xn(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Va(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fo.enqueueReplaceState(s,s.state,null),Vi(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Sn(t,e){try{var r="",n=e;do r+=Jm(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ta(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function qa(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var k0=typeof WeakMap=="function"?WeakMap:Map;function jf(t,e,r){r=$t(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Yi||(Yi=!0,nl=n),qa(t,e)},r}function Nf(t,e,r){r=$t(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){qa(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){qa(t,e),typeof n!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Ou(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new k0;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=L0.bind(null,t,e,r),e.then(t,t))}function Ru(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Iu(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=$t(-1,1),e.tag=2,lr(r,e,1))),r.lanes|=1),t)}var S0=zt.ReactCurrentOwner,Fe=!1;function Le(t,e,r,n){e.child=t===null?ef(e,null,r,n):bn(e,t.child,r,n)}function Au(t,e,r,n,s){r=r.render;var i=e.ref;return gn(e,s),n=ic(t,e,r,n,i,s),r=oc(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dt(t,e,s)):(ce&&r&&ql(e),e.flags|=1,Le(t,e,n,s),e.child)}function $u(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!gc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Ef(t,e,i,n,s)):(t=Ni(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ks,r(o,n)&&t.ref===e.ref)return Dt(t,e,s)}return e.flags|=1,t=dr(i,n),t.ref=e.ref,t.return=e,e.child=t}function Ef(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(ks(i,n)&&t.ref===e.ref)if(Fe=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Fe=!0);else return e.lanes=t.lanes,Dt(t,e,s)}return Ga(t,e,r,n,s)}function Cf(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(dn,qe),qe|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(dn,qe),qe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ie(dn,qe),qe|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,ie(dn,qe),qe|=n;return Le(t,e,s,r),e.child}function Pf(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ga(t,e,r,n,s){var i=He(r)?Rr:Ae.current;return i=xn(e,i),gn(e,s),r=ic(t,e,r,n,i,s),n=oc(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dt(t,e,s)):(ce&&n&&ql(e),e.flags|=1,Le(t,e,r,s),e.child)}function Lu(t,e,r,n,s){if(He(r)){var i=!0;zi(e)}else i=!1;if(gn(e,s),e.stateNode===null)Si(t,e),_f(e,r,n),Ka(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=ot(d):(d=He(r)?Rr:Ae.current,d=xn(e,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Tu(e,o,n,d),Yt=!1;var f=e.memoizedState;o.state=f,Vi(e,n,o,s),c=e.memoizedState,l!==n||f!==c||We.current||Yt?(typeof u=="function"&&(Va(e,r,u,n),c=e.memoizedState),(l=Yt||Pu(e,r,l,n,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,rf(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:dt(e.type,l),o.props=d,h=e.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ot(c):(c=He(r)?Rr:Ae.current,c=xn(e,c));var v=r.getDerivedStateFromProps;(u=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Tu(e,o,n,c),Yt=!1,f=e.memoizedState,o.state=f,Vi(e,n,o,s);var y=e.memoizedState;l!==h||f!==y||We.current||Yt?(typeof v=="function"&&(Va(e,r,v,n),y=e.memoizedState),(d=Yt||Pu(e,r,d,n,f,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Ja(t,e,r,n,i,s)}function Ja(t,e,r,n,s,i){Pf(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&bu(e,r,!1),Dt(t,e,i);n=e.stateNode,S0.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=bn(e,t.child,null,i),e.child=bn(e,null,l,i)):Le(t,e,l,i),e.memoizedState=n.state,s&&bu(e,r,!0),e.child}function Tf(t){var e=t.stateNode;e.pendingContext?wu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wu(t,e.context,!1),tc(t,e.containerInfo)}function Mu(t,e,r,n,s){return wn(),Jl(s),e.flags|=256,Le(t,e,r,n),e.child}var Ya={dehydrated:null,treeContext:null,retryLane:0};function Qa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Of(t,e,r){var n=e.pendingProps,s=de.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ie(de,s&1),t===null)return Wa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=go(o,n,0,null),t=Or(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qa(r),e.memoizedState=Ya,t):cc(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _0(t,e,o,n,l,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=dr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=dr(l,i):(i=Or(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Qa(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Ya,n}return i=t.child,t=i.sibling,n=dr(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function cc(t,e){return e=go({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function si(t,e,r,n){return n!==null&&Jl(n),bn(e,t.child,null,r),t=cc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _0(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=ta(Error(T(422))),si(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=go({mode:"visible",children:n.children},s,0,null),i=Or(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&bn(e,t.child,null,o),e.child.memoizedState=Qa(o),e.memoizedState=Ya,i);if(!(e.mode&1))return si(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(T(419)),n=ta(i,n,void 0),si(t,e,o,n)}if(l=(o&t.childLanes)!==0,Fe||l){if(n=Ne,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ut(t,s),gt(n,t,s,-1))}return mc(),n=ta(Error(T(421))),si(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=M0.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ge=ar(s.nextSibling),Je=e,ce=!0,pt=null,t!==null&&(tt[rt++]=It,tt[rt++]=At,tt[rt++]=Ir,It=t.id,At=t.overflow,Ir=e),e=cc(e,n.children),e.flags|=4096,e)}function Uu(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ha(t.return,e,r)}function ra(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Rf(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Le(t,e,n.children,r),n=de.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uu(t,r,e);else if(t.tag===19)Uu(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ie(de,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Ki(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),ra(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ki(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}ra(e,!0,r,null,i);break;case"together":ra(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Si(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),$r|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,r=dr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=dr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function j0(t,e,r){switch(e.tag){case 3:Tf(e),wn();break;case 5:nf(e);break;case 1:He(e.type)&&zi(e);break;case 4:tc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ie(Wi,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ie(de,de.current&1),e.flags|=128,null):r&e.child.childLanes?Of(t,e,r):(ie(de,de.current&1),t=Dt(t,e,r),t!==null?t.sibling:null);ie(de,de.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Rf(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ie(de,de.current),n)break;return null;case 22:case 23:return e.lanes=0,Cf(t,e,r)}return Dt(t,e,r)}var If,Xa,Af,$f;If=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xa=function(){};Af=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Cr(Nt.current);var i=null;switch(r){case"input":s=wa(t,s),n=wa(t,n),i=[];break;case"select":s=pe({},s,{value:void 0}),n=pe({},n,{value:void 0}),i=[];break;case"textarea":s=Sa(t,s),n=Sa(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ui)}ja(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ms.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ms.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ae("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};$f=function(t,e,r,n){r!==n&&(e.flags|=4)};function Bn(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Oe(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function N0(t,e,r){var n=e.pendingProps;switch(Gl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(e),null;case 1:return He(e.type)&&Di(),Oe(e),null;case 3:return n=e.stateNode,kn(),le(We),le(Ae),nc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ri(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pt!==null&&(ol(pt),pt=null))),Xa(t,e),Oe(e),null;case 5:rc(e);var s=Cr(Es.current);if(r=e.type,t!==null&&e.stateNode!=null)Af(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(T(166));return Oe(e),null}if(t=Cr(Nt.current),ri(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[St]=e,n[js]=i,t=(e.mode&1)!==0,r){case"dialog":ae("cancel",n),ae("close",n);break;case"iframe":case"object":case"embed":ae("load",n);break;case"video":case"audio":for(s=0;s<Qn.length;s++)ae(Qn[s],n);break;case"source":ae("error",n);break;case"img":case"image":case"link":ae("error",n),ae("load",n);break;case"details":ae("toggle",n);break;case"input":qc(n,i),ae("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ae("invalid",n);break;case"textarea":Jc(n,i),ae("invalid",n)}ja(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ti(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ti(n.textContent,l,t),s=["children",""+l]):ms.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ae("scroll",n)}switch(r){case"input":qs(n),Gc(n,i,!0);break;case"textarea":qs(n),Yc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ui)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lh(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[St]=e,t[js]=n,If(t,e,!1,!1),e.stateNode=t;e:{switch(o=Na(r,n),r){case"dialog":ae("cancel",t),ae("close",t),s=n;break;case"iframe":case"object":case"embed":ae("load",t),s=n;break;case"video":case"audio":for(s=0;s<Qn.length;s++)ae(Qn[s],t);s=n;break;case"source":ae("error",t),s=n;break;case"img":case"image":case"link":ae("error",t),ae("load",t),s=n;break;case"details":ae("toggle",t),s=n;break;case"input":qc(t,n),s=wa(t,n),ae("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=pe({},n,{value:void 0}),ae("invalid",t);break;case"textarea":Jc(t,n),s=Sa(t,n),ae("invalid",t);break;default:s=n}ja(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?dh(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ch(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&gs(t,c):typeof c=="number"&&gs(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ms.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ae("scroll",t):c!=null&&Il(t,i,c,o))}switch(r){case"input":qs(t),Gc(t,n,!1);break;case"textarea":qs(t),Yc(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fr(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?hn(t,!!n.multiple,i,!1):n.defaultValue!=null&&hn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ui)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Oe(e),null;case 6:if(t&&e.stateNode!=null)$f(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(T(166));if(r=Cr(Es.current),Cr(Nt.current),ri(e)){if(n=e.stateNode,r=e.memoizedProps,n[St]=e,(i=n.nodeValue!==r)&&(t=Je,t!==null))switch(t.tag){case 3:ti(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ti(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[St]=e,e.stateNode=n}return Oe(e),null;case 13:if(le(de),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&Ge!==null&&e.mode&1&&!(e.flags&128))Xh(),wn(),e.flags|=98560,i=!1;else if(i=ri(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(T(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[St]=e}else wn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Oe(e),i=!1}else pt!==null&&(ol(pt),pt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||de.current&1?_e===0&&(_e=3):mc())),e.updateQueue!==null&&(e.flags|=4),Oe(e),null);case 4:return kn(),Xa(t,e),t===null&&Ss(e.stateNode.containerInfo),Oe(e),null;case 10:return Xl(e.type._context),Oe(e),null;case 17:return He(e.type)&&Di(),Oe(e),null;case 19:if(le(de),i=e.memoizedState,i===null)return Oe(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Bn(i,!1);else{if(_e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ki(t),o!==null){for(e.flags|=128,Bn(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ie(de,de.current&1|2),e.child}t=t.sibling}i.tail!==null&&ge()>_n&&(e.flags|=128,n=!0,Bn(i,!1),e.lanes=4194304)}else{if(!n)if(t=Ki(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Bn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ce)return Oe(e),null}else 2*ge()-i.renderingStartTime>_n&&r!==1073741824&&(e.flags|=128,n=!0,Bn(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ge(),e.sibling=null,r=de.current,ie(de,n?r&1|2:r&1),e):(Oe(e),null);case 22:case 23:return pc(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?qe&1073741824&&(Oe(e),e.subtreeFlags&6&&(e.flags|=8192)):Oe(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function E0(t,e){switch(Gl(e),e.tag){case 1:return He(e.type)&&Di(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kn(),le(We),le(Ae),nc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rc(e),null;case 13:if(le(de),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));wn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(de),null;case 4:return kn(),null;case 10:return Xl(e.type._context),null;case 22:case 23:return pc(),null;case 24:return null;default:return null}}var ii=!1,Ie=!1,C0=typeof WeakSet=="function"?WeakSet:Set,I=null;function un(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){me(t,e,n)}else r.current=null}function Za(t,e,r){try{r()}catch(n){me(t,e,n)}}var Du=!1;function P0(t,e){if(La=$i,t=Dh(),Kl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var v;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===t)break t;if(f===r&&++d===s&&(l=o),f===i&&++u===n&&(c=o),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ma={focusedElem:t,selectionRange:r},$i=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,w=y.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:dt(e.type,b),w);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(x){me(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return y=Du,Du=!1,y}function ls(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Za(e,r,i)}s=s.next}while(s!==n)}}function po(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function el(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Lf(t){var e=t.alternate;e!==null&&(t.alternate=null,Lf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[St],delete e[js],delete e[za],delete e[d0],delete e[h0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mf(t){return t.tag===5||t.tag===3||t.tag===4}function zu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ui));else if(n!==4&&(t=t.child,t!==null))for(tl(t,e,r),t=t.sibling;t!==null;)tl(t,e,r),t=t.sibling}function rl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(rl(t,e,r),t=t.sibling;t!==null;)rl(t,e,r),t=t.sibling}var Ee=null,ht=!1;function Ht(t,e,r){for(r=r.child;r!==null;)Uf(t,e,r),r=r.sibling}function Uf(t,e,r){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(io,r)}catch{}switch(r.tag){case 5:Ie||un(r,e);case 6:var n=Ee,s=ht;Ee=null,Ht(t,e,r),Ee=n,ht=s,Ee!==null&&(ht?(t=Ee,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ee.removeChild(r.stateNode));break;case 18:Ee!==null&&(ht?(t=Ee,r=r.stateNode,t.nodeType===8?Jo(t.parentNode,r):t.nodeType===1&&Jo(t,r),ws(t)):Jo(Ee,r.stateNode));break;case 4:n=Ee,s=ht,Ee=r.stateNode.containerInfo,ht=!0,Ht(t,e,r),Ee=n,ht=s;break;case 0:case 11:case 14:case 15:if(!Ie&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Za(r,e,o),s=s.next}while(s!==n)}Ht(t,e,r);break;case 1:if(!Ie&&(un(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){me(r,e,l)}Ht(t,e,r);break;case 21:Ht(t,e,r);break;case 22:r.mode&1?(Ie=(n=Ie)||r.memoizedState!==null,Ht(t,e,r),Ie=n):Ht(t,e,r);break;default:Ht(t,e,r)}}function Bu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new C0),e.forEach(function(n){var s=U0.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function lt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ee=l.stateNode,ht=!1;break e;case 3:Ee=l.stateNode.containerInfo,ht=!0;break e;case 4:Ee=l.stateNode.containerInfo,ht=!0;break e}l=l.return}if(Ee===null)throw Error(T(160));Uf(i,o,s),Ee=null,ht=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Df(e,t),e=e.sibling}function Df(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lt(e,t),wt(t),n&4){try{ls(3,t,t.return),po(3,t)}catch(b){me(t,t.return,b)}try{ls(5,t,t.return)}catch(b){me(t,t.return,b)}}break;case 1:lt(e,t),wt(t),n&512&&r!==null&&un(r,r.return);break;case 5:if(lt(e,t),wt(t),n&512&&r!==null&&un(r,r.return),t.flags&32){var s=t.stateNode;try{gs(s,"")}catch(b){me(t,t.return,b)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&oh(s,i),Na(l,o);var d=Na(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?dh(s,h):u==="dangerouslySetInnerHTML"?ch(s,h):u==="children"?gs(s,h):Il(s,u,h,d)}switch(l){case"input":ba(s,i);break;case"textarea":ah(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?hn(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?hn(s,!!i.multiple,i.defaultValue,!0):hn(s,!!i.multiple,i.multiple?[]:"",!1))}s[js]=i}catch(b){me(t,t.return,b)}}break;case 6:if(lt(e,t),wt(t),n&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){me(t,t.return,b)}}break;case 3:if(lt(e,t),wt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ws(e.containerInfo)}catch(b){me(t,t.return,b)}break;case 4:lt(e,t),wt(t);break;case 13:lt(e,t),wt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hc=ge())),n&4&&Bu(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Ie=(d=Ie)||u,lt(e,t),Ie=d):lt(e,t),wt(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(I=t,u=t.child;u!==null;){for(h=I=u;I!==null;){switch(f=I,v=f.child,f.tag){case 0:case 11:case 14:case 15:ls(4,f,f.return);break;case 1:un(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){me(n,r,b)}}break;case 5:un(f,f.return);break;case 22:if(f.memoizedState!==null){Wu(h);continue}}v!==null?(v.return=f,I=v):Wu(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=uh("display",o))}catch(b){me(t,t.return,b)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(b){me(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:lt(e,t),wt(t),n&4&&Bu(t);break;case 21:break;default:lt(e,t),wt(t)}}function wt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Mf(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(gs(s,""),n.flags&=-33);var i=zu(t);rl(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=zu(t);tl(t,l,o);break;default:throw Error(T(161))}}catch(c){me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function T0(t,e,r){I=t,zf(t)}function zf(t,e,r){for(var n=(t.mode&1)!==0;I!==null;){var s=I,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ii;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ie;l=ii;var d=Ie;if(ii=o,(Ie=c)&&!d)for(I=s;I!==null;)o=I,c=o.child,o.tag===22&&o.memoizedState!==null?Hu(s):c!==null?(c.return=o,I=c):Hu(s);for(;i!==null;)I=i,zf(i),i=i.sibling;I=s,ii=l,Ie=d}Fu(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,I=i):Fu(t)}}function Fu(t){for(;I!==null;){var e=I;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ie||po(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ie)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:dt(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Nu(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Nu(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ws(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ie||e.flags&512&&el(e)}catch(f){me(e,e.return,f)}}if(e===t){I=null;break}if(r=e.sibling,r!==null){r.return=e.return,I=r;break}I=e.return}}function Wu(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var r=e.sibling;if(r!==null){r.return=e.return,I=r;break}I=e.return}}function Hu(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{po(4,e)}catch(c){me(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){me(e,s,c)}}var i=e.return;try{el(e)}catch(c){me(e,i,c)}break;case 5:var o=e.return;try{el(e)}catch(c){me(e,o,c)}}}catch(c){me(e,e.return,c)}if(e===t){I=null;break}var l=e.sibling;if(l!==null){l.return=e.return,I=l;break}I=e.return}}var O0=Math.ceil,Ji=zt.ReactCurrentDispatcher,uc=zt.ReactCurrentOwner,st=zt.ReactCurrentBatchConfig,Z=0,Ne=null,xe=null,Ce=0,qe=0,dn=gr(0),_e=0,Os=null,$r=0,mo=0,dc=0,cs=null,ze=null,hc=0,_n=1/0,Tt=null,Yi=!1,nl=null,cr=null,oi=!1,rr=null,Qi=0,us=0,sl=null,_i=-1,ji=0;function Me(){return Z&6?ge():_i!==-1?_i:_i=ge()}function ur(t){return t.mode&1?Z&2&&Ce!==0?Ce&-Ce:p0.transition!==null?(ji===0&&(ji=Sh()),ji):(t=te,t!==0||(t=window.event,t=t===void 0?16:Th(t.type)),t):1}function gt(t,e,r,n){if(50<us)throw us=0,sl=null,Error(T(185));Ls(t,r,n),(!(Z&2)||t!==Ne)&&(t===Ne&&(!(Z&2)&&(mo|=r),_e===4&&Xt(t,Ce)),Ve(t,n),r===1&&Z===0&&!(e.mode&1)&&(_n=ge()+500,uo&&yr()))}function Ve(t,e){var r=t.callbackNode;pg(t,e);var n=Ai(t,t===Ne?Ce:0);if(n===0)r!==null&&Zc(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Zc(r),e===1)t.tag===0?f0(Vu.bind(null,t)):Jh(Vu.bind(null,t)),c0(function(){!(Z&6)&&yr()}),r=null;else{switch(_h(n)){case 1:r=Ul;break;case 4:r=bh;break;case 16:r=Ii;break;case 536870912:r=kh;break;default:r=Ii}r=Gf(r,Bf.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Bf(t,e){if(_i=-1,ji=0,Z&6)throw Error(T(327));var r=t.callbackNode;if(yn()&&t.callbackNode!==r)return null;var n=Ai(t,t===Ne?Ce:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xi(t,n);else{e=n;var s=Z;Z|=2;var i=Wf();(Ne!==t||Ce!==e)&&(Tt=null,_n=ge()+500,Tr(t,e));do try{A0();break}catch(l){Ff(t,l)}while(1);Ql(),Ji.current=i,Z=s,xe!==null?e=0:(Ne=null,Ce=0,e=_e)}if(e!==0){if(e===2&&(s=Oa(t),s!==0&&(n=s,e=il(t,s))),e===1)throw r=Os,Tr(t,0),Xt(t,n),Ve(t,ge()),r;if(e===6)Xt(t,n);else{if(s=t.current.alternate,!(n&30)&&!R0(s)&&(e=Xi(t,n),e===2&&(i=Oa(t),i!==0&&(n=i,e=il(t,i))),e===1))throw r=Os,Tr(t,0),Xt(t,n),Ve(t,ge()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(T(345));case 2:Sr(t,ze,Tt);break;case 3:if(Xt(t,n),(n&130023424)===n&&(e=hc+500-ge(),10<e)){if(Ai(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Me(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Da(Sr.bind(null,t,ze,Tt),e);break}Sr(t,ze,Tt);break;case 4:if(Xt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-mt(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=ge()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*O0(n/1960))-n,10<n){t.timeoutHandle=Da(Sr.bind(null,t,ze,Tt),n);break}Sr(t,ze,Tt);break;case 5:Sr(t,ze,Tt);break;default:throw Error(T(329))}}}return Ve(t,ge()),t.callbackNode===r?Bf.bind(null,t):null}function il(t,e){var r=cs;return t.current.memoizedState.isDehydrated&&(Tr(t,e).flags|=256),t=Xi(t,e),t!==2&&(e=ze,ze=r,e!==null&&ol(e)),t}function ol(t){ze===null?ze=t:ze.push.apply(ze,t)}function R0(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!yt(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xt(t,e){for(e&=~dc,e&=~mo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-mt(e),n=1<<r;t[r]=-1,e&=~n}}function Vu(t){if(Z&6)throw Error(T(327));yn();var e=Ai(t,0);if(!(e&1))return Ve(t,ge()),null;var r=Xi(t,e);if(t.tag!==0&&r===2){var n=Oa(t);n!==0&&(e=n,r=il(t,n))}if(r===1)throw r=Os,Tr(t,0),Xt(t,e),Ve(t,ge()),r;if(r===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sr(t,ze,Tt),Ve(t,ge()),null}function fc(t,e){var r=Z;Z|=1;try{return t(e)}finally{Z=r,Z===0&&(_n=ge()+500,uo&&yr())}}function Lr(t){rr!==null&&rr.tag===0&&!(Z&6)&&yn();var e=Z;Z|=1;var r=st.transition,n=te;try{if(st.transition=null,te=1,t)return t()}finally{te=n,st.transition=r,Z=e,!(Z&6)&&yr()}}function pc(){qe=dn.current,le(dn)}function Tr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,l0(r)),xe!==null)for(r=xe.return;r!==null;){var n=r;switch(Gl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Di();break;case 3:kn(),le(We),le(Ae),nc();break;case 5:rc(n);break;case 4:kn();break;case 13:le(de);break;case 19:le(de);break;case 10:Xl(n.type._context);break;case 22:case 23:pc()}r=r.return}if(Ne=t,xe=t=dr(t.current,null),Ce=qe=e,_e=0,Os=null,dc=mo=$r=0,ze=cs=null,Er!==null){for(e=0;e<Er.length;e++)if(r=Er[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Er=null}return t}function Ff(t,e){do{var r=xe;try{if(Ql(),bi.current=Gi,qi){for(var n=fe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}qi=!1}if(Ar=0,je=Se=fe=null,as=!1,Cs=0,uc.current=null,r===null||r.return===null){_e=1,Os=e,xe=null;break}e:{var i=t,o=r.return,l=r,c=e;if(e=Ce,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var v=Ru(o);if(v!==null){v.flags&=-257,Iu(v,o,l,i,e),v.mode&1&&Ou(i,d,e),e=v,c=d;var y=e.updateQueue;if(y===null){var b=new Set;b.add(c),e.updateQueue=b}else y.add(c);break e}else{if(!(e&1)){Ou(i,d,e),mc();break e}c=Error(T(426))}}else if(ce&&l.mode&1){var w=Ru(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Iu(w,o,l,i,e),Jl(Sn(c,l));break e}}i=c=Sn(c,l),_e!==4&&(_e=2),cs===null?cs=[i]:cs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=jf(i,c,e);ju(i,p);break e;case 1:l=c;var g=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(cr===null||!cr.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Nf(i,l,e);ju(i,x);break e}}i=i.return}while(i!==null)}Vf(r)}catch(E){e=E,xe===r&&r!==null&&(xe=r=r.return);continue}break}while(1)}function Wf(){var t=Ji.current;return Ji.current=Gi,t===null?Gi:t}function mc(){(_e===0||_e===3||_e===2)&&(_e=4),Ne===null||!($r&268435455)&&!(mo&268435455)||Xt(Ne,Ce)}function Xi(t,e){var r=Z;Z|=2;var n=Wf();(Ne!==t||Ce!==e)&&(Tt=null,Tr(t,e));do try{I0();break}catch(s){Ff(t,s)}while(1);if(Ql(),Z=r,Ji.current=n,xe!==null)throw Error(T(261));return Ne=null,Ce=0,_e}function I0(){for(;xe!==null;)Hf(xe)}function A0(){for(;xe!==null&&!ig();)Hf(xe)}function Hf(t){var e=qf(t.alternate,t,qe);t.memoizedProps=t.pendingProps,e===null?Vf(t):xe=e,uc.current=null}function Vf(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=E0(r,e),r!==null){r.flags&=32767,xe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_e=6,xe=null;return}}else if(r=N0(r,e,qe),r!==null){xe=r;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);_e===0&&(_e=5)}function Sr(t,e,r){var n=te,s=st.transition;try{st.transition=null,te=1,$0(t,e,r,n)}finally{st.transition=s,te=n}return null}function $0(t,e,r,n){do yn();while(rr!==null);if(Z&6)throw Error(T(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(mg(t,i),t===Ne&&(xe=Ne=null,Ce=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||oi||(oi=!0,Gf(Ii,function(){return yn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=st.transition,st.transition=null;var o=te;te=1;var l=Z;Z|=4,uc.current=null,P0(t,r),Df(r,t),t0(Ma),$i=!!La,Ma=La=null,t.current=r,T0(r),og(),Z=l,te=o,st.transition=i}else t.current=r;if(oi&&(oi=!1,rr=t,Qi=s),i=t.pendingLanes,i===0&&(cr=null),cg(r.stateNode),Ve(t,ge()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Yi)throw Yi=!1,t=nl,nl=null,t;return Qi&1&&t.tag!==0&&yn(),i=t.pendingLanes,i&1?t===sl?us++:(us=0,sl=t):us=0,yr(),null}function yn(){if(rr!==null){var t=_h(Qi),e=st.transition,r=te;try{if(st.transition=null,te=16>t?16:t,rr===null)var n=!1;else{if(t=rr,rr=null,Qi=0,Z&6)throw Error(T(331));var s=Z;for(Z|=4,I=t.current;I!==null;){var i=I,o=i.child;if(I.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(I=d;I!==null;){var u=I;switch(u.tag){case 0:case 11:case 15:ls(8,u,i)}var h=u.child;if(h!==null)h.return=u,I=h;else for(;I!==null;){u=I;var f=u.sibling,v=u.return;if(Lf(u),u===d){I=null;break}if(f!==null){f.return=v,I=f;break}I=v}}}var y=i.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}I=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,I=o;else e:for(;I!==null;){if(i=I,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ls(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,I=p;break e}I=i.return}}var g=t.current;for(I=g;I!==null;){o=I;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,I=m;else e:for(o=g;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:po(9,l)}}catch(E){me(l,l.return,E)}if(l===o){I=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,I=x;break e}I=l.return}}if(Z=s,yr(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(io,t)}catch{}n=!0}return n}finally{te=r,st.transition=e}}return!1}function Ku(t,e,r){e=Sn(r,e),e=jf(t,e,1),t=lr(t,e,1),e=Me(),t!==null&&(Ls(t,1,e),Ve(t,e))}function me(t,e,r){if(t.tag===3)Ku(t,t,r);else for(;e!==null;){if(e.tag===3){Ku(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cr===null||!cr.has(n))){t=Sn(r,t),t=Nf(e,t,1),e=lr(e,t,1),t=Me(),e!==null&&(Ls(e,1,t),Ve(e,t));break}}e=e.return}}function L0(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Me(),t.pingedLanes|=t.suspendedLanes&r,Ne===t&&(Ce&r)===r&&(_e===4||_e===3&&(Ce&130023424)===Ce&&500>ge()-hc?Tr(t,0):dc|=r),Ve(t,e)}function Kf(t,e){e===0&&(t.mode&1?(e=Ys,Ys<<=1,!(Ys&130023424)&&(Ys=4194304)):e=1);var r=Me();t=Ut(t,e),t!==null&&(Ls(t,e,r),Ve(t,r))}function M0(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Kf(t,r)}function U0(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(e),Kf(t,r)}var qf;qf=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||We.current)Fe=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Fe=!1,j0(t,e,r);Fe=!!(t.flags&131072)}else Fe=!1,ce&&e.flags&1048576&&Yh(e,Fi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Si(t,e),t=e.pendingProps;var s=xn(e,Ae.current);gn(e,r),s=ic(null,e,n,t,s,r);var i=oc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,He(n)?(i=!0,zi(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ec(e),s.updater=fo,e.stateNode=s,s._reactInternals=e,Ka(e,n,t,r),e=Ja(null,e,n,!0,i,r)):(e.tag=0,ce&&i&&ql(e),Le(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Si(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=z0(n),t=dt(n,t),s){case 0:e=Ga(null,e,n,t,r);break e;case 1:e=Lu(null,e,n,t,r);break e;case 11:e=Au(null,e,n,t,r);break e;case 14:e=$u(null,e,n,dt(n.type,t),r);break e}throw Error(T(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:dt(n,s),Ga(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:dt(n,s),Lu(t,e,n,s,r);case 3:e:{if(Tf(e),t===null)throw Error(T(387));n=e.pendingProps,i=e.memoizedState,s=i.element,rf(t,e),Vi(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Sn(Error(T(423)),e),e=Mu(t,e,n,r,s);break e}else if(n!==s){s=Sn(Error(T(424)),e),e=Mu(t,e,n,r,s);break e}else for(Ge=ar(e.stateNode.containerInfo.firstChild),Je=e,ce=!0,pt=null,r=ef(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(wn(),n===s){e=Dt(t,e,r);break e}Le(t,e,n,r)}e=e.child}return e;case 5:return nf(e),t===null&&Wa(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ua(n,s)?o=null:i!==null&&Ua(n,i)&&(e.flags|=32),Pf(t,e),Le(t,e,o,r),e.child;case 6:return t===null&&Wa(e),null;case 13:return Of(t,e,r);case 4:return tc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=bn(e,null,n,r):Le(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:dt(n,s),Au(t,e,n,s,r);case 7:return Le(t,e,e.pendingProps,r),e.child;case 8:return Le(t,e,e.pendingProps.children,r),e.child;case 12:return Le(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ie(Wi,n._currentValue),n._currentValue=o,i!==null)if(yt(i.value,o)){if(i.children===s.children&&!We.current){e=Dt(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=$t(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ha(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ha(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Le(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,gn(e,r),s=ot(s),n=n(s),e.flags|=1,Le(t,e,n,r),e.child;case 14:return n=e.type,s=dt(n,e.pendingProps),s=dt(n.type,s),$u(t,e,n,s,r);case 15:return Ef(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:dt(n,s),Si(t,e),e.tag=1,He(n)?(t=!0,zi(e)):t=!1,gn(e,r),_f(e,n,s),Ka(e,n,s,r),Ja(null,e,n,!0,t,r);case 19:return Rf(t,e,r);case 22:return Cf(t,e,r)}throw Error(T(156,e.tag))};function Gf(t,e){return wh(t,e)}function D0(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,r,n){return new D0(t,e,r,n)}function gc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function z0(t){if(typeof t=="function")return gc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$l)return 11;if(t===Ll)return 14}return 2}function dr(t,e){var r=t.alternate;return r===null?(r=nt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ni(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")gc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case en:return Or(r.children,s,i,e);case Al:o=8,s|=8;break;case ga:return t=nt(12,r,e,s|2),t.elementType=ga,t.lanes=i,t;case ya:return t=nt(13,r,e,s),t.elementType=ya,t.lanes=i,t;case va:return t=nt(19,r,e,s),t.elementType=va,t.lanes=i,t;case nh:return go(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case th:o=10;break e;case rh:o=9;break e;case $l:o=11;break e;case Ll:o=14;break e;case Jt:o=16,n=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=nt(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Or(t,e,r,n){return t=nt(7,t,n,e),t.lanes=r,t}function go(t,e,r,n){return t=nt(22,t,n,e),t.elementType=nh,t.lanes=r,t.stateNode={isHidden:!1},t}function na(t,e,r){return t=nt(6,t,null,e),t.lanes=r,t}function sa(t,e,r){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function B0(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uo(0),this.expirationTimes=Uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yc(t,e,r,n,s,i,o,l,c){return t=new B0(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ec(i),t}function F0(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Jf(t){if(!t)return pr;t=t._reactInternals;e:{if(Ur(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(He(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var r=t.type;if(He(r))return Gh(t,r,e)}return e}function Yf(t,e,r,n,s,i,o,l,c){return t=yc(r,n,!0,t,s,i,o,l,c),t.context=Jf(null),r=t.current,n=Me(),s=ur(r),i=$t(n,s),i.callback=e??null,lr(r,i,s),t.current.lanes=s,Ls(t,s,n),Ve(t,n),t}function yo(t,e,r,n){var s=e.current,i=Me(),o=ur(s);return r=Jf(r),e.context===null?e.context=r:e.pendingContext=r,e=$t(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=lr(s,e,o),t!==null&&(gt(t,s,o,i),wi(t,s,o)),o}function Zi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function vc(t,e){qu(t,e),(t=t.alternate)&&qu(t,e)}function W0(){return null}var Qf=typeof reportError=="function"?reportError:function(t){console.error(t)};function xc(t){this._internalRoot=t}vo.prototype.render=xc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));yo(t,e,null,null)};vo.prototype.unmount=xc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){yo(null,t,null,null)}),e[Mt]=null}};function vo(t){this._internalRoot=t}vo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Eh();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Qt.length&&e!==0&&e<Qt[r].priority;r++);Qt.splice(r,0,t),r===0&&Ph(t)}};function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gu(){}function H0(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=Zi(o);i.call(d)}}var o=Yf(e,n,t,0,null,!1,!1,"",Gu);return t._reactRootContainer=o,t[Mt]=o.current,Ss(t.nodeType===8?t.parentNode:t),Lr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=Zi(c);l.call(d)}}var c=yc(t,0,!1,null,null,!1,!1,"",Gu);return t._reactRootContainer=c,t[Mt]=c.current,Ss(t.nodeType===8?t.parentNode:t),Lr(function(){yo(e,c,r,n)}),c}function wo(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Zi(o);l.call(c)}}yo(e,o,t,s)}else o=H0(r,e,t,s,n);return Zi(o)}jh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Yn(e.pendingLanes);r!==0&&(Dl(e,r|1),Ve(e,ge()),!(Z&6)&&(_n=ge()+500,yr()))}break;case 13:Lr(function(){var n=Ut(t,1);if(n!==null){var s=Me();gt(n,t,1,s)}}),vc(t,1)}};zl=function(t){if(t.tag===13){var e=Ut(t,134217728);if(e!==null){var r=Me();gt(e,t,134217728,r)}vc(t,134217728)}};Nh=function(t){if(t.tag===13){var e=ur(t),r=Ut(t,e);if(r!==null){var n=Me();gt(r,t,e,n)}vc(t,e)}};Eh=function(){return te};Ch=function(t,e){var r=te;try{return te=t,e()}finally{te=r}};Ca=function(t,e,r){switch(e){case"input":if(ba(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=co(n);if(!s)throw Error(T(90));ih(n),ba(n,s)}}}break;case"textarea":ah(t,r);break;case"select":e=r.value,e!=null&&hn(t,!!r.multiple,e,!1)}};ph=fc;mh=Lr;var V0={usingClientEntryPoint:!1,Events:[Us,sn,co,hh,fh,fc]},Fn={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K0={bundleType:Fn.bundleType,version:Fn.version,rendererPackageName:Fn.rendererPackageName,rendererConfig:Fn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vh(t),t===null?null:t.stateNode},findFiberByHostInstance:Fn.findFiberByHostInstance||W0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ai=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ai.isDisabled&&ai.supportsFiber)try{io=ai.inject(K0),jt=ai}catch{}}Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V0;Qe.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wc(e))throw Error(T(200));return F0(t,e,null,r)};Qe.createRoot=function(t,e){if(!wc(t))throw Error(T(299));var r=!1,n="",s=Qf;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yc(t,1,!1,null,null,r,!1,n,s),t[Mt]=e.current,Ss(t.nodeType===8?t.parentNode:t),new xc(e)};Qe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=vh(e),t=t===null?null:t.stateNode,t};Qe.flushSync=function(t){return Lr(t)};Qe.hydrate=function(t,e,r){if(!xo(e))throw Error(T(200));return wo(null,t,e,!0,r)};Qe.hydrateRoot=function(t,e,r){if(!wc(t))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Qf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Yf(e,null,t,1,r??null,s,!1,i,o),t[Mt]=e.current,Ss(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new vo(e)};Qe.render=function(t,e,r){if(!xo(e))throw Error(T(200));return wo(null,t,e,!1,r)};Qe.unmountComponentAtNode=function(t){if(!xo(t))throw Error(T(40));return t._reactRootContainer?(Lr(function(){wo(null,null,t,!1,function(){t._reactRootContainer=null,t[Mt]=null})}),!0):!1};Qe.unstable_batchedUpdates=fc;Qe.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!xo(r))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return wo(t,e,r,!1,n)};Qe.version="18.3.1-next-f1338f8080-20240426";function Xf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xf)}catch(t){console.error(t)}}Xf(),Qd.exports=Qe;var q0=Qd.exports,Ju=q0;pa.createRoot=Ju.createRoot,pa.hydrateRoot=Ju.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rs(){return Rs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rs.apply(this,arguments)}var nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(nr||(nr={}));const Yu="popstate";function G0(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:l}=n.location;return al("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:eo(s)}return Y0(e,r,null,t)}function we(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J0(){return Math.random().toString(36).substr(2,8)}function Qu(t,e){return{usr:t.state,key:t.key,idx:e}}function al(t,e,r,n){return r===void 0&&(r=null),Rs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?On(e):e,{state:r,key:e&&e.key||n||J0()})}function eo(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function On(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Y0(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=nr.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Rs({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=nr.Pop;let w=u(),p=w==null?null:w-d;d=w,c&&c({action:l,location:b.location,delta:p})}function f(w,p){l=nr.Push;let g=al(b.location,w,p);r&&r(g,w),d=u()+1;let m=Qu(g,d),x=b.createHref(g);try{o.pushState(m,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(x)}i&&c&&c({action:l,location:b.location,delta:1})}function v(w,p){l=nr.Replace;let g=al(b.location,w,p);r&&r(g,w),d=u();let m=Qu(g,d),x=b.createHref(g);o.replaceState(m,"",x),i&&c&&c({action:l,location:b.location,delta:0})}function y(w){let p=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof w=="string"?w:eo(w);return g=g.replace(/ $/,"%20"),we(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let b={get action(){return l},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Yu,h),c=w,()=>{s.removeEventListener(Yu,h),c=null}},createHref(w){return e(s,w)},createURL:y,encodeLocation(w){let p=y(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:v,go(w){return o.go(w)}};return b}var Xu;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xu||(Xu={}));function Q0(t,e,r){return r===void 0&&(r="/"),X0(t,e,r,!1)}function X0(t,e,r,n){let s=typeof e=="string"?On(e):e,i=bc(s.pathname||"/",r);if(i==null)return null;let o=ep(t);Z0(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=uy(i);l=ly(o[c],d,n)}return l}function ep(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(we(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=hr([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(we(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ep(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:oy(d,i.index),routesMeta:u})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of tp(i.path))s(i,o,c)}),e}function tp(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=tp(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Z0(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ay(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ey=/^:[\w-]+$/,ty=3,ry=2,ny=1,sy=10,iy=-2,Zu=t=>t==="*";function oy(t,e){let r=t.split("/"),n=r.length;return r.some(Zu)&&(n+=iy),e&&(n+=ry),r.filter(s=>!Zu(s)).reduce((s,i)=>s+(ey.test(i)?ty:i===""?ny:sy),n)}function ay(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function ly(t,e,r){r===void 0&&(r=!1);let{routesMeta:n}=t,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=ed({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&r&&!n[n.length-1].route.index&&(h=ed({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:hr([i,h.pathname]),pathnameBase:py(hr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=hr([i,h.pathnameBase]))}return o}function ed(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=cy(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:f,isOptional:v}=u;if(f==="*"){let b=l[h]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const y=l[h];return v&&!y?d[f]=void 0:d[f]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function cy(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Zf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function uy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function dy(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?On(t):t;return{pathname:r?r.startsWith("/")?r:hy(r,e):e,search:my(n),hash:gy(s)}}function hy(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function ia(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fy(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function rp(t,e){let r=fy(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function np(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=On(t):(s=Rs({},t),we(!s.pathname||!s.pathname.includes("?"),ia("?","pathname","search",s)),we(!s.pathname||!s.pathname.includes("#"),ia("#","pathname","hash",s)),we(!s.search||!s.search.includes("#"),ia("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=dy(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const hr=t=>t.join("/").replace(/\/\/+/g,"/"),py=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),my=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sp=["post","put","patch","delete"];new Set(sp);const vy=["get",...sp];new Set(vy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Is(){return Is=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Is.apply(this,arguments)}const kc=_.createContext(null),xy=_.createContext(null),Dr=_.createContext(null),bo=_.createContext(null),vr=_.createContext({outlet:null,matches:[],isDataRoute:!1}),ip=_.createContext(null);function wy(t,e){let{relative:r}=e===void 0?{}:e;zs()||we(!1);let{basename:n,navigator:s}=_.useContext(Dr),{hash:i,pathname:o,search:l}=lp(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:hr([n,o])),s.createHref({pathname:c,search:l,hash:i})}function zs(){return _.useContext(bo)!=null}function Bs(){return zs()||we(!1),_.useContext(bo).location}function op(t){_.useContext(Dr).static||_.useLayoutEffect(t)}function ap(){let{isDataRoute:t}=_.useContext(vr);return t?$y():by()}function by(){zs()||we(!1);let t=_.useContext(kc),{basename:e,future:r,navigator:n}=_.useContext(Dr),{matches:s}=_.useContext(vr),{pathname:i}=Bs(),o=JSON.stringify(rp(s,r.v7_relativeSplatPath)),l=_.useRef(!1);return op(()=>{l.current=!0}),_.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=np(d,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:hr([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,o,i,t])}const ky=_.createContext(null);function Sy(t){let e=_.useContext(vr).outlet;return e&&_.createElement(ky.Provider,{value:t},e)}function lp(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=_.useContext(Dr),{matches:s}=_.useContext(vr),{pathname:i}=Bs(),o=JSON.stringify(rp(s,n.v7_relativeSplatPath));return _.useMemo(()=>np(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function _y(t,e){return jy(t,e)}function jy(t,e,r,n){zs()||we(!1);let{navigator:s}=_.useContext(Dr),{matches:i}=_.useContext(vr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Bs(),u;if(e){var h;let w=typeof e=="string"?On(e):e;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||we(!1),u=w}else u=d;let f=u.pathname||"/",v=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=Q0(t,{pathname:v}),b=Ty(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:hr([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:hr([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return e&&b?_.createElement(bo.Provider,{value:{location:Is({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:nr.Pop}},b):b}function Ny(){let t=Ay(),e=yy(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),r?_.createElement("pre",{style:s},r):null,i)}const Ey=_.createElement(Ny,null);class Cy extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?_.createElement(vr.Provider,{value:this.props.routeContext},_.createElement(ip.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Py(t){let{routeContext:e,match:r,children:n}=t,s=_.useContext(kc);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(vr.Provider,{value:e},n)}function Ty(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||we(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:v}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||y){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let v,y=!1,b=null,w=null;r&&(v=l&&h.route.id?l[h.route.id]:void 0,b=h.route.errorElement||Ey,c&&(d<0&&f===0?(Ly("route-fallback",!1),y=!0,w=null):d===f&&(y=!0,w=h.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,f+1)),g=()=>{let m;return v?m=b:y?m=w:h.route.Component?m=_.createElement(h.route.Component,null):h.route.element?m=h.route.element:m=u,_.createElement(Py,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:m})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(Cy,{location:r.location,revalidation:r.revalidation,component:b,error:v,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var cp=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cp||{}),to=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(to||{});function Oy(t){let e=_.useContext(kc);return e||we(!1),e}function Ry(t){let e=_.useContext(xy);return e||we(!1),e}function Iy(t){let e=_.useContext(vr);return e||we(!1),e}function up(t){let e=Iy(),r=e.matches[e.matches.length-1];return r.route.id||we(!1),r.route.id}function Ay(){var t;let e=_.useContext(ip),r=Ry(to.UseRouteError),n=up(to.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function $y(){let{router:t}=Oy(cp.UseNavigateStable),e=up(to.UseNavigateStable),r=_.useRef(!1);return op(()=>{r.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Is({fromRouteId:e},i)))},[t,e])}const td={};function Ly(t,e,r){!e&&!td[t]&&(td[t]=!0)}function My(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Uy(t){return Sy(t.context)}function Yr(t){we(!1)}function Dy(t){let{basename:e="/",children:r=null,location:n,navigationType:s=nr.Pop,navigator:i,static:o=!1,future:l}=t;zs()&&we(!1);let c=e.replace(/^\/*/,"/"),d=_.useMemo(()=>({basename:c,navigator:i,static:o,future:Is({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=On(n));let{pathname:u="/",search:h="",hash:f="",state:v=null,key:y="default"}=n,b=_.useMemo(()=>{let w=bc(u,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:v,key:y},navigationType:s}},[c,u,h,f,v,y,s]);return b==null?null:_.createElement(Dr.Provider,{value:d},_.createElement(bo.Provider,{children:r,value:b}))}function zy(t){let{children:e,location:r}=t;return _y(ll(e),r)}new Promise(()=>{});function ll(t,e){e===void 0&&(e=[]);let r=[];return _.Children.forEach(t,(n,s)=>{if(!_.isValidElement(n))return;let i=[...e,s];if(n.type===_.Fragment){r.push.apply(r,ll(n.props.children,i));return}n.type!==Yr&&we(!1),!n.props.index||!n.props.children||we(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ll(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cl.apply(this,arguments)}function By(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Fy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Wy(t,e){return t.button===0&&(!e||e==="_self")&&!Fy(t)}const Hy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Vy="6";try{window.__reactRouterVersion=Vy}catch{}const Ky="startTransition",rd=Lm[Ky];function qy(t){let{basename:e,children:r,future:n,window:s}=t,i=_.useRef();i.current==null&&(i.current=G0({window:s,v5Compat:!0}));let o=i.current,[l,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=_.useCallback(h=>{d&&rd?rd(()=>c(h)):c(h)},[c,d]);return _.useLayoutEffect(()=>o.listen(u),[o,u]),_.useEffect(()=>My(n),[n]),_.createElement(Dy,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const Gy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xn=_.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=By(e,Hy),{basename:v}=_.useContext(Dr),y,b=!1;if(typeof d=="string"&&Jy.test(d)&&(y=d,Gy))try{let m=new URL(window.location.href),x=d.startsWith("//")?new URL(m.protocol+d):new URL(d),E=bc(x.pathname,v);x.origin===m.origin&&E!=null?d=E+x.search+x.hash:b=!0}catch{}let w=wy(d,{relative:s}),p=Yy(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function g(m){n&&n(m),m.defaultPrevented||p(m)}return _.createElement("a",cl({},f,{href:y||w,onClick:b||i?n:g,ref:r,target:c}))});var nd;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(nd||(nd={}));var sd;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sd||(sd={}));function Yy(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=ap(),d=Bs(),u=lp(t,{relative:o});return _.useCallback(h=>{if(Wy(h,r)){h.preventDefault();let f=n!==void 0?n:eo(d)===eo(u);c(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,s,r,t,i,o,l])}const Qy="modulepreload",Xy=function(t){return"/"+t},id={},zr=function(e,r,n){if(!r||r.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=Xy(i),i in id)return;id[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Qy,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Zy=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>zr(()=>Promise.resolve().then(()=>Rn),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Sc extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class ev extends Sc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class od extends Sc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ad extends Sc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ul;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ul||(ul={}));var tv=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class rv{constructor(e,{headers:r={},customFetch:n,region:s=ul.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Zy(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return tv(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(b=>{throw new ev(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new od(h);if(!h.ok)throw new ad(h);let v=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return v==="application/json"?y=yield h.json():v==="application/octet-stream"?y=yield h.blob():v==="text/event-stream"?y=h:v==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof ad||s instanceof od?s.context:void 0}}})}}var Be={},_c={},ko={},Fs={},So={},_o={},nv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jn=nv();const sv=jn.fetch,dp=jn.fetch.bind(jn),hp=jn.Headers,iv=jn.Request,ov=jn.Response,Rn=Object.freeze(Object.defineProperty({__proto__:null,Headers:hp,Request:iv,Response:ov,default:dp,fetch:sv},Symbol.toStringTag,{value:"Module"})),av=wm(Rn);var jo={};Object.defineProperty(jo,"__esModule",{value:!0});let lv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};jo.default=lv;var fp=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_o,"__esModule",{value:!0});const cv=fp(av),uv=fp(jo);let dv=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=cv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,h=null,f=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,v="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await i.text();try{d=JSON.parse(b),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,v="OK")}catch{i.status===404&&b===""?(f=204,v="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,v="OK"),d&&this.shouldThrowOnError)throw new uv.default(d)}return{error:d,data:u,count:h,status:f,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};_o.default=dv;var hv=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(So,"__esModule",{value:!0});const fv=hv(_o);let pv=class extends fv.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};So.default=pv;var mv=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fs,"__esModule",{value:!0});const gv=mv(So);let yv=class extends gv.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Fs.default=yv;var vv=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ko,"__esModule",{value:!0});const Wn=vv(Fs);let xv=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Wn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Wn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Wn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Wn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Wn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ko.default=xv;var No={},Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.version=void 0;Eo.version="0.0.0-automated";Object.defineProperty(No,"__esModule",{value:!0});No.DEFAULT_HEADERS=void 0;const wv=Eo;No.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${wv.version}`};var pp=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_c,"__esModule",{value:!0});const bv=pp(ko),kv=pp(Fs),Sv=No;let _v=class mp{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Sv.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new bv.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new mp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new kv.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};_c.default=_v;var In=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Be,"__esModule",{value:!0});Be.PostgrestError=Be.PostgrestBuilder=Be.PostgrestTransformBuilder=Be.PostgrestFilterBuilder=Be.PostgrestQueryBuilder=Be.PostgrestClient=void 0;const gp=In(_c);Be.PostgrestClient=gp.default;const yp=In(ko);Be.PostgrestQueryBuilder=yp.default;const vp=In(Fs);Be.PostgrestFilterBuilder=vp.default;const xp=In(So);Be.PostgrestTransformBuilder=xp.default;const wp=In(_o);Be.PostgrestBuilder=wp.default;const bp=In(jo);Be.PostgrestError=bp.default;var jv=Be.default={PostgrestClient:gp.default,PostgrestQueryBuilder:yp.default,PostgrestFilterBuilder:vp.default,PostgrestTransformBuilder:xp.default,PostgrestBuilder:wp.default,PostgrestError:bp.default};const{PostgrestClient:Nv,PostgrestQueryBuilder:Fb,PostgrestFilterBuilder:Wb,PostgrestTransformBuilder:Hb,PostgrestBuilder:Vb,PostgrestError:Kb}=jv;class Ev{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Cv="2.15.1",Pv=`realtime-js/${Cv}`,Tv="1.0.0",dl=1e4,Ov=1e3,Rv=100;var ds;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ds||(ds={}));var be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(be||(be={}));var ft;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ft||(ft={}));var hl;(function(t){t.websocket="websocket"})(hl||(hl={}));var jr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(jr||(jr={}));class Iv{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class kp{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var se;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(se||(se={}));const ld=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=Av(o,t,e,s),i),{})},Av=(t,e,r,n)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?Sp(i,o):fl(o)},Sp=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Uv(e,r)}switch(t){case se.bool:return $v(e);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return Lv(e);case se.json:case se.jsonb:return Mv(e);case se.timestamp:return Dv(e);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return fl(e);default:return fl(e)}},fl=t=>t,$v=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Lv=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Mv=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Uv=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Sp(e,l))}return t},Dv=t=>typeof t=="string"?t.replace(" ","T"):t,_p=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class oa{constructor(e,r,n={},s=dl){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var cd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(cd||(cd={}));class hs{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=hs.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=hs.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(w=>w.presence_ref),v=h.map(w=>w.presence_ref),y=u.filter(w=>v.indexOf(w.presence_ref)<0),b=h.filter(w=>f.indexOf(w.presence_ref)<0);y.length>0&&(l[d]=y),b.length>0&&(c[d]=b)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(v=>v.presence_ref),f=u.filter(v=>h.indexOf(v.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,s(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ud;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ud||(ud={}));var fs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fs||(fs={}));var Ot;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ot||(Ot={}));class jc{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new oa(this,ft.join,this.params,this.timeout),this.rejoinTimer=new kp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ft.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new hs(this),this.broadcastEndpointURL=_p(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==be.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[fs.PRESENCE]&&this.bindings[fs.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Ot.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Ot.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var v;if(this.socket.setAuth(),f===void 0){e==null||e(Ot.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,b=(v=y==null?void 0:y.length)!==null&&v!==void 0?v:0,w=[];for(let p=0;p<b;p++){const g=y[p],{filter:{event:m,schema:x,table:E,filter:j}}=g,C=f&&f[p];if(C&&C.event===m&&C.schema===x&&C.table===E&&C.filter===j)w.push(Object.assign(Object.assign({},g),{id:C.id}));else{this.unsubscribe(),this.state=be.errored,e==null||e(Ot.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Ot.SUBSCRIBED);return}}).receive("error",f=>{this.state=be.errored,e==null||e(Ot.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ot.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===be.joined&&e===fs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=be.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ft.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new oa(this,ft.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=be.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new oa(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Rv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=ft;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var y,b,w;return((y=v.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(b=v.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(v=>v.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var y,b,w,p,g,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const x=v.id,E=(y=v.filter)===null||y===void 0?void 0:y.event;return x&&((b=r.ids)===null||b===void 0?void 0:b.includes(x))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const x=(g=(p=v==null?void 0:v.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return x==="*"||x===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:b,table:w,commit_timestamp:p,type:g,errors:m}=y;f=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:p,eventType:g,new:{},old:{},errors:m}),this._getPayloadRecords(y))}v.callback(f,n)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&jc.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ft.close,{},e)}_onError(e){this._on(ft.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ld(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ld(e.columns,e.old_record)),r}}const dd=()=>{},li={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zv=[1e3,2e3,5e3,1e4],Bv=1e4,Fv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Wv{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dl,this.transport=null,this.heartbeatIntervalMs=li.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dd,this.ref=0,this.reconnectTimer=null,this.logger=dd,this.conn=null,this.sendBuffer=[],this.serializer=new Iv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>zr(()=>Promise.resolve().then(()=>Rn),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${hl.websocket}`,this.httpEndpoint=_p(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ev.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Tv}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ds.connecting:return jr.Connecting;case ds.open:return jr.Open;case ds.closing:return jr.Closing;default:return jr.Closed}}isConnected(){return this.connectionState()===jr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new jc(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ov,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},li.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ft.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Fv],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Pv};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ft.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new kp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},li.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,l,c,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:dl,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:li.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:u=>zv[u-1]||Bv,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(u,h)=>h(JSON.stringify(u)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Nc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ke(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Hv extends Nc{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class pl extends Nc{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Vv=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const jp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>zr(()=>Promise.resolve().then(()=>Rn),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Kv=()=>Vv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zr(()=>Promise.resolve().then(()=>Rn),void 0)).Response:Response}),ml=t=>{if(Array.isArray(t))return t.map(r=>ml(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=ml(n)}),e},qv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Br=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const aa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gv=(t,e,r)=>Br(void 0,void 0,void 0,function*(){const n=yield Kv();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new Hv(aa(s),i,o))}).catch(s=>{e(new pl(aa(s),s))}):e(new pl(aa(t),t))}),Jv=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(qv(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Ws(t,e,r,n,s,i){return Br(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,Jv(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Gv(c,l,n))})})}function ro(t,e,r,n){return Br(this,void 0,void 0,function*(){return Ws(t,"GET",e,r,n)})}function kt(t,e,r,n,s){return Br(this,void 0,void 0,function*(){return Ws(t,"POST",e,n,s,r)})}function gl(t,e,r,n,s){return Br(this,void 0,void 0,function*(){return Ws(t,"PUT",e,n,s,r)})}function Yv(t,e,r,n){return Br(this,void 0,void 0,function*(){return Ws(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Np(t,e,r,n,s){return Br(this,void 0,void 0,function*(){return Ws(t,"DELETE",e,n,s,r)})}var $e=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Qv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xv{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=jp(s)}uploadOrUpdate(e,r,n,s){return $e(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},hd),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield(e=="PUT"?gl:kt)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(ke(i))return{data:null,error:i};throw i}})}upload(e,r,n){return $e(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return $e(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:hd.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield gl(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(ke(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return $e(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield kt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Nc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}update(e,r,n){return $e(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return $e(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}copy(e,r,n){return $e(this,void 0,void 0,function*(){try{return{data:{path:(yield kt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return $e(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield kt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return $e(this,void 0,void 0,function*(){try{const s=yield kt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}download(e,r){return $e(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ro(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ke(l))return{data:null,error:l};throw l}})}info(e){return $e(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield ro(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ml(n),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}exists(e){return $e(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Yv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ke(n)&&n instanceof pl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return $e(this,void 0,void 0,function*(){try{return{data:yield Np(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}list(e,r,n){return $e(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Qv),r),{prefix:e||""});return{data:yield kt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}listV2(e,r){return $e(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield kt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Zv="2.11.0",ex={"X-Client-Info":`storage-js/${Zv}`};var Vr=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class tx{constructor(e,r={},n,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ex),r),this.fetch=jp(n)}listBuckets(){return Vr(this,void 0,void 0,function*(){try{return{data:yield ro(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ke(e))return{data:null,error:e};throw e}})}getBucket(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield ro(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Vr(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Vr(this,void 0,void 0,function*(){try{return{data:yield gl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield Np(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}}class rx extends tx{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new Xv(this.url,this.headers,e,this.fetch)}}const nx="2.55.0";let Zn="";typeof Deno<"u"?Zn="deno":typeof document<"u"?Zn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zn="react-native":Zn="node";const sx={"X-Client-Info":`supabase-js-${Zn}/${nx}`},ix={headers:sx},ox={schema:"public"},ax={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lx={};var cx=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const ux=t=>{let e;return t?e=t:typeof fetch>"u"?e=dp:e=fetch,(...r)=>e(...r)},dx=()=>typeof Headers>"u"?hp:Headers,hx=(t,e,r)=>{const n=ux(r),s=dx();return(i,o)=>cx(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new s(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var fx=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function px(t){return t.endsWith("/")?t:t+"/"}function mx(t,e){var r,n;const{db:s,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>fx(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Ep="2.71.1",Qr=30*1e3,yl=3,la=yl*Qr,gx="http://localhost:9999",yx="supabase.auth.token",vx={"X-Client-Info":`gotrue-js/${Ep}`},vl="X-Supabase-Api-Version",Cp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wx=10*60*1e3;class Ec extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class bx extends Ec{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function kx(t){return H(t)&&t.name==="AuthApiError"}class Pp extends Ec{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class xr extends Ec{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Gt extends xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sx(t){return H(t)&&t.name==="AuthSessionMissingError"}class ci extends xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ui extends xr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class di extends xr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _x(t){return H(t)&&t.name==="AuthImplicitGrantRedirectError"}class fd extends xr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xl extends xr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function ca(t){return H(t)&&t.name==="AuthRetryableFetchError"}class pd extends xr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class wl extends xr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const no="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),md=` 	
\r=`.split(""),jx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<md.length;e+=1)t[md[e].charCodeAt(0)]=-2;for(let e=0;e<no.length;e+=1)t[no[e].charCodeAt(0)]=e;return t})();function gd(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(no[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(no[n]),e.queuedBits-=6}}function Tp(t,e,r){const n=jx[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function yd(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Cx(o,n,r)};for(let o=0;o<t.length;o+=1)Tp(t.charCodeAt(o),s,i);return e.join("")}function Nx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ex(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Nx(n,e)}}function Cx(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Px(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Tp(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Tx(t){const e=[];return Ex(t,r=>e.push(r)),new Uint8Array(e)}function Ox(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>gd(s,r,n)),gd(null,r,n),e.join("")}function Rx(t){return Math.round(Date.now()/1e3)+t}function Ix(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ut=()=>typeof window<"u"&&typeof document<"u",wr={tested:!1,writable:!1},Op=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wr.tested)return wr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),wr.tested=!0,wr.writable=!0}catch{wr.tested=!0,wr.writable=!1}return wr.writable};function Ax(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Rp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>zr(()=>Promise.resolve().then(()=>Rn),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},$x=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Xr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},br=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Vt=async(t,e)=>{await t.removeItem(e)};class Co{constructor(){this.promise=new Co.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Co.promiseConstructor=Promise;function ua(t){const e=t.split(".");if(e.length!==3)throw new wl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!xx.test(e[n]))throw new wl("JWT not in base64url format");return{header:JSON.parse(yd(e[0])),payload:JSON.parse(yd(e[1])),signature:Px(e[2]),raw:{header:e[0],payload:e[1]}}}async function Lx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Mx(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Ux(t){return("0"+t.toString(16)).substr(-2)}function Dx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Ux).join("")}async function zx(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Bx(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await zx(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kr(t,e,r=!1){const n=Dx();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Xr(t,`${e}-code-verifier`,s);const i=await Bx(n);return[i,n===i?"plain":"s256"]}const Fx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wx(t){const e=t.headers.get(vl);if(!e||!e.match(Fx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Hx(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Vx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qr(t){if(!Kx.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function da(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vd(t){return JSON.parse(JSON.stringify(t))}var qx=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const _r=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gx=[502,503,504];async function xd(t){var e;if(!$x(t))throw new xl(_r(t),0);if(Gx.includes(t.status))throw new xl(_r(t),t.status);let r;try{r=await t.json()}catch(i){throw new Pp(_r(i),i)}let n;const s=Wx(t);if(s&&s.getTime()>=Cp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new pd(_r(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Gt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new pd(_r(r),t.status,r.weak_password.reasons);throw new bx(_r(r),t.status||500,n)}const Jx=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function q(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[vl]||(i[vl]=Cp["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Yx(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Yx(t,e,r,n,s,i){const o=Jx(e,n,s,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new xl(_r(c),0)}if(l.ok||await xd(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await xd(c)}}function Pt(t){var e;let r=null;ew(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Rx(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function wd(t){const e=Pt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Zt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Qx(t){return{data:t,error:null}}function Xx(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=qx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Zx(t){return t}function ew(t){return t.access_token&&t.refresh_token&&t.expires_in}const ha=["global","local","others"];var tw=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class rw{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Rp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=ha[0]){if(ha.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ha.join(", ")}`);try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Zt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=tw(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Xx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(H(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zt})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Zx});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);d[`${w}Page`]=b}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(H(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){qr(e);try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zt})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){qr(e);try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Zt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){qr(e);try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Zt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){qr(e.userId);try{const{data:r,error:n}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _deleteFactor(e){qr(e.userId),qr(e.id);try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}}function bd(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function nw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gr={debug:!!(globalThis&&Op()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ip extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sw extends Ip{}async function iw(t,e,r){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new sw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Gr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}nw();const ow={url:gx,storageKey:yx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function kd(t,e,r){return await r()}const Jr={};class As{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=As.nextInstanceID,As.nextInstanceID+=1,this.instanceID>0&&ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},ow),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new rw({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Rp(s.fetch),this.lock=s.lock||kd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ut()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=iw:this.lock=kd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Op()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=bd(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Jr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Jr[this.storageKey]=Object.assign(Object.assign({},Jr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Jr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Jr[this.storageKey]=Object.assign(Object.assign({},Jr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ep}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Ax(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ut()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),_x(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return H(r)?{error:r}:{error:new Pp("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Pt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Kr(this.storage,this.storageKey)),i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:y},xform:Pt})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Pt})}else throw new ui("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:wd})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:wd})}else throw new ui("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ci}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,i,o,l,c,d,u,h,f,v;let y,b;if("message"in e)y=e.message,b=e.signature;else{const{chain:w,wallet:p,statement:g,options:m}=e;let x;if(ut())if(typeof p=="object")x=p;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))x=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=p}const E=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const j=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let C;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")C=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)C=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),b=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${E.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((d=m==null?void 0:m.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(u=m==null?void 0:m.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const j=await x.signMessage(new TextEncoder().encode(y),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=j}}try{const{data:w,error:p}=await q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Ox(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Pt});if(p)throw p;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new ci}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:p})}catch(w){if(H(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const r=await br(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Pt});if(await Vt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ci}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(H(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,l=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Pt}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ci}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Kr(this.storage,this.storageKey));const{error:h}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new ui("You must provide either an email or phone number.")}catch(l){if(H(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Pt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Kr(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Qx})}catch(i){if(H(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Gt;const{error:s}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(H(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await q(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:l}=await q(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ui("You must provide either an email or phone number and a type")}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await br(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<la:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await br(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=da()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gt}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Zt})})}catch(r){if(H(r))return Sx(r)&&(await this._removeSession(),await Vt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Gt;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Kr(this.storage,this.storageKey));const{data:d,error:u}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Zt});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=ua(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(H(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Gt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!ut())throw new di("No browser detected.");if(e.error||e.error_description||e.error_code)throw new di(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new fd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new di("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fd("No code detected.");const{data:g,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new di("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const v=f-u;v*1e3<=Qr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const y=f-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:b,error:w}=await this._getUser(i);if(w)throw w;const p={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(n){if(H(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await br(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(kx(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Vt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Ix(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Kr(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(H(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",v,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ut()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(H(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Mx(async s=>(s>0&&await Lx(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ca(i)&&Date.now()+o-n<Qr})}catch(n){if(this._debug(r,"error",n),H(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ut()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await br(this.storage,this.storageKey);if(s&&this.userStorage){let o=await br(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Xr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:da()}else if(s&&!s.user&&!s.user){const o=await br(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Vt(this.storage,this.storageKey+"-user"),await Xr(this.storage,this.storageKey,s)):s.user=da()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<la;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${la}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ca(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Gt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Co;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Gt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),H(i)){const o={session:null,error:i};return ca(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Xr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=vd(s);await Xr(this.storage,this.storageKey,i)}else{const s=vd(r);await Xr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Vt(this.storage,this.storageKey),await Vt(this.storage,this.storageKey+"-code-verifier"),await Vt(this.storage,this.storageKey+"-user"),this.userStorage&&await Vt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Qr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Qr}ms, refresh threshold is ${yl} ticks`),s<=yl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ip)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Kr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await q(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ua(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+wx>s)return n;const{data:i,error:o}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:v,error:y}=await this.getSession();if(y||!v.session)return{data:null,error:y};n=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=ua(n);r!=null&&r.allowExpired||Hx(i.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const u=Vx(s.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Tx(`${l}.${c}`)))throw new wl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}}As.nextInstanceID=0;const aw=As;class lw extends aw{constructor(e){super(e)}}var cw=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class uw{constructor(e,r,n){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=px(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:ox,realtime:lx,auth:Object.assign(Object.assign({},ax),{storageKey:d}),global:ix},h=mx(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=hx(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Nv(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new rx(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new rv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return cw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Wv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dw=(t,e,r)=>new uw(t,e,r);function hw(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}hw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fw="https://qxhzwlesqfoeulhjmcte.supabase.co",pw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF4aHp3bGVzcWZvZXVsaGptY3RlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDI3MjcsImV4cCI6MjA3MDg3ODcyN30.1dc8CDzCcQhPu-hmKrFi3KSTGZ-Pq0pgyQ16CQ9AQsc",he=dw(fw,pw),Kt={PRODUCTS:"products",JOBS:"jobs",USERS:"users"},Ap=_.createContext(void 0),Bt=()=>{const t=_.useContext(Ap);if(!t)throw new Error("useApp must be used within an AppProvider");return t},mw=({children:t})=>{const[e,r]=_.useState([]),[n,s]=_.useState([]),[i,o]=_.useState(!1);_.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:g,error:m}=await he.from(Kt.PRODUCTS).select("*").order("createdAt",{ascending:!1});if(m)throw m;r(g||[]);const{data:x,error:E}=await he.from(Kt.JOBS).select("*").order("createdAt",{ascending:!1});if(E)throw E;s(x||[])}catch(g){console.error("Error loading data:",g)}},p={products:e,jobs:n,isAdmin:i,addProduct:async g=>{try{const{error:m}=await he.from(Kt.PRODUCTS).insert([g]);if(m)throw m;await l()}catch(m){throw console.error("Error adding product:",m),m}},updateProduct:async g=>{try{const{error:m}=await he.from(Kt.PRODUCTS).update(g).eq("id",g.id);if(m)throw m;await l()}catch(m){throw console.error("Error updating product:",m),m}},deleteProduct:async g=>{try{const{error:m}=await he.from(Kt.PRODUCTS).delete().eq("id",g);if(m)throw m;await l()}catch(m){throw console.error("Error deleting product:",m),m}},addJob:async g=>{try{const{error:m}=await he.from(Kt.JOBS).insert([g]);if(m)throw m;await l()}catch(m){throw console.error("Error adding job:",m),m}},updateJob:async g=>{try{const{error:m}=await he.from(Kt.JOBS).update(g).eq("id",g.id);if(m)throw m;await l()}catch(m){throw console.error("Error updating job:",m),m}},deleteJob:async g=>{try{const{error:m}=await he.from(Kt.JOBS).delete().eq("id",g);if(m)throw m;await l()}catch(m){throw console.error("Error deleting job:",m),m}},setIsAdmin:o,refreshData:l,loginAdmin:()=>{o(!0)},logoutAdmin:()=>{o(!1)},setSelectedProduct:g=>{}};return a.jsx(Ap.Provider,{value:p,children:t})};var gw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vw=(t,e)=>{const r=_.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>_.createElement("svg",{ref:d,...gw,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${yw(t)}`,...c},[...e.map(([u,h])=>_.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${t}`,r};var X=vw;const Sd=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),xw=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),_d=X("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Cc=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),fa=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ww=X("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Ei=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),bw=X("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),_t=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),kw=X("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),$p=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ci=X("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Sw=X("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),_w=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),jw=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Nw=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Pc=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Nn=X("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Ew=X("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Cw=X("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Tc=X("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Lp=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Pw=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Tw=X("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Ow=X("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),bl=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Mp=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Up=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Rw=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Iw=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ps=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Aw=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),$w=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Lw=X("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Mw=()=>{const{isAdmin:t,logoutAdmin:e}=Bt(),r=Bs(),n=()=>{e()};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(Xn,{to:"/",className:"flex items-center space-x-2",children:[a.jsx($w,{className:"h-8 w-8 text-blue-600"}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Laser Engraving"})]})}),a.jsxs("nav",{className:"hidden md:flex space-x-8",children:[a.jsx(Xn,{to:"/",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${r.pathname==="/"?"text-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:"Home"}),t&&a.jsx(Xn,{to:"/admin/panel",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${r.pathname==="/admin/panel"?"text-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:"Admin Panel"})]}),a.jsx("div",{className:"flex items-center space-x-4",children:t?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Admin"}),a.jsxs("button",{onClick:n,className:"flex items-center space-x-1 px-3 py-2 text-sm text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[a.jsx(Nw,{className:"h-4 w-4"}),a.jsx("span",{children:"Logout"})]})]}):a.jsxs(Xn,{to:"/admin/login",className:"flex items-center space-x-1 px-3 py-2 text-sm text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[a.jsx(Mp,{className:"h-4 w-4"}),a.jsx("span",{children:"Admin"})]})})]})})}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx(Uy,{})}),a.jsx("footer",{className:"bg-white border-t border-gray-200 mt-auto",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsx("div",{className:"text-center text-sm text-gray-500",children:a.jsx("p",{children:" 2024 Laser Engraving Mockup Generator. All rights reserved."})})})})]})},Uw=({onProductSelected:t})=>{const{products:e,setSelectedProduct:r}=Bt(),n=o=>{r(o),t(o)},s=[{id:"1",name:"Wooden Phone Stand",description:"Elegant wooden phone stand with laser engraving capabilities",price:29.99,images:["/product1.jpg"],surfaceTone:"light",mockupImage:"/mockup1.jpg",engravingBoundary:{x:20,y:20,width:60,height:60}},{id:"2",name:"Leather Keychain",description:"Premium leather keychain perfect for personalized designs",price:19.99,images:["/product2.jpg"],surfaceTone:"dark",mockupImage:"/mockup2.jpg",engravingBoundary:{x:10,y:10,width:80,height:80}},{id:"3",name:"Acrylic Coaster",description:"Clear acrylic coaster with engraving area",price:12.99,images:["/product3.jpg"],surfaceTone:"light",mockupImage:"/mockup3.jpg",engravingBoundary:{x:15,y:15,width:70,height:70}}],i=e.length>0?e:s;return a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(o=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden product-card cursor-pointer",onClick:()=>n(o),children:[a.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:a.jsx("img",{src:o.images[0]||"/placeholder.svg",alt:o.name,className:"w-full h-full object-cover",onError:l=>{const c=l.target;c.src="/placeholder.svg"}})}),a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:o.name}),a.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:o.description}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(bw,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:["$",o.price.toFixed(2)]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Ew,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{className:"capitalize",children:[o.surfaceTone," Surface"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${o.surfaceTone==="light"?"bg-yellow-100 text-yellow-800":"bg-gray-800 text-white"}`,children:o.surfaceTone==="light"?"Light Surface":"Dark Surface"}),a.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Select"})]})]})]},o.id))}),i.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Products Available"}),a.jsx("p",{className:"text-gray-500",children:"Please contact an administrator to add products."})]})]})};class Dw{constructor(){Ro(this,"canvas");Ro(this,"ctx");this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}async processImage(e,r){return new Promise((n,s)=>{const i=new Image;i.onload=()=>{try{const o=this.processImageData(i,r);n(o)}catch(o){s(o)}},i.onerror=s,i.src=URL.createObjectURL(e)})}processImageData(e,r){this.canvas.width=e.width,this.canvas.height=e.height,this.ctx.drawImage(e,0,0);const n=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),s=n.data;for(let o=0;o<s.length;o+=4){const l=s[o],c=s[o+1],d=s[o+2],h=Math.round(.299*l+.587*c+.114*d)>128?255:0;s[o]=h,s[o+1]=h,s[o+2]=h}if(r==="dark")for(let o=0;o<s.length;o+=4)s[o]=255-s[o],s[o+1]=255-s[o+1],s[o+2]=255-s[o+2];this.ctx.putImageData(n,0,0);const i=this.canvas.toDataURL("image/png");return{originalImage:e.src,processedImage:i,isInverted:r==="dark"}}async createMockup(e,r,n,s,i){return new Promise((o,l)=>{const c=new Image,d=new Image;let u=0;const h=()=>{if(u++,u===2)try{const f=this.compositeImages(c,d,n,s,i);o(f)}catch(f){l(f)}};c.onload=h,d.onload=h,c.onerror=l,d.onerror=l,c.src=e,d.src=r})}compositeImages(e,r,n,s,i){this.canvas.width=e.width,this.canvas.height=e.height,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(e,0,0),this.ctx.save();const o=n.x+r.width*s/2,l=n.y+r.height*s/2;return this.ctx.translate(o,l),this.ctx.rotate(i*Math.PI/180),this.ctx.scale(s,s),this.ctx.drawImage(r,-r.width/2,-r.height/2),this.ctx.restore(),this.canvas.toDataURL("image/png")}}const zw=new Dw,Bw=({onImageUploaded:t,surfaceTone:e,onProcessedImage:r})=>{const[n,s]=_.useState(!1),[i,o]=_.useState(null),[l,c]=_.useState(null),[d,u]=_.useState(!1),[h,f]=_.useState(null),v=_.useRef(null),y=_.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),b=_.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&w(x.dataTransfer.files[0])},[]),w=async x=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(x.type)){f("Please upload a valid image file (JPG, PNG, or WebP)");return}if(x.size>10*1024*1024){f("File size must be less than 10MB");return}f(null),u(!0);try{const j=new FileReader;j.onload=P=>{var A;const L=(A=P.target)==null?void 0:A.result;o(L),t(L)},j.readAsDataURL(x);const C=await zw.processImage(x,e);c(C.processedImage),r(C.processedImage)}catch(j){f("Failed to process image. Please try again."),console.error("Image processing error:",j)}finally{u(!1)}},p=x=>{x.target.files&&x.target.files[0]&&w(x.target.files[0])},g=()=>{var x;(x=v.current)==null||x.click()},m=()=>{o(null),c(null),f(null)};return a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Image"}),a.jsxs("div",{className:`image-upload-area rounded-lg p-8 text-center transition-all ${n?"dragover":""}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:b,onClick:g,children:[a.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:p,className:"hidden"}),i?a.jsxs("div",{className:"space-y-4",children:[a.jsx("img",{src:i,alt:"Uploaded",className:"max-w-full h-32 object-contain mx-auto rounded"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Click to change image"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx(Rw,{className:"h-12 w-12 text-gray-400 mx-auto"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Click to upload or drag and drop"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"JPG, PNG, or WebP up to 10MB"})]})]})]}),h&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:a.jsx("p",{className:"text-sm text-red-600",children:h})}),i&&a.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:[a.jsx(Tw,{className:"h-4 w-4"}),a.jsx("span",{children:"Reset"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Processing Results"}),d?a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Processing image..."}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Converting to black & white",e==="dark"?" and inverting":""]})]}):l?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Processed Image"}),a.jsx("img",{src:l,alt:"Processed",className:"w-full h-32 object-contain rounded"}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[a.jsxs("p",{children:["Surface: ",e==="dark"?"Dark (Inverted)":"Light"]}),a.jsx("p",{children:"Format: Black & White"})]})]}),a.jsxs("a",{href:l,download:"processed-image.png",className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:"Download Processed Image"})]})]}):a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[a.jsx(_w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Upload an image to see processing results"})]})]})]}),a.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:`w-3 h-3 rounded-full ${e==="light"?"bg-yellow-400":"bg-gray-800"}`})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-blue-900",children:e==="light"?"Light Surface Processing":"Dark Surface Processing"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:e==="light"?"Your image will be converted to black & white for optimal engraving on light surfaces.":"Your image will be converted to black & white and inverted for optimal engraving on dark surfaces."})]})]})})]})};function Dp(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Dp(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Fw(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Dp(t))&&(n&&(n+=" "),n+=e);return n}function Ww(){for(var t=0,e,r,n="";t<arguments.length;)(e=arguments[t++])&&(r=zp(e))&&(n&&(n+=" "),n+=r);return n}function zp(t){if(typeof t=="string")return t;for(var e,r="",n=0;n<t.length;n++)t[n]&&(e=zp(t[n]))&&(r&&(r+=" "),r+=e);return r}var Oc="-";function Hw(t){var e=Kw(t),r=t.conflictingClassGroups,n=t.conflictingClassGroupModifiers,s=n===void 0?{}:n;function i(l){var c=l.split(Oc);return c[0]===""&&c.length!==1&&c.shift(),Bp(c,e)||Vw(l)}function o(l,c){var d=r[l]||[];return c&&s[l]?[].concat(d,s[l]):d}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function Bp(t,e){var o;if(t.length===0)return e.classGroupId;var r=t[0],n=e.nextPart.get(r),s=n?Bp(t.slice(1),n):void 0;if(s)return s;if(e.validators.length!==0){var i=t.join(Oc);return(o=e.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:o.classGroupId}}var jd=/^\[(.+)\]$/;function Vw(t){if(jd.test(t)){var e=jd.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function Kw(t){var e=t.theme,r=t.prefix,n={nextPart:new Map,validators:[]},s=Gw(Object.entries(t.classGroups),r);return s.forEach(function(i){var o=i[0],l=i[1];kl(l,n,o,e)}),n}function kl(t,e,r,n){t.forEach(function(s){if(typeof s=="string"){var i=s===""?e:Nd(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(qw(s)){kl(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(function(o){var l=o[0],c=o[1];kl(c,Nd(e,l),r,n)})})}function Nd(t,e){var r=t;return e.split(Oc).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function qw(t){return t.isThemeGetter}function Gw(t,e){return e?t.map(function(r){var n=r[0],s=r[1],i=s.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],d=l[1];return[e+c,d]})):o});return[n,i]}):t}function Jw(t){if(t<1)return{get:function(){},set:function(){}};var e=0,r=new Map,n=new Map;function s(i,o){r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return s(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):s(o,l)}}}var Fp="!";function Yw(t){var e=t.separator||":",r=e.length===1,n=e[0],s=e.length;return function(o){for(var l=[],c=0,d=0,u,h=0;h<o.length;h++){var f=o[h];if(c===0){if(f===n&&(r||o.slice(h,h+s)===e)){l.push(o.slice(d,h)),d=h+s;continue}if(f==="/"){u=h;continue}}f==="["?c++:f==="]"&&c--}var v=l.length===0?o:o.substring(d),y=v.startsWith(Fp),b=y?v.substring(1):v,w=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:w}}}function Qw(t){if(t.length<=1)return t;var e=[],r=[];return t.forEach(function(n){var s=n[0]==="[";s?(e.push.apply(e,r.sort().concat([n])),r=[]):r.push(n)}),e.push.apply(e,r.sort()),e}function Xw(t){return{cache:Jw(t.cacheSize),splitModifiers:Yw(t),...Hw(t)}}var Zw=/\s+/;function e1(t,e){var r=e.splitModifiers,n=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return t.trim().split(Zw).map(function(o){var l=r(o),c=l.modifiers,d=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,f=n(h?u.substring(0,h):u),v=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=n(u),!f)return{isTailwindClass:!1,originalClassName:o};v=!1}var y=Qw(c).join(":"),b=d?y+Fp:y;return{isTailwindClass:!0,modifierId:b,classGroupId:f,originalClassName:o,hasPostfixModifier:v}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,d=o.hasPostfixModifier,u=l+c;return i.has(u)?!1:(i.add(u),s(c,d).forEach(function(h){return i.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function t1(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,s,i,o=l;function l(d){var u=e[0],h=e.slice(1),f=h.reduce(function(v,y){return y(v)},u());return n=Xw(f),s=n.cache.get,i=n.cache.set,o=c,c(d)}function c(d){var u=s(d);if(u)return u;var h=e1(d,n);return i(d,h),h}return function(){return o(Ww.apply(null,arguments))}}function oe(t){var e=function(n){return n[t]||[]};return e.isThemeGetter=!0,e}var Wp=/^\[(?:([a-z-]+):)?(.+)\]$/i,r1=/^\d+\/\d+$/,n1=new Set(["px","full","screen"]),s1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,i1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,o1=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ct(t){return Pr(t)||n1.has(t)||r1.test(t)||Sl(t)}function Sl(t){return Fr(t,"length",h1)}function a1(t){return Fr(t,"size",Hp)}function l1(t){return Fr(t,"position",Hp)}function c1(t){return Fr(t,"url",f1)}function hi(t){return Fr(t,"number",Pr)}function Pr(t){return!Number.isNaN(Number(t))}function u1(t){return t.endsWith("%")&&Pr(t.slice(0,-1))}function Hn(t){return Ed(t)||Fr(t,"number",Ed)}function Y(t){return Wp.test(t)}function Vn(){return!0}function qt(t){return s1.test(t)}function d1(t){return Fr(t,"",p1)}function Fr(t,e,r){var n=Wp.exec(t);return n?n[1]?n[1]===e:r(n[2]):!1}function h1(t){return i1.test(t)}function Hp(){return!1}function f1(t){return t.startsWith("url(")}function Ed(t){return Number.isInteger(Number(t))}function p1(t){return o1.test(t)}function m1(){var t=oe("colors"),e=oe("spacing"),r=oe("blur"),n=oe("brightness"),s=oe("borderColor"),i=oe("borderRadius"),o=oe("borderSpacing"),l=oe("borderWidth"),c=oe("contrast"),d=oe("grayscale"),u=oe("hueRotate"),h=oe("invert"),f=oe("gap"),v=oe("gradientColorStops"),y=oe("gradientColorStopPositions"),b=oe("inset"),w=oe("margin"),p=oe("opacity"),g=oe("padding"),m=oe("saturate"),x=oe("scale"),E=oe("sepia"),j=oe("skew"),C=oe("space"),P=oe("translate"),L=function(){return["auto","contain","none"]},A=function(){return["auto","hidden","clip","visible","scroll"]},W=function(){return["auto",Y,e]},N=function(){return[Y,e]},M=function(){return["",ct]},D=function(){return["auto",Pr,Y]},B=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},J=function(){return["solid","dashed","dotted","double","none"]},F=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},k=function(){return["start","end","center","between","around","evenly","stretch"]},S=function(){return["","0",Y]},O=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},R=function(){return[Pr,hi]},$=function(){return[Pr,Y]};return{cacheSize:500,theme:{colors:[Vn],spacing:[ct],blur:["none","",qt,Y],brightness:R(),borderColor:[t],borderRadius:["none","","full",qt,Y],borderSpacing:N(),borderWidth:M(),contrast:R(),grayscale:S(),hueRotate:$(),invert:S(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[u1,Sl],inset:W(),margin:W(),opacity:R(),padding:N(),saturate:R(),scale:R(),sepia:S(),skew:$(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Y]}],container:["container"],columns:[{columns:[qt]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(B(),[Y])}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hn]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Y]}],grow:[{grow:S()}],shrink:[{shrink:S()}],order:[{order:["first","last","none",Hn]}],"grid-cols":[{"grid-cols":[Vn]}],"col-start-end":[{col:["auto",{span:["full",Hn]},Y]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[Vn]}],"row-start-end":[{row:["auto",{span:[Hn]},Y]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Y]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Y]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(k())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(k(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(k(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Y,e]}],"min-w":[{"min-w":["min","max","fit",Y,ct]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[qt]},qt,Y]}],h:[{h:[Y,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Y,ct]}],"max-h":[{"max-h":[Y,e,"min","max","fit"]}],"font-size":[{text:["base",qt,Sl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",hi]}],"font-family":[{font:[Vn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Y]}],"line-clamp":[{"line-clamp":["none",Pr,hi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Y,ct]}],"list-image":[{"list-image":["none",Y]}],"list-style-type":[{list:["none","disc","decimal",Y]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(J(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ct]}],"underline-offset":[{"underline-offset":["auto",Y,ct]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Y]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Y]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(B(),[l1])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a1]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c1]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[].concat(J(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(J())}],"outline-offset":[{"outline-offset":[Y,ct]}],"outline-w":[{outline:[ct]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[ct]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",qt,d1]}],"shadow-color":[{shadow:[Vn]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":F()}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",qt,Y]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[m]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[m]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Y]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",Y]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",Y]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Hn,Y]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Y]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Y]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Y]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ct,hi]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var g1=t1(m1);function vt(...t){return g1(Fw(t))}const Re=V.forwardRef(({className:t,variant:e="default",size:r="default",...n},s)=>{const i="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",o={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},l={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"};return a.jsx("button",{className:vt(i,o[e],l[r],t),ref:s,...n})});Re.displayName="Button";const es=V.forwardRef(({className:t,min:e=0,max:r=100,step:n=1,defaultValue:s,value:i,onValueChange:o,...l},c)=>{const[d,u]=_.useState(s||0),h=i??d,f=v=>{const y=parseFloat(v.target.value);o?o(y):u(y)};return a.jsxs("div",{className:"relative flex w-full touch-none select-none items-center",children:[a.jsx("input",{ref:c,type:"range",min:e,max:r,step:n,value:h,onChange:f,className:vt("relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",t),...l}),a.jsx("div",{className:"absolute left-0 top-1/2 h-full w-full -translate-y-1/2 bg-primary",style:{width:`${(h-e)/(r-e)*100}%`}})]})});es.displayName="Slider";const et=V.forwardRef(({className:t,type:e,...r},n)=>a.jsx("input",{type:e,className:vt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));et.displayName="Input";const Rc=V.forwardRef(({className:t,children:e,...r},n)=>a.jsx("select",{className:vt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r,children:e}));Rc.displayName="Select";const Cd=({onContinue:t,selectedProduct:e,processedImage:r,isAdmin:n=!1,currentJob:s,onJobUpdate:i,onDesignUpdate:o})=>{const l=_.useRef(null),[c,d]=_.useState(!1),[u,h]=_.useState({x:0,y:0}),[f,v]=_.useState(null),[y,b]=_.useState([]),[w,p]=_.useState({position:{x:0,y:0},scale:1,rotation:0}),g=["Arial","Helvetica","Times New Roman","Georgia","Verdana","Courier New","Impact","Comic Sans MS","Tahoma","Trebuchet MS"];_.useEffect(()=>{e&&p({position:{x:0,y:0},scale:1,rotation:0})},[e]),_.useEffect(()=>{j()},[w,e,y]);const m=()=>{if(!e)return;const k=l.current;if(!k)return;const{width:S,height:O}=e.engravingBoundary,R=S/100*k.width,$=O/100*k.height,U=R/2,ne=$/2,re={id:Date.now().toString(),text:"Sample Text",font:"Arial",fontSize:24,color:"#000000",position:{x:U,y:ne},scale:1,rotation:0,isBold:!1,isItalic:!1};b(ee=>[...ee,re]),v(re.id),o&&o([...y,re])},x=(k,S)=>{b(O=>O.map(R=>{if(R.id===k){const $={...R,...S};if(S.position&&e){const U=l.current;if(U){const{width:ne,height:re}=e.engravingBoundary,ee=ne/100*U.width,K=re/100*U.height,Q=Math.max(0,Math.min(S.position.x,ee)),z=Math.max(0,Math.min(S.position.y,K));$.position={x:Q,y:z}}}return $}return R})),o&&o(y)},E=k=>{b(S=>S.filter(O=>O.id!==k)),f===k&&v(null),o&&o(y)},j=()=>{const k=l.current;if(!k||!e)return;const S=k.getContext("2d");if(!S)return;const O=new Image;O.onload=()=>{if(k.width=O.width,k.height=O.height,S.clearRect(0,0,k.width,k.height),S.drawImage(O,0,0),e.engravingBoundary){const{x:R,y:$,width:U,height:ne}=e.engravingBoundary,re=R/100*k.width,ee=$/100*k.height,K=U/100*k.width,Q=ne/100*k.height;if(S.save(),S.beginPath(),S.rect(re,ee,K,Q),S.clip(),r){const z=new Image;z.onload=()=>{const xt=re+K/2,Ft=ee+Q/2,Wr=z.width/z.height,Wt=K/Q;let Ze,Ct;Wr>Wt?(Ze=K/z.width,Ct=Ze):(Ct=Q/z.height,Ze=Ct);const An=Ze*w.scale,Oo=Ct*w.scale,mm=K/z.width,gm=Q/z.height,Mc=Math.min(An,mm),Uc=Math.min(Oo,gm);S.save(),S.translate(xt,Ft),S.rotate(w.rotation*Math.PI/180),S.scale(Mc,Uc);const Dc=z.width,zc=z.height;S.drawImage(z,-Dc/2+w.position.x/Mc,-zc/2+w.position.y/Uc,Dc,zc),S.restore()},z.src=r}y.forEach(z=>{S.save(),S.translate(re+z.position.x,ee+z.position.y),S.rotate(z.rotation*Math.PI/180),S.scale(z.scale,z.scale);const xt=z.isBold?"bold":"normal",Ft=z.isItalic?"italic":"normal";if(S.font=`${Ft} ${xt} ${z.fontSize}px ${z.font}`,S.fillStyle=z.color,S.textAlign="center",S.textBaseline="middle",S.fillText(z.text,0,0),f===z.id){const Wt=S.measureText(z.text).width,Ze=z.fontSize;S.strokeStyle="#3b82f6",S.lineWidth=2,S.setLineDash([3,3]),S.strokeRect(-Wt/2,-Ze/2,Wt,Ze),S.setLineDash([])}S.restore()}),S.restore()}if(e.engravingBoundary){const{x:R,y:$,width:U,height:ne}=e.engravingBoundary,re=R/100*k.width,ee=$/100*k.height,K=U/100*k.width,Q=ne/100*k.height;S.strokeStyle="#ef4444",S.lineWidth=2,S.setLineDash([5,5]),S.strokeRect(re,ee,K,Q),S.setLineDash([])}},O.src=e.mockupImage},C=k=>{const S=l.current;if(!S||!e)return;const O=S.getBoundingClientRect(),R=k.clientX-O.left,$=k.clientY-O.top,{x:U,y:ne,width:re,height:ee}=e.engravingBoundary,K=U/100*S.width,Q=ne/100*S.height,z=re/100*S.width,xt=ee/100*S.height;R>=K&&R<=K+z&&$>=Q&&$<=Q+xt&&f&&x(f,{position:{x:R-K,y:$-Q}})},P=k=>{var O;d(!0);const S=(O=l.current)==null?void 0:O.getBoundingClientRect();S&&h({x:k.clientX-S.left-w.position.x,y:k.clientY-S.top-w.position.y})},L=k=>{var U;if(!c||!e)return;const S=(U=l.current)==null?void 0:U.getBoundingClientRect();if(!S)return;const O=k.clientX-S.left-u.x,R=k.clientY-S.top-u.y,$=l.current;if($){const{x:ne,y:re,width:ee,height:K}=e.engravingBoundary,Q=ne/100*$.width,z=re/100*$.height,xt=ee/100*$.width,Ft=K/100*$.height,Wr=Q+xt-50,Wt=z+Ft-50,Ze=Math.max(Q,Math.min(O,Wr)),Ct=Math.max(z,Math.min(R,Wt));p(An=>({...An,position:{x:Ze,y:Ct}}))}},A=()=>{d(!1),console.log("Mockup state updated:",w)},W=k=>{p(S=>({...S,scale:k/100}))},N=k=>{p(S=>({...S,rotation:k}))},M=()=>{p({position:{x:0,y:0},scale:1,rotation:0})},D=()=>{if(r){const k=document.createElement("a");k.href=r,k.download="processed-image.png",k.click()}},B=()=>{const k=l.current;if(k){const S=document.createElement("canvas"),O=S.getContext("2d");if(O){S.width=k.width,S.height=k.height,O.drawImage(k,0,0);const R=document.createElement("a");R.href=S.toDataURL("image/png"),R.download="complete-mockup.png",R.click()}}},J=()=>{if(y.length===0)return;const k=l.current;if(!k||!e)return;const{width:S,height:O}=e.engravingBoundary,R=S/100*k.width,$=O/100*k.height;let U=`<svg width="${R}" height="${$}" xmlns="http://www.w3.org/2000/svg">`;y.forEach(K=>{const Q=K.isBold?"bold":"normal",z=K.isItalic?"italic":"normal";U+=`
        <text 
          x="${K.position.x}" 
          y="${K.position.y+K.fontSize/2}" 
          font-family="${K.font}" 
          font-size="${K.fontSize}" 
          font-weight="${Q}" 
          font-style="${z}" 
          fill="${K.color}"
          text-anchor="middle"
          transform="rotate(${K.rotation} ${K.position.x} ${K.position.y})"
        >${K.text}</text>
      `}),U+="</svg>";const ne=new Blob([U],{type:"image/svg+xml"}),re=URL.createObjectURL(ne),ee=document.createElement("a");ee.href=re,ee.download="text-layers.svg",ee.click(),URL.revokeObjectURL(re)},F=()=>{if(e&&r){if(s){const k={...s,mockupImage:"",imagePosition:{x:w.position.x,y:w.position.y,scale:w.scale,rotation:w.rotation},textLayers:y};i(k)}t()}};return e?a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Design Preview"}),a.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg p-3 mb-4",children:a.jsx("p",{className:"text-red-800 text-sm font-medium",children:"Red dashed box shows engraving area - Content auto-placed here"})})]}),a.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:a.jsxs("div",{className:"relative",children:[!(e!=null&&e.mockupImage)&&a.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-100",children:a.jsx("p",{className:"text-gray-500",children:"Loading mockup image..."})}),a.jsx("canvas",{ref:l,className:"w-full h-auto max-h-96 object-contain cursor-pointer",onClick:C,onMouseDown:P,onMouseMove:L,onMouseUp:A,onMouseLeave:A})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-sm font-medium flex items-center",children:[a.jsx(Lw,{className:"h-4 w-4 mr-2"}),"Scale: ",Math.round(w.scale*100),"%"]}),a.jsx(es,{value:w.scale*100,onValueChange:W,min:10,max:200,step:5})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-sm font-medium flex items-center",children:[a.jsx(Ow,{className:"h-4 w-4 mr-2"}),"Rotation: ",w.rotation,""]}),a.jsx(es,{value:w.rotation,onValueChange:N,min:-180,max:180,step:5})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(Re,{onClick:M,variant:"outline",size:"sm",children:"Reset Position"}),a.jsxs(Re,{onClick:B,className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(_t,{className:"h-4 w-4 mr-2"}),"Download Complete Mockup"]})]}),t&&typeof t=="function"&&a.jsx("div",{className:"text-center pt-6",children:a.jsx(Re,{onClick:F,size:"lg",className:"bg-blue-600 hover:bg-blue-700 px-8 py-3 text-lg",children:"Continue to Order Form"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h4",{className:"font-semibold",children:["Text Layers (",y.length,")"]}),a.jsxs(Re,{onClick:m,size:"sm",children:[a.jsx(Lp,{className:"h-4 w-4 mr-2"}),"Add Text"]})]}),y.length===0?a.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No text layers yet. Click 'Add Text' to get started!"}):a.jsx("div",{className:"space-y-3",children:y.map(k=>a.jsxs("div",{className:`border rounded-lg p-3 cursor-pointer transition-colors ${f===k.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>v(k.id),children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"text-sm font-medium truncate",children:k.text}),a.jsx(Re,{onClick:S=>{S.stopPropagation(),E(k.id)},variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 p-1 h-6 w-6",children:a.jsx(Up,{className:"h-3 w-3"})})]}),f===k.id&&a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsx(et,{value:k.text,onChange:S=>x(k.id,{text:S.target.value}),placeholder:"Enter text",className:"text-xs"}),a.jsx(Rc,{value:k.font,onChange:S=>x(k.id,{font:S.target.value}),className:"text-xs",children:g.map(S=>a.jsx("option",{value:S,children:S},S))}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(et,{type:"number",value:k.fontSize,onChange:S=>x(k.id,{fontSize:parseInt(S.target.value)}),min:"8",max:"72",className:"text-xs w-16"}),a.jsx("span",{className:"text-xs text-gray-500",children:"px"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(et,{type:"color",value:k.color,onChange:S=>x(k.id,{color:S.target.value}),className:"w-8 h-6 p-0 border-0"}),a.jsx(Re,{onClick:()=>x(k.id,{isBold:!k.isBold}),variant:k.isBold?"default":"outline",size:"sm",className:"text-xs px-2",children:"B"}),a.jsx(Re,{onClick:()=>x(k.id,{isItalic:!k.isItalic}),variant:k.isItalic?"default":"outline",size:"sm",className:"text-xs px-2",children:"I"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Scale"}),a.jsx(es,{value:k.scale*100,onValueChange:S=>x(k.id,{scale:S/100}),min:25,max:200,step:5,className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Rotation"}),a.jsx(es,{value:k.rotation,onValueChange:S=>x(k.id,{rotation:S}),min:-180,max:180,step:5,className:"mt-1"})]})]})]})]},k.id))})]}),n&&a.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold mb-4",children:"Download Options"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(Re,{onClick:D,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:!r,children:[a.jsx(_t,{className:"h-4 w-4 mr-2"}),"Download Processed Image"]}),a.jsxs(Re,{onClick:B,className:"w-full bg-blue-600 hover:bg-blue-700",children:[a.jsx(_t,{className:"h-4 w-4 mr-2"}),"Download Complete Mockup"]}),a.jsxs(Re,{onClick:J,className:"w-full bg-green-600 hover:bg-green-700",disabled:y.length===0,children:[a.jsx(_t,{className:"h-4 w-4 mr-2"}),"Download Text as SVG"]})]})]})]})]}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"Please select a product first."})})},Hs=async()=>{var t,e,r,n,s;try{console.log("Loading settings from database...");const[i,o,l,c,d]=await Promise.all([he.from("business_settings").select("*").order("created_at",{ascending:!0}).limit(1),he.from("payment_settings").select("*").order("created_at",{ascending:!0}).limit(1),he.from("general_settings").select("*").order("created_at",{ascending:!0}).limit(1),he.from("email_settings").select("*").order("created_at",{ascending:!0}).limit(1),he.from("sms_settings").select("*").order("created_at",{ascending:!0}).limit(1)]);i.error&&console.error("Business settings error:",i.error),o.error&&console.error("Payment settings error:",o.error),l.error&&console.error("General settings error:",l.error),c.error&&console.error("Email settings error:",c.error),d.error&&console.error("SMS settings error:",d.error);const u=(t=i.data)==null?void 0:t[0],h=(e=o.data)==null?void 0:e[0],f=(r=l.data)==null?void 0:r[0],v=(n=c.data)==null?void 0:n[0],y=(s=d.data)==null?void 0:s[0];return console.log("Database results:",{business:u,payment:h,general:f,email:v,sms:y}),{business:{businessName:(u==null?void 0:u.business_name)||"Laser Engraving Business",businessEmail:(u==null?void 0:u.business_email)||"business@example.com",phoneNumber:(u==null?void 0:u.phone_number)||"",businessAddress:(u==null?void 0:u.business_address)||"",businessLogo:(u==null?void 0:u.business_logo)||""},payment:{stripePublishableKey:(h==null?void 0:h.stripe_publishable_key)||"",stripeSecretKey:(h==null?void 0:h.stripe_secret_key)||"",paymentTiming:(h==null?void 0:h.payment_timing)||"before_submission"},general:{country:(f==null?void 0:f.country)||"United States",currency:(f==null?void 0:f.currency)||"US Dollar ($)",taxRate:(f==null?void 0:f.tax_rate)||0},email:{resendApiKey:(v==null?void 0:v.resend_api_key)||"",fromEmail:(v==null?void 0:v.from_email)||"",emailNotifications:(v==null?void 0:v.email_notifications)!==void 0?v.email_notifications:!0},sms:{twilioAccountSid:(y==null?void 0:y.twilio_account_sid)||"",twilioAuthToken:(y==null?void 0:y.twilio_auth_token)||"",twilioPhoneNumber:(y==null?void 0:y.twilio_phone_number)||"",smsNotifications:(y==null?void 0:y.sms_notifications)!==void 0?y.sms_notifications:!1}}}catch(i){return console.error("Error loading settings from database:",i),null}},y1=async t=>{try{const{data:e}=await he.from("business_settings").select("id").limit(1).single();if(!e)return console.error("No existing business settings row found"),!1;const{error:r}=await he.from("business_settings").update({business_name:t.businessName||"Laser Engraving Business",business_email:t.businessEmail||"business@example.com",phone_number:t.phoneNumber||"",business_address:t.businessAddress||"",business_logo:t.businessLogo||"",updated_at:new Date().toISOString()}).eq("id",e.id);return r?(console.error("Error saving business settings:",r),!1):(console.log("Business settings saved successfully"),!0)}catch(e){return console.error("Error saving business settings:",e),!1}},v1=async t=>{try{const{data:e}=await he.from("payment_settings").select("id").limit(1).single();if(!e)return console.error("No existing payment settings row found"),!1;const{error:r}=await he.from("payment_settings").update({stripe_publishable_key:t.stripePublishableKey||"",stripe_secret_key:t.stripeSecretKey||"",payment_timing:t.paymentTiming||"before_submission",updated_at:new Date().toISOString()}).eq("id",e.id);return r?(console.error("Error saving payment settings:",r),!1):(console.log("Payment settings saved successfully"),!0)}catch(e){return console.error("Error saving payment settings:",e),!1}},x1=async t=>{try{console.log("Attempting to save general settings..."),console.log("Tax rate being saved:",t.taxRate,"Type:",typeof t.taxRate);const{data:e,error:r}=await he.from("general_settings").select("id").limit(1).single();if(r)return console.error("Error selecting general settings row:",r),!1;if(!e)return console.error("No existing general settings row found"),!1;console.log("Found existing general settings row:",e.id);const n=Math.min(Math.max(t.taxRate||0,0),9.9999);console.log("Adjusted tax rate:",n);const{error:s}=await he.from("general_settings").update({country:t.country||"United States",currency:t.currency||"US Dollar ($)",tax_rate:n,updated_at:new Date().toISOString()}).eq("id",e.id);return s?(console.error("Error updating general settings:",s),!1):(console.log("General settings saved successfully"),!0)}catch(e){return console.error("Error saving general settings:",e),!1}},w1=async t=>{try{console.log("Attempting to save email settings...");const{data:e,error:r}=await he.from("email_settings").select("id").limit(1).single();if(r)return console.error("Error selecting email settings row:",r),!1;if(!e)return console.error("No existing email settings row found"),!1;console.log("Found existing email settings row:",e.id);const{error:n}=await he.from("email_settings").update({resend_api_key:t.resendApiKey||"",from_email:t.fromEmail||"",email_notifications:t.emailNotifications!==void 0?t.emailNotifications:!0,updated_at:new Date().toISOString()}).eq("id",e.id);return n?(console.error("Error updating email settings:",n),!1):(console.log("Email settings saved successfully"),!0)}catch(e){return console.error("Error saving email settings:",e),!1}},b1=async t=>{try{console.log("Attempting to save SMS settings...");const{data:e,error:r}=await he.from("sms_settings").select("id").limit(1).single();if(r)return console.error("Error selecting SMS settings row:",r),!1;if(!e)return console.error("No existing SMS settings row found"),!1;console.log("Found existing SMS settings row:",e.id);const{error:n}=await he.from("sms_settings").update({twilio_account_sid:t.twilioAccountSid||"",twilio_auth_token:t.twilioAuthToken||"",twilio_phone_number:t.twilioPhoneNumber||"",sms_notifications:t.smsNotifications!==void 0?t.smsNotifications:!1,updated_at:new Date().toISOString()}).eq("id",e.id);return n?(console.error("Error updating SMS settings:",n),!1):(console.log("SMS settings saved successfully"),!0)}catch(e){return console.error("Error saving SMS settings:",e),!1}},k1=async t=>{try{return(await Promise.all([y1(t.business),v1(t.payment),x1(t.general),w1(t.email),b1(t.sms)])).every(r=>r===!0)}catch(e){return console.error("Error saving all settings:",e),!1}},Ic={business:{businessName:"Laser Engraving Business",businessEmail:"business@example.com",phoneNumber:"",businessAddress:"",businessLogo:""},payment:{paymentTiming:"before_submission",stripePublishableKey:"pk_test_...",stripeSecretKey:"sk_test_..."},general:{country:"United States",currency:"US Dollar ($)",taxRate:0},email:{resendApiKey:"",fromEmail:"",emailNotifications:!0},sms:{twilioAccountSid:"",twilioAuthToken:"",twilioPhoneNumber:"",smsNotifications:!1}},Et=async()=>{try{const e=await Hs();if(e)return e}catch{console.log("Database loading failed, falling back to localStorage")}const t=localStorage.getItem("appSettings");if(t)try{return JSON.parse(t)}catch(e){console.error("Error parsing stored settings:",e)}return Ic},Ac=()=>{const t=localStorage.getItem("appSettings");if(t)try{return JSON.parse(t)}catch(e){console.error("Error parsing stored settings:",e)}return Ic},Vp=async t=>{try{return console.log("Saving settings to database..."),await k1(t)?(console.log("Settings saved to database successfully"),!0):(console.error("Failed to save settings to database"),!1)}catch(e){return console.error("Error saving settings:",e),!1}},S1=t=>{try{localStorage.setItem("appSettings",JSON.stringify(t))}catch(e){console.error("Error saving settings to localStorage:",e)}},Kp=()=>Ac().general.taxRate,$c=t=>{const e=Kp();return t*e/100},qp=t=>{const e=$c(t);return t+e},er=t=>{const r=Ac().general.currency;return`${r.includes("$")?"$":r.includes("")?"":r.includes("")?"":r.includes("")?"":"$"}${t.toFixed(2)}`},_1=Object.freeze(Object.defineProperty({__proto__:null,calculateTax:$c,calculateTotal:qp,defaultSettings:Ic,formatCurrency:er,getTaxRate:Kp,loadSettings:Et,loadSettingsSync:Ac,saveSettings:Vp,saveSettingsSync:S1},Symbol.toStringTag,{value:"Module"}));var Gp={exports:{}},j1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",N1=j1,E1=N1;function Jp(){}function Yp(){}Yp.resetWarningCache=Jp;var C1=function(){function t(n,s,i,o,l,c){if(c!==E1){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Yp,resetWarningCache:Jp};return r.PropTypes=r,r};Gp.exports=C1();var P1=Gp.exports;const ue=Dd(P1);function Pd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Td(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pd(Object(r),!0).forEach(function(n){Qp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pd(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pi(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pi=function(e){return typeof e}:Pi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pi(t)}function Qp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T1(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function O1(t,e){if(t==null)return{};var r=T1(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xp(t,e){return R1(t)||I1(t,e)||A1(t,e)||$1()}function R1(t){if(Array.isArray(t))return t}function I1(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],s=!0,i=!1,o,l;try{for(r=r.call(t);!(s=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(c){i=!0,l=c}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function A1(t,e){if(t){if(typeof t=="string")return Od(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Od(t,e)}}function Od(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ke=function(e,r,n){var s=!!n,i=V.useRef(n);V.useEffect(function(){i.current=n},[n]),V.useEffect(function(){if(!s||!e)return function(){};var o=function(){i.current&&i.current.apply(i,arguments)};return e.on(r,o),function(){e.off(r,o)}},[s,r,e,i])},_l=function(e){var r=V.useRef(e);return V.useEffect(function(){r.current=e},[e]),r.current},En=function(e){return e!==null&&Pi(e)==="object"},L1=function(e){return En(e)&&typeof e.then=="function"},M1=function(e){return En(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Rd="[object Object]",U1=function t(e,r){if(!En(e)||!En(r))return e===r;var n=Array.isArray(e),s=Array.isArray(r);if(n!==s)return!1;var i=Object.prototype.toString.call(e)===Rd,o=Object.prototype.toString.call(r)===Rd;if(i!==o)return!1;if(!i&&!n)return e===r;var l=Object.keys(e),c=Object.keys(r);if(l.length!==c.length)return!1;for(var d={},u=0;u<l.length;u+=1)d[l[u]]=!0;for(var h=0;h<c.length;h+=1)d[c[h]]=!0;var f=Object.keys(d);if(f.length!==l.length)return!1;var v=e,y=r,b=function(p){return t(v[p],y[p])};return f.every(b)},Zp=function(e,r,n){return En(e)?Object.keys(e).reduce(function(s,i){var o=!En(r)||!U1(e[i],r[i]);return n.includes(i)?(o&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),s):o?Td(Td({},s||{}),{},Qp({},i,e[i])):s},null):null},em="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Id=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:em;if(e===null||M1(e))return e;throw new Error(r)},D1=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:em;if(L1(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return Id(s,r)})};var n=Id(e,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},z1=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.9.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.9.0",url:"https://stripe.com/docs/stripe-js/react"}))},Po=V.createContext(null);Po.displayName="ElementsContext";var tm=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e},rm=function(e){var r=e.stripe,n=e.options,s=e.children,i=V.useMemo(function(){return D1(r)},[r]),o=V.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(n):null}}),l=Xp(o,2),c=l[0],d=l[1];V.useEffect(function(){var f=!0,v=function(b){d(function(w){return w.stripe?w:{stripe:b,elements:b.elements(n)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(y){y&&f&&v(y)}):i.tag==="sync"&&!c.stripe&&v(i.stripe),function(){f=!1}},[i,c,n]);var u=_l(r);V.useEffect(function(){u!==null&&u!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,r]);var h=_l(n);return V.useEffect(function(){if(c.elements){var f=Zp(n,h,["clientSecret","fonts"]);f&&c.elements.update(f)}},[n,h,c.elements]),V.useEffect(function(){z1(c.stripe)},[c.stripe]),V.createElement(Po.Provider,{value:c},s)};rm.propTypes={stripe:ue.any,options:ue.object};var B1=function(e){var r=V.useContext(Po);return tm(r,e)},F1=function(){var e=B1("calls useElements()"),r=e.elements;return r};ue.func.isRequired;var nm=V.createContext(null);nm.displayName="CheckoutSdkContext";var W1=function(e,r){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CheckoutProvider> provider."));return e},H1=V.createContext(null);H1.displayName="CheckoutContext";ue.any,ue.shape({fetchClientSecret:ue.func.isRequired,elementsOptions:ue.object}).isRequired;var jl=function(e){var r=V.useContext(nm),n=V.useContext(Po);if(r&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return r?W1(r,e):tm(n,e)},V1=["mode"],K1=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},ye=function(e,r){var n="".concat(K1(e),"Element"),s=function(c){var d=c.id,u=c.className,h=c.options,f=h===void 0?{}:h,v=c.onBlur,y=c.onFocus,b=c.onReady,w=c.onChange,p=c.onEscape,g=c.onClick,m=c.onLoadError,x=c.onLoaderStart,E=c.onNetworksChange,j=c.onConfirm,C=c.onCancel,P=c.onShippingAddressChange,L=c.onShippingRateChange,A=jl("mounts <".concat(n,">")),W="elements"in A?A.elements:null,N="checkoutSdk"in A?A.checkoutSdk:null,M=V.useState(null),D=Xp(M,2),B=D[0],J=D[1],F=V.useRef(null),k=V.useRef(null);Ke(B,"blur",v),Ke(B,"focus",y),Ke(B,"escape",p),Ke(B,"click",g),Ke(B,"loaderror",m),Ke(B,"loaderstart",x),Ke(B,"networkschange",E),Ke(B,"confirm",j),Ke(B,"cancel",C),Ke(B,"shippingaddresschange",P),Ke(B,"shippingratechange",L),Ke(B,"change",w);var S;b&&(e==="expressCheckout"?S=b:S=function(){b(B)}),Ke(B,"ready",S),V.useLayoutEffect(function(){if(F.current===null&&k.current!==null&&(W||N)){var R=null;if(N)switch(e){case"payment":R=N.createPaymentElement(f);break;case"address":if("mode"in f){var $=f.mode,U=O1(f,V1);if($==="shipping")R=N.createShippingAddressElement(U);else if($==="billing")R=N.createBillingAddressElement(U);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":R=N.createExpressCheckoutElement(f);break;case"currencySelector":R=N.createCurrencySelectorElement();break;case"taxId":R=N.createTaxIdElement(f);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else W&&(R=W.create(e,f));F.current=R,J(R),R&&R.mount(k.current)}},[W,N,f]);var O=_l(f);return V.useEffect(function(){if(F.current){var R=Zp(f,O,["paymentRequest"]);R&&"update"in F.current&&F.current.update(R)}},[f,O]),V.useLayoutEffect(function(){return function(){if(F.current&&typeof F.current.destroy=="function")try{F.current.destroy(),F.current=null}catch{}}},[]),V.createElement("div",{id:d,className:u,ref:k})},i=function(c){jl("mounts <".concat(n,">"));var d=c.id,u=c.className;return V.createElement("div",{id:d,className:u})},o=r?i:s;return o.propTypes={id:ue.string,className:ue.string,onChange:ue.func,onBlur:ue.func,onFocus:ue.func,onReady:ue.func,onEscape:ue.func,onClick:ue.func,onLoadError:ue.func,onLoaderStart:ue.func,onNetworksChange:ue.func,onConfirm:ue.func,onCancel:ue.func,onShippingAddressChange:ue.func,onShippingRateChange:ue.func,options:ue.object},o.displayName=n,o.__elementType=e,o},ve=typeof window>"u",q1=V.createContext(null);q1.displayName="EmbeddedCheckoutProviderContext";var G1=function(){var e=jl("calls useStripe()"),r=e.stripe;return r};ye("auBankAccount",ve);var Ad=ye("card",ve);ye("cardNumber",ve);ye("cardExpiry",ve);ye("cardCvc",ve);ye("fpxBank",ve);ye("iban",ve);ye("idealBank",ve);ye("p24Bank",ve);ye("epsBank",ve);ye("payment",ve);ye("expressCheckout",ve);ye("currencySelector",ve);ye("paymentRequestButton",ve);ye("linkAuthentication",ve);ye("address",ve);ye("shippingAddress",ve);ye("paymentMethodMessaging",ve);ye("affirmMessage",ve);ye("afterpayClearpayMessage",ve);ye("taxId",ve);var sm="basil",J1=function(e){return e===3?"v3":e},im="https://js.stripe.com",Y1="".concat(im,"/").concat(sm,"/stripe.js"),Q1=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,X1=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,$d="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Z1=function(e){return Q1.test(e)||X1.test(e)},eb=function(){for(var e=document.querySelectorAll('script[src^="'.concat(im,'"]')),r=0;r<e.length;r++){var n=e[r];if(Z1(n.src))return n}return null},Ld=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Y1).concat(r);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(n),n},tb=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.8.0",startTime:r})},Kn=null,fi=null,pi=null,rb=function(e){return function(r){e(new Error("Failed to load Stripe.js",{cause:r}))}},nb=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},sb=function(e){return Kn!==null?Kn:(Kn=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn($d),window.Stripe){r(window.Stripe);return}try{var s=eb();if(s&&e)console.warn($d);else if(!s)s=Ld(e);else if(s&&pi!==null&&fi!==null){var i;s.removeEventListener("load",pi),s.removeEventListener("error",fi),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=Ld(e)}pi=nb(r,n),fi=rb(n),s.addEventListener("load",pi),s.addEventListener("error",fi)}catch(o){n(o);return}}),Kn.catch(function(r){return Kn=null,Promise.reject(r)}))},ib=function(e,r,n){if(e===null)return null;var s=r[0],i=s.match(/^pk_test/),o=J1(e.version),l=sm;i&&o!==l&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.8.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,r);return tb(c,n),c},qn,om=!1,am=function(){return qn||(qn=sb(null).catch(function(e){return qn=null,Promise.reject(e)}),qn)};Promise.resolve().then(function(){return am()}).catch(function(t){om||console.warn(t)});var lm=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];om=!0;var s=Date.now();return am().then(function(i){return ib(i,r,s)})};let ts=null;const cm=async()=>{if(ts)return ts;try{const t=await Et();if(!t)return console.warn("Failed to load settings"),null;const e=t.payment.stripePublishableKey;return e?(ts=await lm(e),ts):(console.warn("Stripe publishable key not configured"),null)}catch(t){return console.error("Error initializing Stripe:",t),null}},um=async(t,e="usd")=>{try{const r=await fetch("http://localhost:3004/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t,currency:e})});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to create payment intent")}return await r.json()}catch(r){throw console.error("Error creating payment intent:",r),r}},ob=async(t,e,r="usd")=>{try{const n=await cm();if(!n)throw new Error("Stripe not initialized");const{clientSecret:s,paymentIntentId:i}=await um(e,r),{error:o,paymentIntent:l}=await n.confirmCardPayment(s,{payment_method:t.id});if(o)throw new Error(o.message||"Payment failed");if(l.status==="succeeded"){const c=await fetch("http://localhost:3004/api/confirm-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentIntentId:l.id})});if(!c.ok)throw new Error("Payment verification failed");if(!(await c.json()).success)throw new Error("Payment not confirmed");return{id:l.id,status:l.status,amount:l.amount,currency:l.currency,payment_method:t.id,created:l.created}}else throw new Error(`Payment status: ${l.status}`)}catch(n){throw console.error("Error processing payment:",n),n}},ab=()=>ts,dm=async()=>{try{const t=await Et();return t?!!(t.payment.stripePublishableKey&&t.payment.stripeSecretKey):!1}catch(t){return console.error("Error checking Stripe configuration:",t),!1}},lb=Object.freeze(Object.defineProperty({__proto__:null,createPaymentIntent:um,getStripe:ab,initializeStripe:cm,isStripeConfigured:dm,processPayment:ob},Symbol.toStringTag,{value:"Module"})),cb=({amount:t,onPaymentSuccess:e,onPaymentError:r,onCancel:n})=>{const s=G1(),i=F1(),[o,l]=_.useState(!1),[c,d]=_.useState({}),u=()=>{const f={};return(!s||!i)&&(f.general="Stripe not initialized"),d(f),Object.keys(f).length===0},h=async f=>{if(f.preventDefault(),!!u()){if(!s||!i){r("Stripe not initialized");return}l(!0);try{const{error:v,paymentMethod:y}=await s.createPaymentMethod({type:"card",card:i.getElement(Ad)});if(v)throw new Error(v.message||"Payment method creation failed");const{processPayment:b}=await zr(()=>Promise.resolve().then(()=>lb),void 0),w=await b(y,t);e(w)}catch(v){r(v instanceof Error?v.message:"Payment failed")}finally{l(!1)}}};return a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(Ei,{className:"h-6 w-6 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Details"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Complete your order securely"})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),a.jsx("span",{className:"text-xl font-bold text-blue-600",children:er(t)})]})}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Information"}),a.jsx("div",{className:`border rounded-md p-3 ${c.card?"border-red-300":"border-gray-300"}`,children:a.jsx(Ad,{options:{style:{base:{fontSize:"16px",color:"#374151","::placeholder":{color:"#9CA3AF"}}}}})}),c.card&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.card})]}),c.general&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-red-600",children:c.general})}),a.jsx("button",{type:"submit",disabled:o||!s,className:`w-full py-3 px-4 rounded-md font-medium text-white transition-colors ${o||!s?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}`,children:o?a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing Payment..."})]}):`Pay ${er(t)}`}),a.jsx("button",{type:"button",onClick:n,disabled:o,className:"w-full py-2 px-4 border border-gray-300 rounded-md text-gray-700 font-medium hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-500",children:[a.jsx(Cc,{className:"h-4 w-4"}),a.jsx("span",{children:"Secure payment powered by Stripe"})]})})]})})},ub=t=>{const[e,r]=_.useState(null),[n,s]=_.useState(null),[i,o]=_.useState(!0);return _.useEffect(()=>{(async()=>{var c;try{const d=await dm();if(s(d),d){const{loadSettings:u}=await zr(()=>Promise.resolve().then(()=>_1),void 0),h=await u();if((c=h==null?void 0:h.payment)!=null&&c.stripePublishableKey){const f=await lm(h.payment.stripePublishableKey);r(f)}}}catch(d){console.error("Error initializing Stripe:",d),s(!1)}finally{o(!1)}})()},[]),i?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Checking payment configuration..."})]}):n?e?a.jsx(rm,{stripe:e,children:a.jsx(cb,{...t})}):a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Sd,{className:"h-5 w-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Payment Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Failed to initialize payment system. Please try again or contact support."})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:t.onCancel,className:"bg-red-100 text-red-800 px-4 py-2 rounded-md text-sm font-medium hover:bg-red-200",children:"Go Back"})})]}):a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Sd,{className:"h-5 w-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Payment Not Configured"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Stripe payment gateway is not configured. Please contact the administrator."})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:t.onCancel,className:"bg-yellow-100 text-yellow-800 px-4 py-2 rounded-md text-sm font-medium hover:bg-yellow-200",children:"Go Back"})})]})},db=({onSubmit:t,selectedProduct:e})=>{const[r,n]=_.useState({name:"",email:"",phone:"",paymentOption:"pay_now"}),[s,i]=_.useState({}),[o,l]=_.useState(!1),[c,d]=_.useState(!1),[u,h]=_.useState(null),[f,v]=_.useState(!0);_.useEffect(()=>{(async()=>{try{v(!0);const L=await Et();h(L)}catch(L){console.error("Error loading settings:",L),h({general:{taxRate:0},payment:{paymentTiming:"before_submission"}})}finally{v(!1)}})()},[]);const y=e.price,b=u?$c(y):0,w=u?qp(y):y;if(f||!u)return a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading order form..."})]});const p=()=>{const P={};return r.name.trim()||(P.name="Name is required"),r.email.trim()?/\S+@\S+\.\S+/.test(r.email)||(P.email="Please enter a valid email address"):P.email="Email is required",r.phone.trim()?/^[\+]?[1-9][\d]{0,15}$/.test(r.phone.replace(/[\s\-\(\)]/g,""))||(P.phone="Please enter a valid phone number"):P.phone="Phone number is required",i(P),Object.keys(P).length===0},g=async P=>{if(P.preventDefault(),!!p()){if(u.payment.paymentTiming==="before_submission"){d(!0);return}if(u.payment.paymentTiming==="at_pickup"&&r.paymentOption==="pay_now"){d(!0);return}await m()}},m=async()=>{l(!0);try{await new Promise(P=>setTimeout(P,1e3)),t(r)}catch(P){console.error("Form submission error:",P)}finally{l(!1)}},x=async P=>{await m()},E=P=>{alert(`Payment failed: ${P}`),d(!1)},j=()=>{d(!1)},C=(P,L)=>{n(A=>({...A,[P]:L})),s[P]&&i(A=>({...A,[P]:""}))};return c?a.jsx(ub,{amount:w,onPaymentSuccess:x,onPaymentError:E,onCancel:j}):a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(Nn,{className:"h-5 w-5 mr-2 text-blue-600"}),"Order Summary"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[e.images[0]&&a.jsx("img",{src:e.images[0],alt:e.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600",children:e.description}),a.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full mt-1 ${e.surfaceTone==="light"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[e.surfaceTone," surface"]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Price Breakdown"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Product Price:"}),a.jsx("span",{className:"font-medium",children:er(y)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:["Tax (",(u.general.taxRate*100).toFixed(2),"%):"]}),a.jsx("span",{className:"font-medium",children:er(b)})]}),a.jsx("div",{className:"pt-2 border-t border-gray-200",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold text-gray-900",children:"Total:"}),a.jsx("span",{className:"font-bold text-lg text-blue-600",children:er(w)})]})})]})]}),u.payment.paymentTiming==="at_pickup"&&a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(Ei,{className:"h-4 w-4 mr-2 text-green-600"}),"Payment Options"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"radio",name:"paymentOption",value:"pay_now",checked:r.paymentOption==="pay_now",onChange:P=>C("paymentOption",P.target.value),className:"text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Pay Now (",er(w),")"]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"radio",name:"paymentOption",value:"pay_at_pickup",checked:r.paymentOption==="pay_at_pickup",onChange:P=>C("paymentOption",P.target.value),className:"text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Pay at Pickup (",er(w),")"]})]})]})]}),u.payment.paymentTiming==="before_submission"&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-800",children:[a.jsx(Ei,{className:"h-4 w-4"}),a.jsx("span",{children:"Payment required before order submission"})]})}),u.payment.paymentTiming==="at_pickup"&&r.paymentOption==="pay_now"&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-800",children:[a.jsx(Ei,{className:"h-4 w-4"}),a.jsx("span",{children:"You chose to pay now. Payment will be processed immediately."})]})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Iw,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",id:"name",value:r.name,onChange:P=>C("name",P.target.value),className:`block w-full pl-10 pr-3 py-3 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter your full name",disabled:o})]}),s.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Pc,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"email",id:"email",value:r.email,onChange:P=>C("email",P.target.value),className:`block w-full pl-10 pr-3 py-3 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter your email address",disabled:o})]}),s.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.email})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Tc,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"tel",id:"phone",value:r.phone,onChange:P=>C("phone",P.target.value),className:`block w-full pl-10 pr-3 py-3 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s.phone?"border-red-300":"border-gray-300"}`,placeholder:"Enter your phone number",disabled:o})]}),s.phone&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.phone})]}),a.jsx("button",{type:"submit",disabled:o,className:`w-full flex items-center justify-center space-x-2 px-6 py-3 border border-transparent text-base font-medium rounded-md text-white ${o?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"} transition-colors`,children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),a.jsx("span",{children:"Submitting..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(bl,{className:"h-5 w-5"}),a.jsx("span",{children:u.payment.paymentTiming==="before_submission"?"Continue to Payment":"Submit Order"})]})}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:"By submitting this form, you agree to our terms of service and privacy policy."})})]})]})]})})},hb=({job:t,onReset:e})=>{const r=()=>{navigator.clipboard.writeText(t.id)},n=()=>{const s=document.createElement("a");s.href=t.mockupImage,s.download=`mockup-${t.id}.png`,s.click()};return a.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[a.jsx("div",{className:"success-bounce mb-6",children:a.jsx(Cc,{className:"h-20 w-20 text-green-500 mx-auto"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Order Submitted Successfully!"}),a.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Thank you for your order. We'll process your laser engraving job and contact you soon."}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Job Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Job ID:"}),a.jsx("code",{className:"bg-gray-100 px-3 py-1 rounded-md font-mono text-sm",children:t.id}),a.jsx("button",{onClick:r,className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",title:"Copy Job ID",children:a.jsx(ww,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-left",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Product:"}),a.jsx("p",{className:"text-sm text-gray-900",children:t.product.name})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Price:"}),a.jsxs("p",{className:"text-sm text-gray-900",children:["$",t.product.price.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Customer:"}),a.jsx("p",{className:"text-sm text-gray-900",children:t.customerName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.status==="pending"?"bg-yellow-100 text-yellow-800":t.status==="processing"?"bg-blue-100 text-blue-800":t.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Your Mockup"}),a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:t.mockupImage,alt:"Final Mockup",className:"w-full max-w-md mx-auto rounded-lg border border-gray-200"}),a.jsx("button",{onClick:n,className:"absolute top-2 right-2 p-2 bg-white bg-opacity-90 rounded-md shadow-sm hover:bg-opacity-100 transition-all",title:"Download Mockup",children:a.jsx(_t,{className:"h-4 w-4 text-gray-600"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:e,className:"inline-flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[a.jsx(Pw,{className:"h-5 w-5"}),a.jsx("span",{children:"Create Another Order"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[a.jsx("p",{children:"We'll send you an email confirmation shortly."}),a.jsx("p",{children:"Keep your Job ID safe for future reference."})]})]})]})},fb=(t,e,r)=>{const{customerName:n,customerEmail:s,product:i,status:o,createdAt:l}=t,c=new Date(l).toLocaleDateString();return{subject:`Order Confirmation - ${i.name}`,html:`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Order Confirmation</title>
        <style>
          body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            line-height: 1.5; 
            color: #1d1d1f; 
            background-color: #ffffff;
            margin: 0;
            padding: 0;
            font-size: 16px;
          }
          .container { 
            max-width: 600px; 
            margin: 0 auto; 
            background-color: #ffffff;
            padding: 0;
          }
          .header { 
            background: #f5f5f7;
            padding: 60px 40px 40px 40px; 
            text-align: center; 
            border-bottom: 1px solid #e5e5e7;
          }
          .header h1 { 
            margin: 0; 
            font-size: 32px; 
            font-weight: 600;
            letter-spacing: -0.5px;
            color: #1d1d1f;
          }
          .header p { 
            margin: 16px 0 0 0; 
            font-size: 18px;
            color: #86868b;
            font-weight: 400;
          }
          .content { 
            padding: 40px; 
          }
          .section {
            margin-bottom: 40px;
          }
          .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #1d1d1f;
            margin: 0 0 20px 0;
            letter-spacing: -0.3px;
          }
          .order-details { 
            background: #f5f5f7; 
            padding: 24px; 
            border-radius: 8px; 
            margin: 0;
            border: 1px solid #e5e5e7;
          }
          .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e5e5e7;
          }
          .detail-row:last-child {
            border-bottom: none;
          }
          .detail-label {
            font-weight: 500;
            color: #86868b;
            font-size: 14px;
          }
          .detail-value {
            font-weight: 400;
            color: #1d1d1f;
            font-size: 14px;
          }
          .status-badge { 
            background: #f5f5f7;
            color: #1d1d1f;
            padding: 6px 12px; 
            border-radius: 6px; 
            font-size: 12px; 
            font-weight: 500;
            border: 1px solid #e5e5e7;
            text-transform: uppercase;
            letter-spacing: 0.5px;
          }
          .product-info { 
            display: flex; 
            align-items: center; 
            margin: 0;
            padding: 24px;
            background: #f5f5f7;
            border-radius: 8px;
            border: 1px solid #e5e5e7;
          }
          .product-image { 
            width: 60px; 
            height: 60px; 
            object-fit: cover; 
            border-radius: 8px; 
            margin-right: 20px; 
            border: 1px solid #e5e5e7;
          }
          .product-details h4 {
            margin: 0 0 8px 0;
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
          }
          .product-details p {
            margin: 0 0 6px 0;
            font-size: 14px;
            color: #86868b;
            line-height: 1.4;
          }
          .footer { 
            text-align: center; 
            color: #86868b; 
            font-size: 14px; 
            padding: 40px;
            background: #f5f5f7;
            border-top: 1px solid #e5e5e7;
          }
          .footer p {
            margin: 0 0 8px 0;
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>Order Confirmed</h1>
            <p>Thank you for your order, ${n}</p>
          </div>
          
          <div class="content">
            <div class="section">
              <h2 class="section-title">Order Details</h2>
              <div class="order-details">
                <div class="detail-row">
                  <span class="detail-label">Order Date</span>
                  <span class="detail-value">${c}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Status</span>
                  <span class="status-badge">${o}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Customer</span>
                  <span class="detail-value">${n}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Email</span>
                  <span class="detail-value">${s}</span>
                </div>
              </div>
            </div>
            
            <div class="section">
              <h2 class="section-title">Product</h2>
              <div class="product-info">
                ${i.images[0]?`<img src="${i.images[0]}" alt="${i.name}" class="product-image">`:""}
                <div class="product-details">
                  <h4>${i.name}</h4>
                  <p>${i.description}</p>
                  <p><strong>Price:</strong> $${i.price}</p>
                  <p><strong>Surface:</strong> ${i.surfaceTone}</p>
                </div>
              </div>
            </div>
            
            <p style="margin: 0; font-size: 16px; line-height: 1.6; color: #1d1d1f;">
              We'll start processing your laser engraving order right away. You'll receive updates on your order status via email.
            </p>
          </div>
          
          <div class="footer">
            <p>If you have any questions, please contact us at ${r}</p>
            <p> ${new Date().getFullYear()} ${e}. All rights reserved.</p>
          </div>
        </div>
      </body>
      </html>
    `,text:`
Order Confirmation - ${i.name}

Dear ${n},

Thank you for your order! We're excited to start working on your laser engraving project.

Order Details:
- Order Date: ${c}
- Order Status: ${o}
- Product: ${i.name}
- Description: ${i.description}
- Price: $${i.price}
- Surface: ${i.surfaceTone}

We'll start processing your order right away and keep you updated on the progress.

If you have any questions, please contact us at ${r}.

Best regards,
${e}
    `}},pb=(t,e,r)=>{const{customerName:n,product:s}=t;return{subject:`Your Order is Complete! - ${s.name}`,html:`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Order Complete</title>
        <style>
          body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            line-height: 1.5; 
            color: #1d1d1f; 
            background-color: #ffffff;
            margin: 0;
            padding: 0;
            font-size: 16px;
          }
          .container { 
            max-width: 600px; 
            margin: 0 auto; 
            background-color: #ffffff;
            padding: 0;
          }
          .header { 
            background: #f5f5f7;
            padding: 60px 40px 40px 40px; 
            text-align: center; 
            border-bottom: 1px solid #e5e5e7;
          }
          .header h1 { 
            margin: 0; 
            font-size: 32px; 
            font-weight: 600;
            letter-spacing: -0.5px;
            color: #1d1d1f;
          }
          .header p { 
            margin: 16px 0 0 0; 
            font-size: 18px;
            color: #86868b;
            font-weight: 400;
          }
          .content { 
            padding: 40px; 
          }
          .section {
            margin-bottom: 40px;
          }
          .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #1d1d1f;
            margin: 0 0 20px 0;
            letter-spacing: -0.3px;
          }
          .cta { 
            background: #f5f5f7;
            color: #1d1d1f; 
            padding: 24px 30px; 
            text-align: center; 
            border-radius: 8px; 
            margin: 0 0 24px 0; 
            border: 1px solid #e5e5e7;
          }
          .cta h3 { 
            margin: 0 0 8px 0; 
            font-size: 20px; 
            font-weight: 600;
            color: #1d1d1f;
          }
          .cta p { 
            margin: 0; 
            font-size: 16px;
            color: #86868b;
          }
          .checklist {
            background: #f5f5f7;
            padding: 24px;
            border-radius: 8px;
            margin: 0;
            border: 1px solid #e5e5e7;
          }
          .checklist h4 {
            margin: 0 0 16px 0;
            font-size: 16px;
            font-weight: 600;
            color: #1d1d1f;
          }
          .checklist ul {
            margin: 0;
            padding: 0;
            list-style: none;
          }
          .checklist li {
            margin: 12px 0;
            padding-left: 24px;
            position: relative;
            font-size: 14px;
            color: #86868b;
          }
          .checklist li:before {
            content: '';
            position: absolute;
            left: 0;
            top: 6px;
            width: 6px;
            height: 6px;
            background: #86868b;
            border-radius: 50%;
          }
          .footer { 
            text-align: center; 
            color: #86868b; 
            font-size: 14px; 
            padding: 40px;
            background: #f5f5f7;
            border-top: 1px solid #e5e5e7;
          }
          .footer p {
            margin: 0 0 8px 0;
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>Order Complete</h1>
            <p>${n}, your laser engraving is ready!</p>
          </div>
          
          <div class="content">
            <div class="section">
              <h2 class="section-title">Great News!</h2>
              <p style="margin: 0 0 24px 0; font-size: 16px; line-height: 1.6; color: #1d1d1f;">
                Your ${s.name} has been successfully engraved and is ready for pickup!
              </p>
            </div>
            
            <div class="cta">
              <h3>Ready for Pickup</h3>
              <p>Please visit our location to collect your order.</p>
            </div>
            
            <div class="checklist">
              <h4>What to bring:</h4>
              <ul>
                <li>Photo ID</li>
                <li>Order confirmation (this email)</li>
                <li>Payment method (if paying at pickup)</li>
              </ul>
            </div>
            
            <p style="margin: 24px 0 0 0; font-size: 16px; line-height: 1.6; color: #1d1d1f;">
              We can't wait for you to see your finished product!
            </p>
          </div>
          
          <div class="footer">
            <p>If you have any questions, please contact us at ${r}</p>
            <p> ${new Date().getFullYear()} ${e}. All rights reserved.</p>
          </div>
        </div>
      </body>
      </html>
    `,text:`
Your Order is Complete! - ${s.name}

Dear ${n},

Great news! Your ${s.name} has been successfully engraved and is ready for pickup!

Your laser engraving is complete and ready for collection. Please visit our location to pick up your order.

What to bring:
- Photo ID
- Order confirmation (this email)
- Payment method (if paying at pickup)

We can't wait for you to see your finished product!

Best regards,
${e}
    `}},mb=(t,e,r)=>{const{customerName:n,product:s}=t;return{subject:`Order Picked Up - ${s.name}`,html:`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Order Picked Up</title>
        <style>
          body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            line-height: 1.5; 
            color: #1d1d1f; 
            background-color: #ffffff;
            margin: 0;
            padding: 0;
            font-size: 16px;
          }
          .container { 
            max-width: 600px; 
            margin: 0 auto; 
            background-color: #ffffff;
            padding: 0;
          }
          .header { 
            background: #f5f5f7;
            padding: 60px 40px 40px 40px; 
            text-align: center; 
            border-bottom: 1px solid #e5e5e7;
          }
          .header h1 { 
            margin: 0; 
            font-size: 32px; 
            font-weight: 600;
            letter-spacing: -0.5px;
            color: #1d1d1f;
          }
          .header p { 
            margin: 16px 0 0 0; 
            font-size: 18px;
            color: #86868b;
            font-weight: 400;
          }
          .content { 
            padding: 40px; 
          }
          .section {
            margin-bottom: 40px;
          }
          .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #1d1d1f;
            margin: 0 0 20px 0;
            letter-spacing: -0.3px;
          }
          .feedback { 
            background: #f5f5f7; 
            padding: 24px; 
            border-radius: 8px; 
            margin: 0; 
            text-align: center;
            border: 1px solid #e5e5e7;
          }
          .feedback h3 { 
            margin: 0 0 12px 0; 
            font-size: 18px; 
            font-weight: 600;
            color: #1d1d1f;
          }
          .feedback p { 
            margin: 0; 
            font-size: 14px;
            color: #86868b;
            line-height: 1.5;
          }
          .footer { 
            text-align: center; 
            color: #86868b; 
            font-size: 14px; 
            padding: 40px;
            background: #f5f5f7;
            border-top: 1px solid #e5e5e7;
          }
          .footer p {
            margin: 0 0 8px 0;
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>Order Picked Up</h1>
            <p>Thank you for collecting your order, ${n}</p>
          </div>
          
          <div class="content">
            <div class="section">
              <h2 class="section-title">Order Successfully Collected</h2>
              <p style="margin: 0 0 24px 0; font-size: 16px; line-height: 1.6; color: #1d1d1f;">
                We're glad you've received your ${s.name} laser engraving!
              </p>
            </div>
            
            <div class="section">
              <p style="margin: 0 0 24px 0; font-size: 16px; line-height: 1.6; color: #1d1d1f;">
                We hope you're happy with the quality and craftsmanship of your order.
              </p>
            </div>
            
            <div class="feedback">
              <h3>We'd Love Your Feedback!</h3>
              <p>Your satisfaction is important to us. If you have a moment, we'd appreciate hearing about your experience.</p>
            </div>
            
            <p style="margin: 24px 0 0 0; font-size: 16px; line-height: 1.6; color: #1d1d1f;">
              Thank you for choosing ${e} for your laser engraving needs!
            </p>
          </div>
          
          <div class="footer">
            <p>If you have any questions, please contact us at ${r}</p>
            <p> ${new Date().getFullYear()} ${e}. All rights reserved.</p>
          </div>
        </div>
      </body>
      </html>
    `,text:`
Order Picked Up - ${s.name}

Dear ${n},

Thank you for collecting your ${s.name} laser engraving!

We're glad you've received your order and hope you're happy with the quality and craftsmanship.

We'd love your feedback! Your satisfaction is important to us, and we'd appreciate hearing about your experience.

Thank you for choosing ${e} for your laser engraving needs!

Best regards,
${e}
    `}},Lc=async(t,e,r,n,s,i)=>{try{let o,l;if(s&&i)o=s,l=i;else{const u=await Hs();if(!u)return console.error("Failed to load settings from database"),!1;if(!u.email.emailNotifications)return console.log("Email notifications disabled"),!1;if(!u.email.resendApiKey)return console.warn("Resend API key not configured"),!1;if(!u.email.fromEmail)return console.warn("From email not configured"),!1;o=u.email.fromEmail,l=u.email.resendApiKey}if(console.log(" Sending email via backend API:",{to:t,subject:e,fromEmail:o,hasHtml:!!r,hasText:!!n}),!l.startsWith("re_"))return console.error('Invalid Resend API key format. Should start with "re_"'),!1;const c=await fetch("http://localhost:3004/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,subject:e,html:r,text:n,fromEmail:o,resendApiKey:l})});if(!c.ok){const u=await c.json();return console.error("Backend API error:",c.status,u),!1}const d=await c.json();return console.log(" Email sent successfully via backend:",d),!0}catch(o){return console.error("Error sending email:",o),!1}},Nl=async t=>{try{console.log("Sending order confirmation email for job:",t.id);const e=await Hs();if(!e)return console.error("Failed to load settings from database"),!1;const{business:r,email:n}=e;if(!n.resendApiKey||!n.fromEmail)return console.error("Email settings not configured"),!1;const s=`Order Confirmation - ${t.customerName}`,{html:i,text:o}=fb(t,r.businessName,r.businessEmail),l=await Lc(t.customerEmail,s,i,o,n.fromEmail,n.resendApiKey);return l?console.log("Order confirmation email sent successfully"):console.error("Failed to send order confirmation email"),l}catch(e){return console.error("Error sending order confirmation email:",e),!1}},gb=async t=>{try{console.log("Sending order completion email for job:",t.id);const e=await Hs();if(!e)return console.error("Failed to load settings from database"),!1;const{business:r,email:n}=e;if(!n.resendApiKey||!n.fromEmail)return console.error("Email settings not configured"),!1;const s=`Your Order is Complete! - ${t.customerName}`,{html:i,text:o}=pb(t,r.businessName,r.businessEmail),l=await Lc(t.customerEmail,s,i,o,n.fromEmail,n.resendApiKey);return l?console.log("Order completion email sent successfully"):console.error("Failed to send order completion email"),l}catch(e){return console.error("Error sending order completion email:",e),!1}},yb=async t=>{try{console.log("Sending order pickup email for job:",t.id);const e=await Hs();if(!e)return console.error("Failed to load settings from database"),!1;const{business:r,email:n}=e;if(!n.resendApiKey||!n.fromEmail)return console.error("Email settings not configured"),!1;const s=`Order Picked Up - ${t.customerName}`,{html:i,text:o}=mb(t,r.businessName,r.businessEmail),l=await Lc(t.customerEmail,s,i,o,n.fromEmail,n.resendApiKey);return l?console.log("Order pickup email sent successfully"):console.error("Failed to send order pickup email"),l}catch(e){return console.error("Error sending order pickup email:",e),!1}},To=async(t,e,r,n,s)=>{try{if(!r||!n||!s){const l=await Et();if(!l)throw new Error("Settings not loaded");r=r||l.sms.twilioPhoneNumber,n=n||l.sms.twilioAccountSid,s=s||l.sms.twilioAuthToken}if(!r||!n||!s)throw new Error("SMS credentials not configured");const i=await fetch("http://localhost:3004/api/send-sms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,message:e,fromPhone:r,smsEnabled:!0,twilioAccountSid:n,twilioAuthToken:s})});if(!i.ok){const l=await i.json();throw new Error(l.error||"Failed to send SMS")}const o=await i.json();return console.log(" SMS sent successfully via backend:",o),o}catch(i){throw console.error(" Error sending SMS:",i),i}},vb=(t,e,r,n)=>`Hi ${t}! Your order #${e} for ${r} has been confirmed. Total: ${n}. We'll notify you when it's ready for pickup.`,xb=(t,e,r)=>`Hi ${t}! Your order #${e} for ${r} is complete and ready for pickup. Please visit us to collect your order.`,wb=(t,e,r)=>`Hi ${t}! Thank you for picking up your order #${e} for ${r}. We hope you love it!`,Md=async t=>{try{const e=await Et();if(!e){console.warn("Settings not loaded, skipping SMS");return}const{sms:r}=e;if(!r.smsNotifications){console.log(" SMS notifications disabled, skipping");return}if(!r.twilioPhoneNumber||!r.twilioAccountSid||!r.twilioAuthToken){console.warn("SMS credentials not configured, skipping SMS");return}const n=vb(t.customerName,t.id,t.product.name,`$${t.product.price.toFixed(2)}`);console.log(" Sending order confirmation SMS to:",t.customerPhone),await To(t.customerPhone,n,r.twilioPhoneNumber,r.twilioAccountSid,r.twilioAuthToken),console.log(" Order confirmation SMS sent successfully")}catch(e){console.error(" Failed to send order confirmation SMS:",e)}},bb=async t=>{try{const e=await Et();if(!e){console.warn("Settings not loaded, skipping SMS");return}const{sms:r}=e;if(!r.smsNotifications){console.log(" SMS notifications disabled, skipping");return}if(!r.twilioPhoneNumber||!r.twilioAccountSid||!r.twilioAuthToken){console.warn("SMS credentials not configured, skipping SMS");return}const n=xb(t.customerName,t.id,t.product.name);console.log(" Sending order completion SMS to:",t.customerPhone),await To(t.customerPhone,n,r.twilioPhoneNumber,r.twilioAccountSid,r.twilioAuthToken),console.log(" Order completion SMS sent successfully")}catch(e){console.error(" Failed to send order completion SMS:",e)}},kb=async t=>{try{const e=await Et();if(!e){console.warn("Settings not loaded, skipping SMS");return}const{sms:r}=e;if(!r.smsNotifications){console.log(" SMS notifications disabled, skipping");return}if(!r.twilioPhoneNumber||!r.twilioAccountSid||!r.twilioAuthToken){console.warn("SMS credentials not configured, skipping SMS");return}const n=wb(t.customerName,t.id,t.product.name);console.log(" Sending order pickup SMS to:",t.customerPhone),await To(t.customerPhone,n,r.twilioPhoneNumber,r.twilioAccountSid,r.twilioAuthToken),console.log(" Order pickup SMS sent successfully")}catch(e){console.error(" Failed to send order pickup SMS:",e)}},Sb=async(t,e)=>{try{const r=await Et();if(!r)throw new Error("Settings not loaded");const{sms:n}=r;if(!n.smsNotifications)throw new Error("SMS notifications are disabled");if(!n.twilioPhoneNumber||!n.twilioAccountSid||!n.twilioAuthToken)throw new Error("SMS credentials not configured");console.log(" Sending test SMS to:",t);const s=await To(t,e,n.twilioPhoneNumber,n.twilioAccountSid,n.twilioAuthToken);return console.log(" Test SMS sent successfully"),s}catch(r){throw console.error(" Failed to send test SMS:",r),r}},_b=()=>{const{addJob:t}=Bt(),[e,r]=_.useState("product"),[n,s]=_.useState(null),[i,o]=_.useState(""),[l,c]=_.useState(""),[d,u]=_.useState(null),[h,f]=_.useState([]),v=E=>{s(E),r("upload")},y=E=>{o(E),r("editor")},b=E=>{c(E)},w=E=>{f(E)},p=()=>{r("product"),s(null),o(""),c(""),u(null),f([])},g=async E=>{if(!n||!i||!l)return;const j={customerName:E.name,customerEmail:E.email,customerPhone:E.phone,product:n,uploadedImage:i,processedImage:l,mockupImage:"",imagePosition:{x:0,y:0,scale:1,rotation:0},textLayers:h,status:"pending",createdAt:new Date().toISOString()},C={id:"temp-"+Date.now().toString(),...j};u(C),await m(j)},m=async E=>{if(!n)return;const j=document.createElement("canvas"),C=j.getContext("2d");if(C&&n){const P=new Image;P.onload=()=>{if(j.width=P.width,j.height=P.height,C.drawImage(P,0,0),l){const L=new Image;L.onload=()=>{const{x:A,y:W,width:N,height:M}=n.engravingBoundary,D=A/100*j.width,B=W/100*j.height,J=N/100*j.width,F=M/100*j.height,k=D+J/2,S=B+F/2,O=L.width/L.height,R=J/F;let $,U;O>R?($=J/L.width,U=$):(U=F/L.height,$=U),C.save(),C.translate(k,S),C.scale($,U);const ne=L.width,re=L.height;C.drawImage(L,-ne/2,-re/2,ne,re),C.restore(),E.textLayers&&E.textLayers.length>0&&(console.log("Drawing text layers:",E.textLayers),console.log("Canvas dimensions:",j.width,"x",j.height),console.log("Engraving boundary:",n.engravingBoundary),E.textLayers.forEach((Q,z)=>{C.save();const xt=n.engravingBoundary.x*j.width/100,Ft=n.engravingBoundary.y*j.height/100,Wr=n.engravingBoundary.width*j.width/100,Wt=n.engravingBoundary.height*j.height/100,Ze=xt+Q.position.x,Ct=Ft+Q.position.y;console.log(`Text layer ${z}:`,{originalPosition:Q.position,boundaryCoords:{boundaryX:xt,boundaryY:Ft,boundaryWidth:Wr,boundaryHeight:Wt},finalPosition:{mockupX:Ze,mockupY:Ct}}),C.translate(Ze,Ct),C.rotate(Q.rotation*Math.PI/180),C.scale(Q.scale,Q.scale);const An=Q.isBold?"bold":"normal",Oo=Q.isItalic?"italic":"normal";C.font=`${Oo} ${An} ${Q.fontSize}px ${Q.font}`,C.fillStyle=Q.color,C.textAlign="center",C.textBaseline="middle",C.fillText(Q.text,0,0),C.restore()}));const ee=j.toDataURL("image/png"),K={...E,mockupImage:ee};t(K).then(async()=>{try{const z=await Nl({id:"temp-"+Date.now().toString(),...K});console.log(z?"Order confirmation email sent successfully":"Failed to send order confirmation email")}catch(z){console.error("Error sending order confirmation email:",z)}try{const z={id:"temp-"+Date.now().toString(),...K};await Md(z),console.log("Order confirmation SMS sent successfully")}catch(z){console.error("Error sending order confirmation SMS:",z)}const Q={id:"temp-"+Date.now().toString(),...K};u(Q),r("success")}).catch(Q=>{console.error("Error adding job:",Q)})},L.src=l}else{E.textLayers&&E.textLayers.length>0&&(console.log("Drawing text layers (no processed image):",E.textLayers),console.log("Canvas dimensions:",j.width,"x",j.height),console.log("Engraving boundary:",n.engravingBoundary),E.textLayers.forEach((W,N)=>{C.save();const M=n.engravingBoundary.x*j.width/100,D=n.engravingBoundary.y*j.height/100,B=n.engravingBoundary.width*j.width/100,J=n.engravingBoundary.height*j.height/100,F=M+W.position.x,k=D+W.position.y;console.log(`Text layer ${N} (no processed image):`,{originalPosition:W.position,boundaryCoords:{boundaryX:M,boundaryY:D,boundaryWidth:B,boundaryHeight:J},finalPosition:{mockupX:F,mockupY:k}}),C.translate(F,k),C.rotate(W.rotation*Math.PI/180),C.scale(W.scale,W.scale);const S=W.isBold?"bold":"normal",O=W.isItalic?"italic":"normal";C.font=`${O} ${S} ${W.fontSize}px ${W.font}`,C.fillStyle=W.color,C.textAlign="center",C.textBaseline="middle",C.fillText(W.text,0,0),C.restore()}));const L=j.toDataURL("image/png"),A={...E,mockupImage:L};t(A).then(async()=>{try{const N=await Nl({id:"temp-"+Date.now().toString(),...A});console.log(N?"Order confirmation email sent successfully":"Failed to send order confirmation email")}catch(N){console.error("Error sending order confirmation email:",N)}try{const N={id:"temp-"+Date.now().toString(),...A};await Md(N),console.log("Order confirmation SMS sent successfully")}catch(N){console.error("Error sending order confirmation SMS:",N)}const W={id:"temp-"+Date.now().toString(),...A};u(W),r("success")}).catch(W=>{console.error("Error adding job:",W)})}},P.src=n.mockupImage}},x=()=>{switch(e){case"product":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Laser Engraving Mockup Generator"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Upload your image, select a product, and create a professional mockup for laser engraving."})]}),a.jsx(Uw,{onProductSelected:v})]});case"upload":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Upload Your Image"}),a.jsxs("p",{className:"text-lg text-gray-600",children:["Upload an image to engrave on ",n==null?void 0:n.name]})]}),a.jsx(Bw,{onImageUploaded:y,surfaceTone:(n==null?void 0:n.surfaceTone)||"light",onProcessedImage:b})]});case"editor":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Position Your Design"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Drag, resize, and rotate your design to position it perfectly on the product"})]}),a.jsx(Cd,{onContinue:()=>r("form"),selectedProduct:n,processedImage:l,isAdmin:!1,currentJob:null,onJobUpdate:()=>{},onDesignUpdate:w})]});case"form":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Complete Your Order"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Provide your contact information to submit your laser engraving job"})]}),a.jsx(db,{onSubmit:g,selectedProduct:n})]});case"mockup":return a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsx(Cd,{onContinue:()=>{},selectedProduct:n,processedImage:l,isAdmin:!1,currentJob:d,onJobUpdate:u,onDesignUpdate:w})});case"success":return a.jsx(hb,{job:d,onReset:p});default:return null}};return a.jsxs("div",{className:"min-h-screen",children:[e!=="success"&&a.jsx("div",{className:"flex justify-center mb-8",children:["product","upload","editor","form","mockup"].map((E,j)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${e===E?"bg-blue-600 text-white":j<["product","upload","editor","form","mockup"].indexOf(e)?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:j+1}),j<4&&a.jsx("div",{className:`w-16 h-1 ${j<["product","upload","editor","form","mockup"].indexOf(e)?"bg-green-500":"bg-gray-200"}`})]},E))}),x()]})},jb=()=>{const[t,e]=_.useState({username:"",password:""}),[r,n]=_.useState(!1),[s,i]=_.useState(""),[o,l]=_.useState(!1),{loginAdmin:c}=Bt(),d=ap(),u=async f=>{f.preventDefault(),i(""),l(!0);try{t.username==="admin"&&t.password==="admin123"?(c(),d("/admin/panel")):i("Invalid username or password")}catch{i("Login failed. Please try again.")}finally{l(!1)}},h=(f,v)=>{e(y=>({...y,[f]:v})),s&&i("")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:a.jsx(jw,{className:"h-6 w-6 text-blue-600"})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Admin Login"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access the admin panel"})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),a.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:t.username,onChange:f=>h("username",f.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter username",disabled:o})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("input",{id:"password",name:"password",type:r?"text":"password",required:!0,value:t.password,onChange:f=>h("password",f.target.value),className:"appearance-none relative block w-full px-3 py-2 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter password",disabled:o}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!r),children:r?a.jsx(kw,{className:"h-5 w-5 text-gray-400"}):a.jsx($p,{className:"h-5 w-5 text-gray-400"})})]})]})]}),s&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:a.jsx("p",{className:"text-sm text-red-600",children:s})}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:o,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ${o?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"} transition-colors`,children:o?a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Sign In"})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:a.jsxs("p",{className:"text-xs text-blue-800 text-center",children:[a.jsx("strong",{children:"Demo Credentials:"}),a.jsx("br",{}),"Username: admin",a.jsx("br",{}),"Password: admin123"]})})]})]})})},hm=V.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:vt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));hm.displayName="Textarea";const fm=V.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:vt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));fm.displayName="Card";const Nb=V.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:vt("flex flex-col space-y-1.5 p-6",t),...e}));Nb.displayName="CardHeader";const Eb=V.forwardRef(({className:t,...e},r)=>a.jsx("h3",{ref:r,className:vt("text-2xl font-semibold leading-none tracking-tight",t),...e}));Eb.displayName="CardTitle";const Cb=V.forwardRef(({className:t,...e},r)=>a.jsx("p",{ref:r,className:vt("text-sm text-muted-foreground",t),...e}));Cb.displayName="CardDescription";const pm=V.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:vt("p-6 pt-0",t),...e}));pm.displayName="CardContent";const Pb=V.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:vt("flex items-center p-6 pt-0",t),...e}));Pb.displayName="CardFooter";const Ud=()=>{const{products:t,addProduct:e,updateProduct:r,deleteProduct:n}=Bt(),[s,i]=_.useState(!1),[o,l]=_.useState(null),[c,d]=_.useState({name:"",description:"",price:0,surfaceTone:"light",images:[],mockupImage:null,engravingBoundary:{x:0,y:0,width:100,height:100}}),[u,h]=_.useState([]),[f,v]=_.useState(""),[y,b]=_.useState({startX:0,startY:0,endX:0,endY:0,isSelecting:!1}),[w,p]=_.useState(""),g=_.useRef(null),m=(N,M)=>{d(D=>({...D,[N]:M}))},x=(N,M)=>{const D=N.target.files;if(D)if(M==="images")d(B=>({...B,images:Array.from(D)}));else{const B=D[0];d(F=>({...F,mockupImage:B}));const J=new FileReader;J.onload=F=>{var k;p((k=F.target)==null?void 0:k.result)},J.readAsDataURL(B)}},E=N=>{const M=g.current;if(!M)return;const D=M.getBoundingClientRect(),B=(N.clientX-D.left)/D.width*100,J=(N.clientY-D.top)/D.height*100;b(F=>({...F,startX:B,startY:J,endX:B,endY:J,isSelecting:!0}))},j=N=>{if(!y.isSelecting)return;const M=g.current;if(!M)return;const D=M.getBoundingClientRect(),B=(N.clientX-D.left)/D.width*100,J=(N.clientY-D.top)/D.height*100;b(F=>({...F,endX:B,endY:J}))},C=()=>{if(!y.isSelecting)return;const{startX:N,startY:M,endX:D,endY:B}=y,J=Math.min(N,D),F=Math.min(M,B),k=Math.abs(D-N),S=Math.abs(B-M);d(O=>({...O,engravingBoundary:{x:J,y:F,width:k,height:S}})),b(O=>({...O,isSelecting:!1}))},P=()=>{const N=g.current;if(!N||!w)return;const M=N.getContext("2d");if(!M)return;M.clearRect(0,0,N.width,N.height);const D=new Image;D.onload=()=>{N.width=D.width,N.height=D.height,M.drawImage(D,0,0);const{x:B,y:J,width:F,height:k}=c.engravingBoundary,S=B/100*N.width,O=J/100*N.height,R=F/100*N.width,$=k/100*N.height;if(M.strokeStyle="#ef4444",M.lineWidth=2,M.setLineDash([5,5]),M.strokeRect(S,O,R,$),M.setLineDash([]),y.isSelecting){const U=y.startX/100*N.width,ne=y.startY/100*N.height,re=y.endX/100*N.width,ee=y.endY/100*N.height;M.strokeStyle="#3b82f6",M.lineWidth=2,M.setLineDash([3,3]),M.strokeRect(Math.min(U,re),Math.min(ne,ee),Math.abs(re-U),Math.abs(ee-ne)),M.setLineDash([])}},D.src=w};V.useEffect(()=>{P()},[w,c.engravingBoundary,y]);const L=async N=>{if(N.preventDefault(),!o&&!c.mockupImage){alert("Please upload a mockup image");return}if(o&&!c.mockupImage&&!f){alert("Please upload a mockup image");return}let M=[],D="";if(o)M=c.images.length>0?await Promise.all(c.images.map(J=>new Promise(F=>{const k=new FileReader;k.onload=S=>{var O;return F((O=S.target)==null?void 0:O.result)},k.readAsDataURL(J)}))):u,D=c.mockupImage?await new Promise(J=>{const F=new FileReader;F.onload=k=>{var S;return J((S=k.target)==null?void 0:S.result)},F.readAsDataURL(c.mockupImage)}):f;else{const J=c.images.map(S=>new Promise(O=>{const R=new FileReader;R.onload=$=>{var U;return O((U=$.target)==null?void 0:U.result)},R.readAsDataURL(S)})),F=new Promise(S=>{const O=new FileReader;O.onload=R=>{var $;return S(($=R.target)==null?void 0:$.result)},O.readAsDataURL(c.mockupImage)}),k=await Promise.all([...J,F]);D=k.pop(),M=k}const B={name:c.name,description:c.description,price:c.price,surfaceTone:c.surfaceTone,images:M,mockupImage:D,engravingBoundary:c.engravingBoundary};o?r({...B,id:o.id}):e(B),A(),i(!1)},A=()=>{d({name:"",description:"",price:0,surfaceTone:"light",images:[],mockupImage:null,engravingBoundary:{x:0,y:0,width:100,height:100}}),l(null),p(""),h([]),v(""),b({startX:0,startY:0,endX:0,endY:0,isSelecting:!1})},W=N=>{l(N),d({name:N.name,description:N.description,price:N.price,surfaceTone:N.surfaceTone,images:[],mockupImage:null,engravingBoundary:N.engravingBoundary}),h(N.images),v(N.mockupImage),p(N.mockupImage),i(!0)};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Product Management"}),a.jsxs(Re,{onClick:()=>i(!0),children:[a.jsx(Lp,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(N=>a.jsxs(fm,{className:"overflow-hidden",children:[a.jsx("div",{className:"aspect-video bg-gray-100",children:N.images[0]&&a.jsx("img",{src:N.images[0],alt:N.name,className:"w-full h-full object-cover"})}),a.jsxs(pm,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-lg mb-2",children:N.name}),a.jsx("p",{className:"text-gray-600 text-sm mb-2",children:N.description}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("span",{className:"text-lg font-bold",children:["$",N.price]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs ${N.surfaceTone==="light"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:N.surfaceTone})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(Re,{variant:"outline",size:"sm",onClick:()=>W(N),children:[a.jsx(Cw,{className:"h-4 w-4 mr-1"}),"Edit"]}),a.jsxs(Re,{variant:"outline",size:"sm",onClick:()=>n(N.id),className:"text-red-600 hover:text-red-700",children:[a.jsx(Up,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]},N.id))}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:o?"Edit Product":"Add Product"}),a.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),a.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Name"}),a.jsx(et,{value:c.name,onChange:N=>m("name",N.target.value),placeholder:"Enter product name",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price ($)"}),a.jsx(et,{type:"number",value:c.price,onChange:N=>m("price",parseFloat(N.target.value)),placeholder:"0.00",min:"0",step:"0.01",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),a.jsx(hm,{value:c.description,onChange:N=>m("description",N.target.value),placeholder:"Enter product description",rows:3,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Surface Type"}),a.jsxs(Rc,{value:c.surfaceTone,onChange:N=>m("surfaceTone",N.target.value),required:!0,children:[a.jsx("option",{value:"light",children:"Light"}),a.jsx("option",{value:"dark",children:"Dark"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Images"}),o&&u.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current images:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((N,M)=>a.jsx("div",{className:"relative",children:a.jsx("img",{src:N,alt:`Product ${M+1}`,className:"w-16 h-16 object-cover rounded border"})},M))})]}),a.jsx(et,{type:"file",multiple:!0,accept:"image/*",onChange:N=>x(N,"images"),required:!o}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[o?"Upload new images to replace existing ones (optional)":"Select multiple images for product showcase",o&&u.length>0&&a.jsx("span",{className:"block text-blue-600 mt-1",children:" Existing images will be preserved if no new ones are uploaded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Flat Mockup Image"}),o&&f&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current mockup:"}),a.jsx("img",{src:f,alt:"Current mockup",className:"w-32 h-32 object-cover rounded border"})]}),a.jsx(et,{type:"file",accept:"image/*",onChange:N=>x(N,"mockupImage"),required:!o}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[o?"Upload new mockup to replace existing one (optional)":"This image will be used as the design canvas",o&&f&&a.jsx("span",{className:"block text-blue-600 mt-1",children:" Existing mockup will be preserved if no new one is uploaded"})]})]}),w&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Set Engraving Boundaries"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Click and drag on the flat product image to set the area where engravings can be placed."}),a.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[a.jsx("canvas",{ref:g,className:"border border-gray-300 rounded cursor-crosshair max-w-full h-auto",onMouseDown:E,onMouseMove:j,onMouseUp:C}),a.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"X"}),a.jsx(et,{type:"number",value:c.engravingBoundary.x.toFixed(1),onChange:N=>m("engravingBoundary",{...c.engravingBoundary,x:parseFloat(N.target.value)}),step:"0.1",min:"0",max:"100",className:"text-sm"}),a.jsx("span",{className:"text-xs text-gray-500",children:"%"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Y"}),a.jsx(et,{type:"number",value:c.engravingBoundary.y.toFixed(1),onChange:N=>m("engravingBoundary",{...c.engravingBoundary,y:parseFloat(N.target.value)}),step:"0.1",min:"0",max:"100",className:"text-sm"}),a.jsx("span",{className:"text-xs text-gray-500",children:"%"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Width"}),a.jsx(et,{type:"number",value:c.engravingBoundary.width.toFixed(1),onChange:N=>m("engravingBoundary",{...c.engravingBoundary,width:parseFloat(N.target.value)}),step:"0.1",min:"0",max:"100",className:"text-sm"}),a.jsx("span",{className:"text-xs text-gray-500",children:"%"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Height"}),a.jsx(et,{type:"number",value:c.engravingBoundary.height.toFixed(1),onChange:N=>m("engravingBoundary",{...c.engravingBoundary,height:parseFloat(N.target.value)}),step:"0.1",min:"0",max:"100",className:"text-sm"}),a.jsx("span",{className:"text-xs text-gray-500",children:"%"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[a.jsx(Re,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),a.jsx(Re,{type:"submit",children:o?"Update Product":"Create Product"})]})]})]})})})]})},Tb=()=>{const{jobs:t,updateJob:e}=Bt(),[r,n]=_.useState(null),[s,i]=_.useState("all"),o=t.filter(u=>s==="all"||u.status===s),l=async(u,h)=>{try{const f=t.find(y=>y.id===u);if(!f){alert("Job not found");return}const v={...f,status:h};if(await e(v),h==="completed"){try{await gb(v),console.log("Order completion email sent successfully")}catch(y){console.error("Failed to send order completion email:",y)}try{await bb(v),console.log("Order completion SMS sent successfully")}catch(y){console.error("Failed to send order completion SMS:",y)}}else if(h==="picked_up"){try{await yb(v),console.log("Order pickup email sent successfully")}catch(y){console.error("Failed to send order pickup email:",y)}try{await kb(v),console.log("Order pickup SMS sent successfully")}catch(y){console.error("Failed to send order pickup SMS:",y)}}}catch(f){console.error("Error updating job:",f),alert("Failed to update job status")}},c=u=>{switch(u){case"pending":return a.jsx(fa,{className:"h-4 w-4 text-yellow-500"});case"processing":return a.jsx(fa,{className:"h-4 w-4 text-blue-500"});case"completed":return a.jsx(Cc,{className:"h-4 w-4 text-green-500"});case"cancelled":return a.jsx(Aw,{className:"h-4 w-4 text-red-500"});default:return a.jsx(fa,{className:"h-4 w-4 text-gray-500"})}},d=u=>{switch(u){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Order Management"}),a.jsxs("select",{value:s,onChange:u=>i(u.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Orders"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"processing",children:"Processing"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(u=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",u.id]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.customerName}),a.jsx("div",{className:"text-sm text-gray-500",children:u.customerEmail}),a.jsx("div",{className:"text-sm text-gray-500",children:u.customerPhone})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.product.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:["$",u.product.price.toFixed(2)]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[c(u.status),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${d(u.status)}`,children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(u.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>n(u),className:"text-blue-600 hover:text-blue-900",children:a.jsx($p,{className:"h-4 w-4"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l(u.id,"pending"),className:`px-3 py-1 text-xs rounded ${u.status==="pending"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Pending"}),a.jsx("button",{onClick:()=>l(u.id,"processing"),className:`px-3 py-1 text-xs rounded ${u.status==="processing"?"bg-yellow-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Processing"}),a.jsx("button",{onClick:()=>l(u.id,"completed"),className:`px-3 py-1 text-xs rounded ${u.status==="completed"?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Completed"}),a.jsx("button",{onClick:()=>l(u.id,"picked_up"),className:`px-3 py-1 text-xs rounded ${u.status==="picked_up"?"bg-purple-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Picked Up"}),a.jsx("button",{onClick:()=>l(u.id,"cancelled"),className:`px-3 py-1 text-xs rounded ${u.status==="cancelled"?"bg-red-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancelled"})]})]})})]},u.id))})]})}),o.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ci,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Orders Found"}),a.jsx("p",{className:"text-gray-500",children:s==="all"?"No orders have been placed yet.":`No orders with status "${s}".`})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Order Details - #",r.id]}),a.jsx("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Customer Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Name:"})," ",r.customerName]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Email:"})," ",r.customerEmail]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Phone:"})," ",r.customerPhone]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Product Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Product:"})," ",r.product.name]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Price:"})," $",r.product.price.toFixed(2)]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Surface:"})," ",r.product.surfaceTone]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Order Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Status:"}),a.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-medium rounded-full ${d(r.status)}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(r.createdAt).toLocaleString()]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Job ID:"})," ",r.id]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Actions"}),a.jsx("div",{className:"space-y-2",children:a.jsxs("select",{value:r.status,onChange:u=>l(r.id,u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"processing",children:"Processing"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Assets & Downloads"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:()=>{const u=document.createElement("a");u.href=r.uploadedImage,u.download=`original-image-${r.id}.png`,u.click()},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:"Original Image"})]}),a.jsxs("button",{onClick:()=>{const u=document.createElement("a");u.href=r.processedImage,u.download=`processed-image-${r.id}.png`,u.click()},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:"Processed Image"})]}),a.jsxs("button",{onClick:()=>{const u=document.createElement("a");u.href=r.mockupImage,u.download=`mockup-${r.id}.png`,u.click()},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:"Mockup"})]})]}),r.textLayers&&r.textLayers.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsxs("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:["Text Layers (",r.textLayers.length,")"]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[a.jsx("div",{className:"space-y-2 mb-3",children:r.textLayers.map((u,h)=>a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("span",{className:"font-medium",children:["Text ",h+1,":"]}),' "',u.text,'" - ',u.font," ",u.fontSize,"px",u.isBold&&a.jsx("span",{className:"text-blue-600 ml-1",children:"Bold"}),u.isItalic&&a.jsx("span",{className:"text-blue-600 ml-1",children:"Italic"})]},u.id))}),a.jsxs("button",{onClick:()=>{const{width:u,height:h}=r.product.engravingBoundary,f=u/100*800,v=h/100*600;let y=`<svg width="${f}" height="${v}" xmlns="http://www.w3.org/2000/svg">`;r.textLayers.forEach(g=>{const m=g.isBold?"bold":"normal",x=g.isItalic?"italic":"normal";y+=`
                              <text 
                                x="${g.position.x}" 
                                y="${g.position.y+g.fontSize/2}" 
                                font-family="${g.font}" 
                                font-size="${g.fontSize}" 
                                font-weight="${m}" 
                                font-style="${x}" 
                                fill="${g.color}"
                                text-anchor="middle"
                                transform="rotate(${g.rotation} ${g.position.x} ${g.position.y})"
                              >${g.text}</text>
                            `}),y+="</svg>";const b=new Blob([y],{type:"image/svg+xml"}),w=URL.createObjectURL(b),p=document.createElement("a");p.href=w,p.download=`text-layers-${r.id}.svg`,p.click(),URL.revokeObjectURL(w)},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:"Download Text as SVG"})]})]})]})]})]})})})]})},Ob=()=>{const{jobs:t}=Bt(),[e,r]=_.useState(null),n=Array.from(new Set(t.map(i=>i.customerEmail))).map(i=>{const o=t.filter(c=>c.customerEmail===i),l=o[0];return{email:i,name:l.customerName,phone:l.customerPhone,totalOrders:o.length,totalSpent:o.reduce((c,d)=>c+d.product.price,0),firstOrder:new Date(Math.min(...o.map(c=>new Date(c.createdAt).getTime()))),lastOrder:new Date(Math.max(...o.map(c=>new Date(c.createdAt).getTime())))}}),s=i=>t.filter(o=>o.customerEmail===i);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Customer Management"}),a.jsx("p",{className:"text-gray-600",children:"View customer information and order history"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(i=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(ps,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:i.name}),a.jsx("p",{className:"text-sm text-gray-500",children:i.email})]})]}),a.jsx("button",{onClick:()=>r(e===i.email?null:i.email),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:e===i.email?"Hide":"View Orders"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(Tc,{className:"h-4 w-4"}),a.jsx("span",{children:i.phone})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(Nn,{className:"h-4 w-4"}),a.jsxs("span",{children:[i.totalOrders," orders"]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(_d,{className:"h-4 w-4"}),a.jsxs("span",{children:["Customer since ",i.firstOrder.toLocaleDateString()]})]}),a.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[a.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",i.totalSpent.toFixed(2)]}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total spent"})]})]}),e===i.email&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Order History"}),a.jsx("div",{className:"space-y-2",children:s(i.email).map(o=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:o.product.name}),a.jsxs("div",{className:"text-gray-500",children:["#",o.id]})]}),a.jsxs("div",{className:"text-right text-sm",children:[a.jsxs("div",{className:"font-medium text-gray-900",children:["$",o.product.price.toFixed(2)]}),a.jsx("div",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${o.status==="pending"?"bg-yellow-100 text-yellow-800":o.status==="processing"?"bg-blue-100 text-blue-800":o.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.status.charAt(0).toUpperCase()+o.status.slice(1)})]})]},o.id))})]})]},i.email))}),n.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ps,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Customers Yet"}),a.jsx("p",{className:"text-gray-500",children:"Customers will appear here once they place orders."})]}),n.length>0&&a.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(ps,{className:"h-8 w-8 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Customers"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Nn,{className:"h-8 w-8 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Pc,{className:"h-8 w-8 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg Orders/Customer"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(t.length/n.length).toFixed(1)})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(_d,{className:"h-8 w-8 text-yellow-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",t.reduce((i,o)=>i+o.product.price,0).toFixed(2)]})]})]})})]})]})},Rb=()=>{Bt();const[t,e]=_.useState({business:{businessName:"",businessEmail:"",phoneNumber:"",businessAddress:"",businessLogo:""},payment:{paymentTiming:"before_submission",stripePublishableKey:"",stripeSecretKey:""},general:{country:"United States",currency:"US Dollar ($)",taxRate:0},email:{resendApiKey:"",fromEmail:"",emailNotifications:!1},sms:{twilioAccountSid:"",twilioAuthToken:"",twilioPhoneNumber:"",smsNotifications:!1}}),[r,n]=_.useState("business"),[s,i]=_.useState(!0),[o,l]=_.useState(!1);_.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const p=await Et();p&&e(p)}catch(p){console.error("Error loading settings:",p)}finally{i(!1)}},d=async()=>{try{l(!0);const p=await Vp(t);alert(p?"Settings saved successfully!":"Error saving settings. Please try again.")}catch(p){console.error("Error saving settings:",p),alert("Error saving settings. Please try again.")}finally{l(!1)}},u=(p,g)=>{e(m=>({...m,[p]:{...m[p],...g}}))},h=p=>{var m;const g=(m=p.target.files)==null?void 0:m[0];if(g){const x=new FileReader;x.onload=E=>{var j;u("business",{businessLogo:(j=E.target)==null?void 0:j.result})},x.readAsDataURL(g)}};if(s)return a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]})});const f=()=>a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Business Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),a.jsx("input",{type:"text",value:t.business.businessName,onChange:p=>u("business",{businessName:p.target.value}),placeholder:"Enter business name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Email"}),a.jsx("input",{type:"email",value:t.business.businessEmail,onChange:p=>u("business",{businessEmail:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:t.business.phoneNumber,onChange:p=>u("business",{phoneNumber:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Address"}),a.jsx("input",{type:"text",value:t.business.businessAddress,onChange:p=>u("business",{businessAddress:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Logo"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[t.business.businessLogo&&a.jsx("img",{src:t.business.businessLogo,alt:"Business Logo",className:"w-16 h-16 object-cover rounded border"}),a.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"hidden",id:"logo-upload"}),a.jsxs("label",{htmlFor:"logo-upload",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer transition-colors",children:[a.jsx(bl,{className:"h-4 w-4"}),a.jsx("span",{children:"Upload Logo"})]})]})]})]})]}),v=()=>a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Settings"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Timing"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"radio",name:"paymentTiming",value:"before_submission",checked:t.payment.paymentTiming==="before_submission",onChange:p=>u("payment",{paymentTiming:p.target.value}),className:"text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Payment required before order submission"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"radio",name:"paymentTiming",value:"at_pickup",checked:t.payment.paymentTiming==="at_pickup",onChange:p=>u("payment",{paymentTiming:p.target.value}),className:"text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Payment at pickup (both options available)"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stripe Publishable Key"}),a.jsx("input",{type:"text",value:t.payment.stripePublishableKey,onChange:p=>u("payment",{stripePublishableKey:p.target.value}),placeholder:"pk_test_...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stripe Secret Key"}),a.jsx("input",{type:"password",value:t.payment.stripeSecretKey,onChange:p=>u("payment",{stripeSecretKey:p.target.value}),placeholder:"sk_test_...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),y=()=>a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"General Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),a.jsx("input",{type:"text",value:t.general.country,onChange:p=>u("general",{country:p.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Currency"}),a.jsx("input",{type:"text",value:t.general.currency,onChange:p=>u("general",{currency:p.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tax Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:t.general.taxRate*100,onChange:p=>{const m=(parseFloat(p.target.value)||0)/100;u("general",{taxRate:m})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),a.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Current tax rate: ",(t.general.taxRate*100).toFixed(2),"%"]})]})]})]}),b=()=>a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Email Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resend API Key"}),a.jsx("input",{type:"password",value:t.email.resendApiKey,onChange:p=>u("email",{resendApiKey:p.target.value}),placeholder:"re_...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Email Address"}),a.jsx("input",{type:"email",value:t.email.fromEmail,onChange:p=>u("email",{fromEmail:p.target.value}),placeholder:"noreply@yourbusiness.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"emailNotifications",checked:t.email.emailNotifications,onChange:p=>u("email",{emailNotifications:p.target.checked}),className:"text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"emailNotifications",className:"text-sm text-gray-700",children:"Enable email notifications for order updates"})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:()=>{const p={id:"test-"+Date.now(),customerName:"Test Customer",customerEmail:"test@example.com",customerPhone:"+1234567890",product:{id:"test-product",name:"Test Product",description:"A test product for email testing",price:29.99,images:[],surfaceTone:"light",mockupImage:"",engravingBoundary:{x:0,y:0,width:100,height:100}},uploadedImage:"",processedImage:"",mockupImage:"",imagePosition:{x:0,y:0,scale:1,rotation:0},textLayers:[],status:"pending",createdAt:new Date().toISOString()};console.log("Testing email with job:",p),console.log("Current email settings:",t.email),Nl(p).then(g=>{alert(g?"Test email sent successfully! Check the console for details.":"Failed to send test email. Check the console for details.")}).catch(g=>{console.error("Test email error:",g),alert("Error sending test email: "+g.message)})},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[a.jsx(Pc,{className:"h-4 w-4"}),a.jsx("span",{children:"Send Test Email"})]})}),a.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-md",children:[a.jsx("h4",{className:"text-sm font-medium text-green-800 mb-2",children:" Email Integration Ready"}),a.jsx("p",{className:"text-sm text-green-700",children:"Your email integration is now complete! The system will send real emails via Resend when: orders are submitted, completed, or picked up. Make sure your backend server is running on port 3001."})]})]})]}),w=()=>a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"SMS Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Twilio Account SID"}),a.jsx("input",{type:"text",value:t.sms.twilioAccountSid,onChange:p=>u("sms",{twilioAccountSid:p.target.value}),placeholder:"AC...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Twilio Auth Token"}),a.jsx("input",{type:"password",value:t.sms.twilioAuthToken,onChange:p=>u("sms",{twilioAuthToken:p.target.value}),placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Twilio Phone Number"}),a.jsx("input",{type:"tel",value:t.sms.twilioPhoneNumber,onChange:p=>u("sms",{twilioPhoneNumber:p.target.value}),placeholder:"+1234567890",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"smsNotifications",checked:t.sms.smsNotifications,onChange:p=>u("sms",{smsNotifications:p.target.checked}),className:"text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"smsNotifications",className:"text-sm text-gray-700",children:"Enable SMS notifications for order updates"})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:()=>{const p=t.sms.twilioPhoneNumber||"your_phone_number";Sb(p,"This is a test SMS from your Laser Engraving system!").then(()=>{alert("Test SMS sent successfully! Check your phone.")}).catch(m=>{console.error("Test SMS error:",m),alert("Error sending test SMS: "+m.message)})},className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[a.jsx(Tc,{className:"h-4 w-4"}),a.jsx("span",{children:"Send Test SMS"})]})}),a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:" SMS Integration Ready"}),a.jsx("p",{className:"text-sm text-blue-700",children:"Your SMS integration is now complete! The system will send real SMS messages via Twilio when: orders are submitted, completed, or picked up. Make sure your backend server is running on port 3001."})]})]})]});return a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Settings"}),a.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:[a.jsx("button",{onClick:()=>n("business"),className:`px-4 py-2 rounded-md transition-colors ${r==="business"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Business"}),a.jsx("button",{onClick:()=>n("payment"),className:`px-4 py-2 rounded-md transition-colors ${r==="payment"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Payment"}),a.jsx("button",{onClick:()=>n("general"),className:`px-4 py-2 rounded-md transition-colors ${r==="general"?"bg-blue-600 text-white":"text-gray-900"}`,children:"General"}),a.jsx("button",{onClick:()=>n("email"),className:`px-4 py-2 rounded-md transition-colors ${r==="email"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Email"}),a.jsx("button",{onClick:()=>n("sms"),className:`px-4 py-2 rounded-md transition-colors ${r==="sms"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"SMS"})]}),a.jsx("div",{className:"flex justify-end mb-6",children:a.jsxs("button",{onClick:d,disabled:o,className:`flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors ${o?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx(bl,{className:"w-4 h-4"}),a.jsx("span",{children:o?"Saving...":"Save Settings"})]})}),r==="business"&&f(),r==="payment"&&v(),r==="general"&&y(),r==="email"&&b(),r==="sms"&&w()]})})},Ib=()=>{const{products:t,jobs:e,isAdmin:r}=Bt(),[n,s]=_.useState("products");if(!r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:"You need to be logged in as an admin to access this page."})]})});const i=()=>{switch(n){case"products":return a.jsx(Ud,{});case"orders":return a.jsx(Tb,{});case"customers":return a.jsx(Ob,{});case"settings":return a.jsx(Rb,{});default:return a.jsx(Ud,{})}},o=c=>{switch(c){case"products":return a.jsx(Nn,{className:"h-5 w-5"});case"orders":return a.jsx(Ci,{className:"h-5 w-5"});case"customers":return a.jsx(ps,{className:"h-5 w-5"});case"settings":return a.jsx(Mp,{className:"h-5 w-5"})}},l=c=>{switch(c){case"products":return"Products";case"orders":return"Orders";case"customers":return"Customers";case"settings":return"Settings"}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"py-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Panel"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your laser engraving business"})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Nn,{className:"h-8 w-8 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Ci,{className:"h-8 w-8 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(ps,{className:"h-8 w-8 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Unique Customers"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:new Set(e.map(c=>c.customerEmail)).size})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Ci,{className:"h-8 w-8 text-yellow-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Orders"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(c=>c.status==="pending").length})]})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:["products","orders","customers","settings"].map(c=>a.jsxs("button",{onClick:()=>s(c),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${n===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} transition-colors`,children:[o(c),a.jsx("span",{children:l(c)})]},c))})})}),a.jsx("div",{className:"bg-white rounded-lg shadow",children:i()})]})]})},Ab=()=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full text-center",children:[a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"mx-auto h-24 w-24 flex items-center justify-center rounded-full bg-red-100",children:a.jsx("span",{className:"text-4xl font-bold text-red-600",children:"404"})})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Page Not Found"}),a.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"The page you're looking for doesn't exist or has been moved."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Xn,{to:"/",className:"inline-flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[a.jsx(Sw,{className:"h-5 w-5"}),a.jsx("span",{children:"Go Home"})]}),a.jsxs("button",{onClick:()=>window.history.back(),className:"w-full inline-flex items-center justify-center space-x-2 px-6 py-3 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:[a.jsx(xw,{className:"h-5 w-5"}),a.jsx("span",{children:"Go Back"})]})]})]})});function $b(){return a.jsx(mw,{children:a.jsx(qy,{children:a.jsx(zy,{children:a.jsxs(Yr,{path:"/",element:a.jsx(Mw,{}),children:[a.jsx(Yr,{index:!0,element:a.jsx(_b,{})}),a.jsx(Yr,{path:"admin/login",element:a.jsx(jb,{})}),a.jsx(Yr,{path:"admin/panel",element:a.jsx(Ib,{})}),a.jsx(Yr,{path:"*",element:a.jsx(Ab,{})})]})})})})}pa.createRoot(document.getElementById("root")).render(a.jsx(V.StrictMode,{children:a.jsx($b,{})}));
